var zu=Object.create;var Xe=Object.defineProperty;var Wu=Object.getOwnPropertyDescriptor;var Gu=Object.getOwnPropertyNames;var Ju=Object.getPrototypeOf,Xu=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(e&&(t=e(e=0)),t);var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),m=(e,t)=>{for(var r in t)Xe(e,r,{get:t[r],enumerable:!0})},Na=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Gu(t))!Xu.call(e,a)&&a!==r&&Xe(e,a,{get:()=>t[a],enumerable:!(o=Wu(t,a))||o.enumerable});return e};var b=(e,t,r)=>(r=e!=null?zu(Ju(e)):{},Na(t||!e||!e.__esModule?Xe(r,"default",{value:e,enumerable:!0}):r,e)),Qu=e=>Na(Xe({},"__esModule",{value:!0}),e);var qa=A((Mg,La)=>{"use strict";La.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,a,n;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(a=o;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(n=Object.keys(t),o=n.length,o!==Object.keys(r).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=o;a--!==0;){var s=n[a];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}});var Ma=A(xe=>{"use strict";var Yu=xe&&xe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xe,"__esModule",{value:!0});xe.initIsEqual=void 0;var Zu=Yu(qa()),ec=()=>{let e={isEqual:Zu.default};globalThis.toddle=e};xe.initIsEqual=ec});var O=A(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.toBoolean=de.isObject=de.isDefined=void 0;var yc=e=>e!=null;de.isDefined=yc;var gc=e=>typeof e=="object"&&e!==null;de.isObject=gc;var vc=e=>e!==!1&&e!==void 0&&e!==null;de.toBoolean=vc});var Le=A(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.isToddleFormula=void 0;var bc=e=>Object.hasOwn(e,"formula");lt.isToddleFormula=bc});var V=A(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.isFormula=nn;qe.isFormulaApplyOperation=wc;qe.applyFormula=q;var ut=O(),Fc=Le();function nn(e){return e&&typeof e=="object"&&typeof e.type=="string"}function wc(e){return e.type==="apply"}function q(e,t){if(!nn(e))return e;try{switch(e.type){case"value":return e.value;case"path":return e.path.reduce((r,o)=>r&&typeof r=="object"?r[o]:null,t.data);case"switch":{for(let r of e.cases)if((0,ut.toBoolean)(q(r.condition,t)))return q(r.formula,t);return q(e.default,t)}case"or":{for(let r of e.arguments)if((0,ut.toBoolean)(q(r.formula,t)))return!0;return!1}case"and":{for(let r of e.arguments)if(!(0,ut.toBoolean)(q(r.formula,t)))return!1;return!0}case"function":{let r=e.package??t.package,o=(t.toddle??globalThis.toddle)?.getCustomFormula(e.name,r),a=(t.toddle??globalThis.toddle).getFormula(e.name);if((0,ut.isDefined)(o)){let n=e.arguments.reduce((s,i,l)=>({...s,[i.name??`${l}`]:i.isFunction?u=>q(i.formula,{...t,data:{...t.data,Args:t.data.Args?{...u,"@toddle.parent":t.data.Args}:u}}):q(i.formula,t)}),{});try{return(0,Fc.isToddleFormula)(o)?q(o.formula,{...t,data:{...t.data,Args:n}}):o.handler(n,{root:t.root??document,env:t.env})}catch(s){return t.toddle.errors.push(s),t.env?.logErrors&&console.error(s),null}}else if(typeof a=="function"){let n=e.arguments.map(s=>s.isFunction?i=>q(s.formula,{...t,data:{...t.data,Args:t.data.Args?{...i,"@toddle.parent":t.data.Args}:i}}):q(s.formula,t));try{return a(n,t)}catch(s){return t.toddle.errors.push(s),t.env?.logErrors&&console.error(s),null}}return t.env?.logErrors&&console.error(`Could not find formula ${e.name} in package ${r??""}`,e),null}case"object":return Object.fromEntries(e.arguments?.map(r=>[r.name,q(r.formula,t)])??[]);case"record":return Object.fromEntries(e.entries.map(r=>[r.name,q(r.formula,t)]));case"array":return e.arguments.map(r=>q(r.formula,t));case"apply":{let r=t.component.formulas?.[e.name];if(!r)return t.env?.logErrors&&console.log("Component does not have a formula with the name ",e.name),null;let o=Object.fromEntries(e.arguments.map(s=>s.isFunction?[s.name,i=>q(s.formula,{...t,data:{...t.data,Args:t.data.Args?{...i,"@toddle.parent":t.data.Args}:i}})]:[s.name,q(s.formula,t)])),a={...t.data,Args:t.data.Args?{...o,"@toddle.parent":t.data.Args}:o},n=t.formulaCache?.[e.name]?.get(a);if(n?.hit)return n.data;{let s=q(r.formula,{...t,data:a});return t.formulaCache?.[e.name]?.set(a,s),s}}default:t.env?.logErrors&&console.error("Could not recognize formula",e)}}catch(r){return t.env?.logErrors&&console.error(r),null}}});var Y=A(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.deepSortObject=j.easySort=j.sortObjectEntries=j.set=j.filterObject=j.groupBy=j.omitPaths=j.omitKeys=j.omit=j.mapValues=j.mapObject=j.isObject=void 0;j.get=sn;var Ac=O(),Ec=e=>typeof e=="object"&&e!==null;j.isObject=Ec;var xc=(e,t)=>Object.fromEntries(Object.entries(e).map(t));j.mapObject=xc;var Oc=(e,t)=>(0,j.mapObject)(e,([r,o])=>[r,t(o)]);j.mapValues=Oc;var jc=(e,t)=>{let[r,...o]=t,a=Array.isArray(e)?[...e]:(0,j.isObject)(e)?{...e}:{};return o.length===0?delete a[r]:a[r]=(0,j.omit)(a[r],o),a};j.omit=jc;var Cc=(e,t)=>Object.fromEntries(Object.entries(e).filter(([r])=>!t.includes(r)));j.omitKeys=Cc;var Sc=(e,t)=>t.reduce((r,o)=>(0,j.omit)(r,o),{...e});j.omitPaths=Sc;var kc=(e,t)=>e.reduce((r,o)=>{let a=t(o);return r[a]=r[a]??[],r[a].push(o),r},{});j.groupBy=kc;var _c=(e,t)=>Object.fromEntries(Object.entries(e).filter(t));j.filterObject=_c;function sn(e,[t,...r]){return r.length===0?e?.[t]:sn(e?.[t],r)}var Rc=(e,t,r)=>{let[o,...a]=t,n=Array.isArray(e)?[...e]:(0,j.isObject)(e)?{...e}:{};return n[o]=a.length===0?r:(0,j.set)(n[o],a,r),n};j.set=Rc;var Tc=(e,t,r=!0)=>(0,j.easySort)(Object.entries(e),t,r);j.sortObjectEntries=Tc;var Dc=(e,t,r=!0)=>[...e].sort((o,a)=>{let n=t(o),s=t(a);return n===s?0:(n>s?1:-1)*(r?1:-1)});j.easySort=Dc;var Hc=e=>(0,Ac.isDefined)(e)?Array.isArray(e)?e.map(t=>(0,j.deepSortObject)(t)):typeof e=="object"&&Object.keys(e).length>0?[...Object.keys(e)].sort().reduce((t,r)=>(t[r]=(0,j.deepSortObject)(e[r]),t),{}):e:e;j.deepSortObject=Hc});var ln=A(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.hash=void 0;var Pc=(e,t=0)=>{let r=3735928559^t,o=1103547991^t;for(let a=0,n;a<e.length;a++)n=e.charCodeAt(a),r=Math.imul(r^n,2654435761),o=Math.imul(o^n,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(o^o>>>13,3266489909),o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&o)+(r>>>0)};ct.hash=Pc});var cn=A(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.ApiMethod=void 0;var un;(function(e){e.GET="GET",e.POST="POST",e.DELETE="DELETE",e.PUT="PUT",e.PATCH="PATCH",e.HEAD="HEAD",e.OPTIONS="OPTIONS"})(un||(dt.ApiMethod=un={}))});var pt=A(ee=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.functionFormula=ee.pathFormula=ee.valueFormula=void 0;ee.getFormulasInFormula=U;ee.getFormulasInAction=ye;var ft=O(),dn=V(),Ic=Le(),$c=e=>({type:"value",value:e});ee.valueFormula=$c;var Nc=e=>({type:"path",path:e});ee.pathFormula=Nc;var Lc=(e,t)=>({type:"function",name:e,package:t?.package,arguments:t?.arguments??[],variableArguments:t?.variableArguments});ee.functionFormula=Lc;function*U({formula:e,globalFormulas:t,path:r=[],visitedFormulas:o=new Set}){if((0,ft.isDefined)(e))switch(yield[r,e],e.type){case"path":case"value":break;case"record":for(let[a,n]of e.entries.entries())yield*U({formula:n.formula,globalFormulas:t,path:[...r,"entries",a,"formula"],visitedFormulas:o});break;case"function":{let a=[e.package,e.name].filter(ft.isDefined).join("/"),n=!o.has(a);o.add(a);let s=e.package?t.packages?.[e.package]?.formulas?.[e.name]:t.formulas?.[e.name];for(let[i,l]of(e.arguments??[]).entries())yield*U({formula:l.formula,globalFormulas:t,path:[...r,"arguments",i,"formula"],visitedFormulas:o});s&&(0,Ic.isToddleFormula)(s)&&n&&(yield*U({formula:s.formula,globalFormulas:t,path:[...r,"formula"],visitedFormulas:o}));break}case"array":case"or":case"and":case"object":for(let[a,n]of(e.arguments??[]).entries())yield*U({formula:n.formula,globalFormulas:t,path:[...r,"arguments",a,"formula"],visitedFormulas:o});break;case"apply":for(let[a,n]of(e.arguments??[]).entries())yield*U({formula:n.formula,globalFormulas:t,path:[...r,"arguments",a,"formula"],visitedFormulas:o});break;case"switch":for(let[a,n]of e.cases.entries())yield*U({formula:n.condition,globalFormulas:t,path:[...r,"cases",a,"condition"],visitedFormulas:o}),yield*U({formula:n.formula,globalFormulas:t,path:[...r,"cases",a,"formula"],visitedFormulas:o});yield*U({formula:e.default,globalFormulas:t,path:[...r,"default"],visitedFormulas:o});break}}function*ye({action:e,globalFormulas:t,path:r=[],visitedFormulas:o=new Set}){if((0,ft.isDefined)(e))switch(e.type){case"Fetch":for(let[a,n]of Object.entries(e.inputs??{}))yield*U({formula:n.formula,globalFormulas:t,path:[...r,"input",a,"formula"],visitedFormulas:o});for(let[a,n]of Object.entries(e.onSuccess?.actions??{}))yield*ye({action:n,globalFormulas:t,path:[...r,"onSuccess","actions",a],visitedFormulas:o});for(let[a,n]of Object.entries(e.onError?.actions??{}))yield*ye({action:n,globalFormulas:t,path:[...r,"onError","actions",a],visitedFormulas:o});for(let[a,n]of Object.entries(e.onMessage?.actions??{}))yield*ye({action:n,globalFormulas:t,path:[...r,"onMessage","actions",a],visitedFormulas:o});break;case"Custom":case void 0:(0,dn.isFormula)(e.data)&&(yield*U({formula:e.data,globalFormulas:t,path:[...r,"data"],visitedFormulas:o}));for(let[a,n]of Object.entries(e.arguments??{}))yield*U({formula:n.formula,globalFormulas:t,path:[...r,"arguments",a,"formula"],visitedFormulas:o});for(let[a,n]of Object.entries(e.events??{}))for(let[s,i]of Object.entries(n.actions??{}))yield*ye({action:i,globalFormulas:t,path:[...r,"events",a,"actions",s],visitedFormulas:o});break;case"SetVariable":case"SetURLParameter":case"TriggerEvent":yield*U({formula:e.data,globalFormulas:t,path:[...r,"data"],visitedFormulas:o});break;case"TriggerWorkflow":for(let[a,n]of Object.entries(e.parameters??{}))yield*U({formula:n.formula,globalFormulas:t,path:[...r,"parameters",a,"formula"],visitedFormulas:o});break;case"Switch":(0,ft.isDefined)(e.data)&&(0,dn.isFormula)(e.data)&&(yield*U({formula:e.data,globalFormulas:t,path:[...r,"data"],visitedFormulas:o}));for(let[a,n]of e.cases.entries()){yield*U({formula:n.condition,globalFormulas:t,path:[...r,"cases",a,"condition"],visitedFormulas:o});for(let[s,i]of Object.entries(n.actions))yield*ye({action:i,globalFormulas:t,path:[...r,"cases",a,"actions",s],visitedFormulas:o})}for(let[a,n]of Object.entries(e.default.actions))yield*ye({action:n,globalFormulas:t,path:[...r,"default","actions",a],visitedFormulas:o});break}}});var pr=A(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.LegacyToddleApi=void 0;var fn=V(),ae=pt(),qc=O(),fr=class{api;key;globalFormulas;_apiReferences;constructor(t,r,o){this.api=t,this.key=r,this.globalFormulas=o}get apiReferences(){if(this._apiReferences)return this._apiReferences;let t=new Set,r=o=>{if((0,qc.isDefined)(o))switch(o.type){case"path":o.path[0]==="Apis"&&t.add(o.path[1]);break;case"value":break;case"record":o.entries.forEach(a=>r(a.formula));break;case"function":case"array":case"or":case"and":case"apply":case"object":o.arguments?.forEach(a=>r(a.formula));break;case"switch":o.cases.forEach(a=>{r(a.condition),r(a.formula)});break}};return r(this.api.autoFetch),r(this.api.url),Object.values(this.api.path??{}).forEach(o=>r(o.formula)),Object.values(this.api.queryParams??{}).forEach(o=>r(o.formula)),(0,fn.isFormula)(this.api.headers)?r(this.api.headers):Object.values(this.api.headers??{}).forEach(o=>{r(o)}),r(this.api.body),this._apiReferences=t,t}get name(){return this.api.name}get type(){return this.api.type}get autoFetch(){return this.api.autoFetch}get url(){return this.api.url}get path(){return this.api.path}get proxy(){return this.api.proxy}get queryParams(){return this.api.queryParams}get headers(){return this.api.headers}get method(){return this.api.method}get body(){return this.api.body}get auth(){return this.api.auth}get throttle(){return this.api.throttle}get debounce(){return this.api.debounce}get onCompleted(){return this.api.onCompleted}get onFailed(){return this.api.onFailed}*formulasInApi(){let t=this.api,r=this.key;yield*(0,ae.getFormulasInFormula)({formula:t.autoFetch,globalFormulas:this.globalFormulas,path:["apis",r,"autoFetch"]}),yield*(0,ae.getFormulasInFormula)({formula:t.url,globalFormulas:this.globalFormulas,path:["apis",r,"url"]});for(let[o,a]of Object.entries(t.path??{}))yield*(0,ae.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"path",o,"formula"]});for(let[o,a]of Object.entries(t.queryParams??{}))yield*(0,ae.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"queryParams",o,"formula"]});if((0,fn.isFormula)(t.headers))yield*(0,ae.getFormulasInFormula)({formula:t.headers,globalFormulas:this.globalFormulas,path:["apis",r,"headers"]});else for(let[o,a]of Object.entries(t.headers??{}))yield*(0,ae.getFormulasInFormula)({formula:a,globalFormulas:this.globalFormulas,path:["apis",r,"headers",o]});yield*(0,ae.getFormulasInFormula)({formula:t.body,globalFormulas:this.globalFormulas,path:["apis",r,"body"]});for(let[o,a]of Object.entries(t.onCompleted?.actions??{}))yield*(0,ae.getFormulasInAction)({action:a,globalFormulas:this.globalFormulas,path:["apis",r,"onCompleted","actions",o]});for(let[o,a]of Object.entries(t.onFailed?.actions??{}))yield*(0,ae.getFormulasInAction)({action:a,globalFormulas:this.globalFormulas,path:["apis",r,"onFailed","actions",o]})}};mt.LegacyToddleApi=fr});var hr=A(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.getActionsInAction=ge;var Mc=O();function*ge(e,t=[]){if((0,Mc.isDefined)(e))switch(yield[t,e],e.type){case"SetVariable":case"SetURLParameter":case"TriggerEvent":case"TriggerWorkflow":break;case"Fetch":for(let[r,o]of Object.entries(e.onSuccess?.actions??{}))yield*ge(o,[...t,"onSuccess","actions",r]);for(let[r,o]of Object.entries(e.onError?.actions??{}))yield*ge(o,[...t,"onError","actions",r]);for(let[r,o]of Object.entries(e.onMessage?.actions??{}))yield*ge(o,[...t,"onMessage","actions",r]);break;case"Custom":case void 0:for(let[r,o]of Object.entries(e.events??{}))for(let[a,n]of Object.entries(o?.actions??{}))yield*ge(n,[...t,"events",r,"actions",a]);break;case"Switch":for(let[r,o]of e.cases.entries())for(let[a,n]of Object.entries(o?.actions??{}))yield*ge(n,[...t,"cases",r,"actions",a]);for(let[r,o]of Object.entries(e.default.actions))yield*ge(o,[...t,"default","actions",r]);break}}});var vr=A(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.ToddleApiV2=void 0;var yr=hr(),L=pt(),Bc=O(),gr=class{api;_apiReferences;key;globalFormulas;constructor(t,r,o){this.api=t,this.key=r,this.globalFormulas=o}get apiReferences(){if(this._apiReferences)return this._apiReferences;let t=new Set,r=o=>{if((0,Bc.isDefined)(o))switch(o.type){case"path":o.path[0]==="Apis"&&t.add(o.path[1]);break;case"value":break;case"record":o.entries.forEach(a=>r(a.formula));break;case"function":case"array":case"or":case"and":case"apply":case"object":o.arguments?.forEach(a=>r(a.formula));break;case"switch":o.cases.forEach(a=>{r(a.condition),r(a.formula)});break}};return r(this.api.autoFetch),r(this.api.url),Object.values(this.api.path??{}).forEach(o=>r(o.formula)),Object.values(this.api.headers??{}).forEach(o=>r(o.formula)),r(this.api.body),Object.values(this.api.inputs).forEach(o=>r(o.formula)),Object.values(this.api.queryParams??{}).forEach(o=>{r(o.formula)}),r(this.api.server?.proxy?.enabled?.formula),r(this.api.server?.ssr?.enabled?.formula),r(this.api.client?.debounce?.formula),Object.values(this.api.redirectRules??{}).forEach(o=>{r(o.formula)}),r(this.api.isError?.formula),r(this.api.timeout?.formula),t.delete(this.key),this._apiReferences=t,t}get version(){return this.api.version}get name(){return this.api.name}get type(){return this.api.type}get autoFetch(){return this.api.autoFetch}get url(){return this.api.url}get path(){return this.api.path}get headers(){return this.api.headers}set headers(t){this.api.headers=t}get method(){return this.api.method}get body(){return this.api.body}get inputs(){return this.api.inputs}get queryParams(){return this.api.queryParams}get server(){return this.api.server}get client(){return this.api.client}get redirectRules(){return this.api.redirectRules}get isError(){return this.api.isError}get timeout(){return this.api.timeout}*formulasInApi(){let t=this.api,r=this.key;for(let[o,a]of Object.entries(this.api.inputs))yield*(0,L.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"inputs",o,"formula"]});yield*(0,L.getFormulasInFormula)({formula:t.autoFetch,globalFormulas:this.globalFormulas,path:["apis",r,"autoFetch"]}),yield*(0,L.getFormulasInFormula)({formula:t.url,globalFormulas:this.globalFormulas,path:["apis",r,"url"]});for(let[o,a]of Object.entries(t.path??{}))yield*(0,L.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"path",o,"formula"]});for(let[o,a]of Object.entries(t.queryParams??{}))yield*(0,L.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"queryParams",o,"formula"]}),yield*(0,L.getFormulasInFormula)({formula:a.enabled,globalFormulas:this.globalFormulas,path:["apis",r,"queryParams",o,"enabled"]});for(let[o,a]of Object.entries(t.headers??{}))yield*(0,L.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"headers",o,"formula"]}),yield*(0,L.getFormulasInFormula)({formula:a.enabled,globalFormulas:this.globalFormulas,path:["apis",r,"headers",o,"enabled"]});yield*(0,L.getFormulasInFormula)({formula:t.body,globalFormulas:this.globalFormulas,path:["apis",r,"body"]});for(let[o,a]of Object.entries(t.client?.onCompleted?.actions??{}))yield*(0,L.getFormulasInAction)({action:a,globalFormulas:this.globalFormulas,path:["apis",r,"client","onCompleted","actions",o]});for(let[o,a]of Object.entries(t.client?.onFailed?.actions??{}))yield*(0,L.getFormulasInAction)({action:a,globalFormulas:this.globalFormulas,path:["apis",r,"client","onFailed","actions",o]});yield*(0,L.getFormulasInFormula)({formula:t.client?.debounce?.formula,globalFormulas:this.globalFormulas,path:["apis",r,"client","debounce","formula"]});for(let[o,a]of Object.entries(t.client?.onMessage?.actions??{}))yield*(0,L.getFormulasInAction)({action:a,globalFormulas:this.globalFormulas,path:["apis",r,"client","onMessage","actions",o]});for(let[o,a]of Object.entries(t.redirectRules??{}))yield*(0,L.getFormulasInFormula)({formula:a.formula,globalFormulas:this.globalFormulas,path:["apis",r,"redirectRules",o,"formula"]});yield*(0,L.getFormulasInFormula)({formula:t.isError?.formula,globalFormulas:this.globalFormulas,path:["apis",r,"isError","formula"]}),yield*(0,L.getFormulasInFormula)({formula:t.timeout?.formula,globalFormulas:this.globalFormulas,path:["apis",r,"timeout","formula"]}),yield*(0,L.getFormulasInFormula)({formula:t.server?.proxy?.enabled.formula,globalFormulas:this.globalFormulas,path:["apis",r,"server","proxy","enabled","formula"]}),yield*(0,L.getFormulasInFormula)({formula:t.server?.ssr?.enabled?.formula,globalFormulas:this.globalFormulas,path:["apis",r,"server","ssr","enabled","formula"]})}*actionModelsInApi(){for(let[t,r]of Object.entries(this.api.client?.onCompleted?.actions??{}))yield*(0,yr.getActionsInAction)(r,["apis",this.key,"client","onCompleted","actions",t]);for(let[t,r]of Object.entries(this.api.client?.onFailed?.actions??{}))yield*(0,yr.getActionsInAction)(r,["apis",this.key,"client","onFailed","actions",t]);for(let[t,r]of Object.entries(this.api.client?.onMessage?.actions??{}))yield*(0,yr.getActionsInAction)(r,["apis",this.key,"client","onData","actions",t])}};ht.ToddleApiV2=gr});var Me=A(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.sortApiEntries=C.sortApiObjects=C.createApiEvent=C.isApiError=C.requestHash=C.getBaseUrl=C.getRequestHeaders=C.getRequestQueryParams=C.getRequestPath=C.applyAbortSignal=C.getUrl=C.createApiRequest=C.isLegacyApi=C.NON_BODY_RESPONSE_CODES=void 0;var ne=V(),pn=Y(),Uc=ln(),fe=O(),ve=cn(),mn=pr(),Vc=vr();C.NON_BODY_RESPONSE_CODES=[101,204,205,304];var Kc=e=>e instanceof mn.LegacyToddleApi?!0:!("version"in e);C.isLegacyApi=Kc;var zc=({api:e,formulaContext:t,baseUrl:r,defaultHeaders:o})=>{let a=(0,C.getUrl)(e,t,r),n=Xc({api:e,formulaContext:t,defaultHeaders:o});return{url:a,requestSettings:n}};C.createApiRequest=zc;var Wc=(e,t,r)=>{let o="",a=new URLSearchParams,n,s=(0,ne.applyFormula)(e.url,t);if(["string","number"].includes(typeof s)){let d=typeof s=="number"?String(s):s;try{n=new URL(d,r),o=n.pathname,a=n.searchParams}catch{}}let i=(0,C.getRequestPath)(e.path,t),l=`${o}${i.length>0&&!o.endsWith("/")?"/":""}${i}`,u=new URLSearchParams([...a,...(0,C.getRequestQueryParams)(e.queryParams,t)]),c=[...u.entries()].length>0?`?${u.toString()}`:"";if(n){let d=new URL(n.origin,r);return d.pathname=l,d.search=u.toString(),d}else return new URL(`${l}${c}`,r)};C.getUrl=Wc;var Gc=[ve.ApiMethod.POST,ve.ApiMethod.DELETE,ve.ApiMethod.PUT,ve.ApiMethod.PATCH,ve.ApiMethod.OPTIONS],Jc=(e,t,r)=>{if(e.timeout){let o=(0,ne.applyFormula)(e.timeout.formula,r);typeof o=="number"&&!Number.isNaN(o)&&o>0&&(t.signal=AbortSignal.timeout(o))}};C.applyAbortSignal=Jc;var Xc=({api:e,formulaContext:t,defaultHeaders:r})=>{let o=Object.values(ve.ApiMethod).includes(e.method)?e.method:ve.ApiMethod.GET,a=(0,C.getRequestHeaders)({apiHeaders:e.headers,formulaContext:t,defaultHeaders:r}),n=od({api:e,formulaContext:t,headers:a,method:o});a.get("content-type")==="multipart/form-data"&&a.delete("content-type");let s={method:o,headers:a,body:n};return(0,C.applyAbortSignal)(e,s,t),s},Qc=(e,t)=>(0,pn.sortObjectEntries)(e??{},([r,o])=>o.index).map(([r,o])=>(0,ne.applyFormula)(o.formula,t)).join("/");C.getRequestPath=Qc;var Yc=(e,t)=>{let r=new URLSearchParams;return Object.entries(e??{}).forEach(([o,a])=>{if(!((0,fe.isDefined)(a.enabled)?(0,ne.applyFormula)(a.enabled,t):!0))return;let s=(0,ne.applyFormula)(a.formula,t);if((0,fe.isDefined)(s))if(Array.isArray(s))s.forEach(i=>r.append(o,String(i)));else if((0,fe.isObject)(s)){let i=(l,u)=>{Object.entries(l).forEach(([c,d])=>{if(!Array.isArray(d)&&(0,fe.isObject)(d))return i(d,`${u}[${c}]`);r.set(`${u}[${c}]`,String(d))})};i(s,o)}else r.set(o,String(s))}),r};C.getRequestQueryParams=Yc;var Zc=({apiHeaders:e,formulaContext:t,defaultHeaders:r})=>{let o=new Headers(r);return Object.entries(e??{}).forEach(([a,n])=>{if((0,fe.isDefined)(n.enabled)?(0,ne.applyFormula)(n.enabled,t):!0){let i=(0,ne.applyFormula)(n.formula,t);if((0,fe.isDefined)(i))try{o.set(a.trim(),(typeof i=="string"?i:String(i)).trim())}catch{}}}),o};C.getRequestHeaders=Zc;var ed=({origin:e,url:t})=>!(0,fe.isDefined)(t)||t===""||t.startsWith("/")?e+t:t;C.getBaseUrl=ed;var td=(e,t)=>(0,Uc.hash)(JSON.stringify({url:e.href,method:t.method,headers:(0,pn.omitKeys)(Object.fromEntries(Object.entries(t.headers??{})),["host","cookie"]),body:t.body??null}));C.requestHash=td;var rd=({apiName:e,response:t,formulaContext:r,errorFormula:o,performance:a})=>{let n=o?(0,ne.applyFormula)(o.formula,{component:r.component,package:r.package,toddle:r.toddle,data:{Attributes:{},Args:r.data.Args,Apis:{[e]:{isLoading:!1,data:t.body,error:null,response:{status:t.status,headers:t.headers,performance:a}}}},env:r.env}):null;return n==null?!t.ok:(0,fe.toBoolean)(n)};C.isApiError=rd;var od=({api:e,formulaContext:t,headers:r,method:o})=>{if(!e.body||!Gc.includes(o))return;let a=(0,ne.applyFormula)(e.body,t);if(a)switch(r.get("content-type")){case"application/x-www-form-urlencoded":return typeof a=="object"&&a!==null?Object.entries(a).map(([n,s])=>Array.isArray(s)?s.map(i=>`${encodeURIComponent(n)}=${encodeURIComponent(i)}`).join("&"):`${encodeURIComponent(n)}=${encodeURIComponent(String(s))}`).join("&"):"";case"multipart/form-data":{let n=new FormData;return typeof a=="object"&&a!==null&&Object.entries(a).forEach(([s,i])=>{n.set(s,i)}),n}case"text/plain":return String(a);default:return JSON.stringify(a)}},ad=(e,t)=>new CustomEvent(e,{detail:t});C.createApiEvent=ad;var hn=(e,t)=>{let r=e.apiReferences.has(t.name),o=t.apiReferences.has(e.name);return r===o?0:r?1:-1},nd=e=>{let t=new Map,r=(o,a)=>{let n=t.get(a);return n||(n=o.version===2?new Vc.ToddleApiV2(o,a,{formulas:{},packages:{}}):new mn.LegacyToddleApi(o,a,{formulas:{},packages:{}}),t.set(a,n)),n};return[...e].sort(([o,a],[n,s])=>{let i=r(a,o),l=r(s,n);return hn(i,l)})};C.sortApiObjects=nd;var sd=e=>[...e].sort(([t,r],[o,a])=>hn(r,a));C.sortApiEntries=sd});var te=A(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.REWRITE_HEADER=G.PROXY_URL_HEADER=G.validateUrl=G.isLocalhostHostname=G.isLocalhostUrl=void 0;var id=["http://localhost:54404","http://preview.localhost:54404"],ld=e=>id.some(t=>e.startsWith(t));G.isLocalhostUrl=ld;var ud=e=>e==="localhost"||e==="127.0.0.1";G.isLocalhostHostname=ud;var cd=(e,t)=>{if(typeof e!="string")return!1;try{let r=new URL(e,t);return r.searchParams.forEach((o,a)=>{r.searchParams.set(a,o)}),r}catch{return!1}};G.validateUrl=cd;G.PROXY_URL_HEADER="x-toddle-url";G.REWRITE_HEADER="x-toddle-rewrite"});var vn=A(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.parse=gd;yt.serialize=vd;var dd=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,fd=/^[\u0021-\u003A\u003C-\u007E]*$/,pd=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,md=/^[\u0020-\u003A\u003D-\u007E]*$/,hd=Object.prototype.toString,yd=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function gd(e,t){let r=new yd,o=e.length;if(o<2)return r;let a=t?.decode||bd,n=0;do{let s=e.indexOf("=",n);if(s===-1)break;let i=e.indexOf(";",n),l=i===-1?o:i;if(s>l){n=e.lastIndexOf(";",s-1)+1;continue}let u=yn(e,n,s),c=gn(e,s,u),d=e.slice(u,c);if(r[d]===void 0){let h=yn(e,s+1,l),f=gn(e,l,h),g=a(e.slice(h,f));r[d]=g}n=l+1}while(n<o);return r}function yn(e,t,r){do{let o=e.charCodeAt(t);if(o!==32&&o!==9)return t}while(++t<r);return r}function gn(e,t,r){for(;t>r;){let o=e.charCodeAt(--t);if(o!==32&&o!==9)return t+1}return r}function vd(e,t,r){let o=r?.encode||encodeURIComponent;if(!dd.test(e))throw new TypeError(`argument name is invalid: ${e}`);let a=o(t);if(!fd.test(a))throw new TypeError(`argument val is invalid: ${t}`);let n=e+"="+a;if(!r)return n;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);n+="; Max-Age="+r.maxAge}if(r.domain){if(!pd.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);n+="; Domain="+r.domain}if(r.path){if(!md.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);n+="; Path="+r.path}if(r.expires){if(!Fd(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);n+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.partitioned&&(n+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":n+="; Priority=Low";break;case"medium":n+="; Priority=Medium";break;case"high":n+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"none":n+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return n}function bd(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function Fd(e){return hd.call(e)==="[object Date]"}});var br=A(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.getRequestCookies=void 0;var bn=O(),wd=vn(),Ad=e=>Object.fromEntries(Object.entries((0,wd.parse)(e.headers.get("cookie")??"")).filter(t=>(0,bn.isDefined)(t[0])&&(0,bn.isDefined)(t[1])));gt.getRequestCookies=Ad});var Fr=A(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.STRING_TEMPLATE=void 0;var Ed=(e,t)=>`{{ ${xd[e]}.${t} }}`;vt.STRING_TEMPLATE=Ed;var xd={cookies:"cookies"}});var Fn=A(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.skipToddleHeader=Se.skipCookieHeader=void 0;var Od=te(),jd=e=>{let t=new Headers(e);return t.delete("cookie"),t};Se.skipCookieHeader=jd;var Cd=e=>{let t=new Headers(e);return t.delete(Od.PROXY_URL_HEADER),t};Se.skipToddleHeader=Cd});var An=A(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.mapTemplateHeaders=re.sanitizeProxyHeaders=re.applyTemplateValues=void 0;var Sd=Fr(),kd=O(),wn=Fn(),_d=(e,t)=>{if(!(0,kd.isDefined)(e))return"";let r=/{{ cookies\.(.+?) }}/gm,o=e,a=new Set,n;for(;(n=r.exec(e))!==null;)n.index===r.lastIndex&&r.lastIndex++,a.add(n[1]);for(let s of a){let i=t[s];i&&(o=o.replaceAll((0,Sd.STRING_TEMPLATE)("cookies",s),i))}return o};re.applyTemplateValues=_d;var Rd=({cookies:e,headers:t})=>new Headers((0,re.mapTemplateHeaders)({cookies:e,headers:(0,wn.skipCookieHeader)((0,wn.skipToddleHeader)(t))}));re.sanitizeProxyHeaders=Rd;var Td=({cookies:e,headers:t})=>new Headers([...t.entries()].map(([r,o])=>[r,(0,re.applyTemplateValues)(o,e)]));re.mapTemplateHeaders=Td});var wr=A(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.isPageComponent=void 0;var Dd=O(),Hd=e=>(0,Dd.isDefined)(e.route);Ft.isPageComponent=Hd});var At=A(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.ToddleComponent=void 0;var jn=Me(),Pd=pr(),Id=vr(),R=pt(),Cn=O(),ke=hr(),$d=wr(),Ar=class e{component;globalFormulas;getComponent;packageName;constructor({component:t,getComponent:r,packageName:o,globalFormulas:a}){this.component=t,this.getComponent=r,this.packageName=o,this.globalFormulas=a}get uniqueSubComponents(){let t=new Map,r=o=>a=>{if(a.type!=="component"||t.has(a.name))return;let n=this.getComponent(a.name,a.package??o);n&&(t.set(n.name,new e({component:n,getComponent:this.getComponent,packageName:a.package??o,globalFormulas:this.globalFormulas})),Object.values(n.nodes).forEach(r(a.package??o)))};return Object.values(this.nodes).forEach(r()),[...t.values()]}get formulaReferences(){return new Set(Array.from(this.formulasInComponent()).filter(([,t])=>t.type==="function").map(([,t])=>t).map(t=>[t.package,t.name].filter(Cn.isDefined).join("/")))}get actionReferences(){return new Set(Array.from(this.actionModelsInComponent()).map(([,t])=>t.type==="Custom"||t.type===void 0?[t.package,t.name].filter(Cn.isDefined).join("/"):t.type))}*formulasInComponent(){let t=this.globalFormulas;function*r(o,a=[]){switch(o.type){case"text":yield*(0,R.getFormulasInFormula)({formula:o.condition,globalFormulas:t,path:[...a,"condition"]}),yield*(0,R.getFormulasInFormula)({formula:o.repeat,globalFormulas:t,path:[...a,"repeat"]}),yield*(0,R.getFormulasInFormula)({formula:o.repeatKey,globalFormulas:t,path:[...a,"repeatKey"]}),yield*(0,R.getFormulasInFormula)({formula:o.value,globalFormulas:t,path:[...a,"value"]});break;case"slot":yield*(0,R.getFormulasInFormula)({formula:o.condition,globalFormulas:t,path:[...a,"condition"]});break;case"component":yield*(0,R.getFormulasInFormula)({formula:o.condition,globalFormulas:t,path:[...a,"condition"]}),yield*(0,R.getFormulasInFormula)({formula:o.repeat,globalFormulas:t,path:[...a,"repeat"]}),yield*(0,R.getFormulasInFormula)({formula:o.repeatKey,globalFormulas:t,path:[...a,"repeatKey"]});for(let[n,s]of Object.entries(o.attrs??{}))yield*(0,R.getFormulasInFormula)({formula:s,globalFormulas:t,path:[...a,"attrs",n]});for(let[n,s]of Object.entries(o.events??{}))for(let[i,l]of Object.entries(s?.actions??{}))yield*(0,R.getFormulasInAction)({action:l,globalFormulas:t,path:[...a,"events",n,"actions",i]});break;case"element":yield*(0,R.getFormulasInFormula)({formula:o.condition,globalFormulas:t,path:[...a,"condition"]}),yield*(0,R.getFormulasInFormula)({formula:o.repeat,globalFormulas:t,path:[...a,"repeat"]}),yield*(0,R.getFormulasInFormula)({formula:o.repeatKey,globalFormulas:t,path:[...a,"repeatKey"]});for(let[n,s]of Object.entries(o.attrs??{}))yield*(0,R.getFormulasInFormula)({formula:s,globalFormulas:t,path:[...a,"attrs",n]});for(let[n,s]of Object.entries(o.events??{}))for(let[i,l]of Object.entries(s?.actions??{}))yield*(0,R.getFormulasInAction)({action:l,globalFormulas:t,path:[...a,"events",n,"actions",i]});for(let[n,s]of Object.entries(o.classes??{}))yield*(0,R.getFormulasInFormula)({formula:s.formula,globalFormulas:t,path:[...a,"classes",n,"formula"]});for(let[n,s]of Object.entries(o["style-variables"]??{}))yield*(0,R.getFormulasInFormula)({formula:s.formula,globalFormulas:t,path:[...a,"style-variables",n,"formula"]});break}}yield*(0,R.getFormulasInFormula)({formula:this.route?.info?.language?.formula,globalFormulas:t,path:["route","info","language","formula"]}),yield*(0,R.getFormulasInFormula)({formula:this.route?.info?.title?.formula,globalFormulas:t,path:["route","info","title","formula"]}),yield*(0,R.getFormulasInFormula)({formula:this.route?.info?.description?.formula,globalFormulas:t,path:["route","info","description","formula"]}),yield*(0,R.getFormulasInFormula)({formula:this.route?.info?.icon?.formula,globalFormulas:t,path:["route","info","icon","formula"]}),yield*(0,R.getFormulasInFormula)({formula:this.route?.info?.charset?.formula,globalFormulas:t,path:["route","info","charset","formula"]});for(let[o,a]of Object.entries(this.route?.info?.meta??{})){yield*(0,R.getFormulasInFormula)({formula:a.content,globalFormulas:t,path:["route","info","meta",o,"content"]});for(let[n,s]of Object.entries(a.attrs))yield*(0,R.getFormulasInFormula)({formula:s,globalFormulas:t,path:["route","info","meta",o,"attrs",n]})}for(let[o,a]of Object.entries(this.formulas??{}))yield*(0,R.getFormulasInFormula)({formula:a.formula,globalFormulas:t,path:["formulas",o,"formula"]});for(let[o,a]of Object.entries(this.variables??{}))yield*(0,R.getFormulasInFormula)({formula:a.initialValue,globalFormulas:t,path:["variables",o,"initialValue"]});for(let[o,a]of Object.entries(this.workflows??{}))for(let[n,s]of a.actions.entries())yield*(0,R.getFormulasInAction)({action:s,globalFormulas:t,path:["workflows",o,"actions",n]});for(let[,o]of Object.entries(this.apis))yield*o.formulasInApi();for(let[o,a]of Object.entries(this.component.onLoad?.actions??{}))yield*(0,R.getFormulasInAction)({action:a,globalFormulas:t,path:["onLoad","actions",o]});for(let[o,a]of Object.entries(this.component.onAttributeChange?.actions??{}))yield*(0,R.getFormulasInAction)({action:a,globalFormulas:t,path:["onAttributeChange","actions",o]});for(let[o,a]of Object.entries(this.nodes??{}))yield*r(a,["nodes",o])}*actionModelsInComponent(){function*t(r,o=[]){switch(r.type){case"text":case"slot":break;case"component":case"element":for(let[a,n]of Object.entries(r.events??{}))for(let[s,i]of Object.entries(n?.actions??{}))yield*(0,ke.getActionsInAction)(i,[...o,"events",a,"actions",s]);break}}for(let[r,o]of Object.entries(this.workflows??{}))for(let[a,n]of Object.entries(o?.actions??{}))yield*(0,ke.getActionsInAction)(n,["workflows",r,"actions",a]);for(let[r,o]of Object.entries(this.apis??{})){if(!(0,jn.isLegacyApi)(o)){yield*o.actionModelsInApi();continue}for(let[a,n]of Object.entries(o.onCompleted?.actions??{}))yield*(0,ke.getActionsInAction)(n,["apis",r,"onCompleted","actions",a]);for(let[a,n]of Object.entries(o.onFailed?.actions??{}))yield*(0,ke.getActionsInAction)(n,["apis",r,"onFailed","actions",a])}for(let[r,o]of Object.entries(this.component.onLoad?.actions??{}))yield*(0,ke.getActionsInAction)(o,["onLoad","actions",r]);for(let[r,o]of Object.entries(this.component.onAttributeChange?.actions??{}))yield*(0,ke.getActionsInAction)(o,["onAttributeChange","actions",r]);for(let[r,o]of Object.entries(this.nodes??{}))yield*t(o,["nodes",r])}get formulas(){return this.component.formulas}get name(){return this.component.name}get route(){return this.component.route}get attributes(){return this.component.attributes}get variables(){return this.component.variables}get workflows(){return this.component.workflows}get apis(){return Object.fromEntries(Object.entries(this.component.apis??{}).map(([t,r])=>[t,(0,jn.isLegacyApi)(r)?new Pd.LegacyToddleApi(r,t,this.globalFormulas):new Id.ToddleApiV2(r,t,this.globalFormulas)]))}get nodes(){return this.component.nodes}get events(){return this.component.events}get onLoad(){return this.component.onLoad}get onAttributeChange(){return this.component.onAttributeChange}get isPage(){return(0,$d.isPageComponent)(this.component)}};wt.ToddleComponent=Ar});var xr=A(_e=>{function Tn(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Nd(e,t,r){}function Ld(e,t,r){}var qd=/javascript\s*\:/img;function Md(e,t){return qd.test(t)?"":t}_e.whiteList=Tn();_e.getDefaultWhiteList=Tn;_e.onAttr=Nd;_e.onIgnoreAttr=Ld;_e.safeAttrValue=Md});var Or=A((hv,Dn)=>{Dn.exports={indexOf:function(e,t){var r,o;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var o,a;if(Array.prototype.forEach)return e.forEach(t,r);for(o=0,a=e.length;o<a;o++)t.call(r,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}});var Pn=A((yv,Hn)=>{var Ke=Or();function Bd(e,t){e=Ke.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,o=!1,a=0,n=0,s="";function i(){if(!o){var c=Ke.trim(e.slice(a,n)),d=c.indexOf(":");if(d!==-1){var h=Ke.trim(c.slice(0,d)),f=Ke.trim(c.slice(d+1));if(h){var g=t(a,s.length,h,f,c);g&&(s+=g+"; ")}}}a=n+1}for(;n<r;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var u=e.indexOf("*/",n+2);if(u===-1)break;n=u+1,a=n+1,o=!1}else l==="("?o=!0:l===")"?o=!1:l===";"?o||i():l===`
`&&i()}return Ke.trim(s)}Hn.exports=Bd});var Ln=A((vv,Nn)=>{var Et=xr(),Ud=Pn(),gv=Or();function In(e){return e==null}function Vd(e){var t={};for(var r in e)t[r]=e[r];return t}function $n(e){e=Vd(e||{}),e.whiteList=e.whiteList||Et.whiteList,e.onAttr=e.onAttr||Et.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Et.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Et.safeAttrValue,this.options=e}$n.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,o=r.whiteList,a=r.onAttr,n=r.onIgnoreAttr,s=r.safeAttrValue,i=Ud(e,function(l,u,c,d,h){var f=o[c],g=!1;if(f===!0?g=f:typeof f=="function"?g=f(d):f instanceof RegExp&&(g=f.test(d)),g!==!0&&(g=!1),d=s(c,d),!!d){var v={position:u,sourcePosition:l,source:h,isWhite:g};if(g){var y=a(c,d,v);return In(y)?c+":"+d:y}else{var y=n(c,d,v);if(!In(y))return y}}});return i};Nn.exports=$n});var Ot=A((xt,Cr)=>{var qn=xr(),Mn=Ln();function Kd(e,t){var r=new Mn(t);return r.process(e)}xt=Cr.exports=Kd;xt.FilterCSS=Mn;for(jr in qn)xt[jr]=qn[jr];var jr;typeof window<"u"&&(window.filterCSS=Cr.exports)});var jt=A((bv,Bn)=>{Bn.exports={indexOf:function(e,t){var r,o;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var o,a;if(Array.prototype.forEach)return e.forEach(t,r);for(o=0,a=e.length;o<a;o++)t.call(r,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}}});var Sr=A(D=>{var zd=Ot().FilterCSS,Wd=Ot().getDefaultWhiteList,St=jt();function Kn(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var zn=new zd;function Gd(e,t,r){}function Jd(e,t,r){}function Xd(e,t,r){}function Qd(e,t,r){}function Wn(e){return e.replace(Zd,"&lt;").replace(ef,"&gt;")}function Yd(e,t,r,o){if(r=Zn(r),t==="href"||t==="src"){if(r=St.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Ct.lastIndex=0,Ct.test(r))return""}else if(t==="style"){if(Un.lastIndex=0,Un.test(r)||(Vn.lastIndex=0,Vn.test(r)&&(Ct.lastIndex=0,Ct.test(r))))return"";o!==!1&&(o=o||zn,r=o.process(r))}return r=es(r),r}var Zd=/</g,ef=/>/g,tf=/"/g,rf=/&quot;/g,of=/&#([a-zA-Z0-9]*);?/gim,af=/&colon;?/gim,nf=/&newline;?/gim,Ct=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Un=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Vn=/u\s*r\s*l\s*\(.*/gi;function Gn(e){return e.replace(tf,"&quot;")}function Jn(e){return e.replace(rf,'"')}function Xn(e){return e.replace(of,function(r,o){return o[0]==="x"||o[0]==="X"?String.fromCharCode(parseInt(o.substr(1),16)):String.fromCharCode(parseInt(o,10))})}function Qn(e){return e.replace(af,":").replace(nf," ")}function Yn(e){for(var t="",r=0,o=e.length;r<o;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return St.trim(t)}function Zn(e){return e=Jn(e),e=Xn(e),e=Qn(e),e=Yn(e),e}function es(e){return e=Gn(e),e=Wn(e),e}function sf(){return""}function lf(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function o(s){return r?!0:St.indexOf(e,s)!==-1}var a=[],n=!1;return{onIgnoreTag:function(s,i,l){if(o(s))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return a.push([n!==!1?n:l.position,c]),n=!1,u}else return n||(n=l.position),"[removed]";else return t(s,i,l)},remove:function(s){var i="",l=0;return St.forEach(a,function(u){i+=s.slice(l,u[0]),l=u[1]}),i+=s.slice(l),i}}}function uf(e){for(var t="",r=0;r<e.length;){var o=e.indexOf("<!--",r);if(o===-1){t+=e.slice(r);break}t+=e.slice(r,o);var a=e.indexOf("-->",o);if(a===-1)break;r=a+3}return t}function cf(e){var t=e.split("");return t=t.filter(function(r){var o=r.charCodeAt(0);return o===127?!1:o<=31?o===10||o===13:!0}),t.join("")}D.whiteList=Kn();D.getDefaultWhiteList=Kn;D.onTag=Gd;D.onIgnoreTag=Jd;D.onTagAttr=Xd;D.onIgnoreTagAttr=Qd;D.safeAttrValue=Yd;D.escapeHtml=Wn;D.escapeQuote=Gn;D.unescapeQuote=Jn;D.escapeHtmlEntities=Xn;D.escapeDangerHtml5Entities=Qn;D.clearNonPrintableCharacter=Yn;D.friendlyAttrValue=Zn;D.escapeAttrValue=es;D.onIgnoreTagStripAll=sf;D.StripTagBody=lf;D.stripCommentTag=uf;D.stripBlankChar=cf;D.attributeWrapSign='"';D.cssFilter=zn;D.getDefaultCSSWhiteList=Wd});var _r=A(kr=>{var pe=jt();function df(e){var t=pe.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=pe.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function ff(e){return e.slice(0,2)==="</"}function pf(e,t,r){"use strict";var o="",a=0,n=!1,s=!1,i=0,l=e.length,u="",c="";e:for(i=0;i<l;i++){var d=e.charAt(i);if(n===!1){if(d==="<"){n=i;continue}}else if(s===!1){if(d==="<"){o+=r(e.slice(a,i)),n=i,a=i;continue}if(d===">"||i===l-1){o+=r(e.slice(a,n)),c=e.slice(n,i+1),u=df(c),o+=t(n,o.length,u,c,ff(c)),a=i+1,n=!1;continue}if(d==='"'||d==="'")for(var h=1,f=e.charAt(i-h);f.trim()===""||f==="=";){if(f==="="){s=d;continue e}f=e.charAt(i-++h)}}else if(d===s){s=!1;continue}}return a<l&&(o+=r(e.substr(a))),o}var mf=/[^a-zA-Z0-9\\_:.-]/gim;function hf(e,t){"use strict";var r=0,o=0,a=[],n=!1,s=e.length;function i(h,f){if(h=pe.trim(h),h=h.replace(mf,"").toLowerCase(),!(h.length<1)){var g=t(h,f||"");g&&a.push(g)}}for(var l=0;l<s;l++){var u=e.charAt(l),c,d;if(n===!1&&u==="="){n=e.slice(r,l),r=l+1,o=e.charAt(r)==='"'||e.charAt(r)==="'"?r:gf(e,l+1);continue}if(n!==!1&&l===o){if(d=e.indexOf(u,l+1),d===-1)break;c=pe.trim(e.slice(o+1,d)),i(n,c),n=!1,l=d,r=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(d=yf(e,l),d===-1){c=pe.trim(e.slice(r,l)),i(c),n=!1,r=l+1;continue}else{l=d-1;continue}else if(d=vf(e,l-1),d===-1){c=pe.trim(e.slice(r,l)),c=ts(c),i(n,c),n=!1,r=l+1;continue}else continue}return r<e.length&&(n===!1?i(e.slice(r)):i(n,ts(pe.trim(e.slice(r))))),pe.trim(a.join(" "))}function yf(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function gf(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function vf(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function bf(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function ts(e){return bf(e)?e.substr(1,e.length-2):e}kr.parseTag=pf;kr.parseAttr=hf});var ns=A((Av,as)=>{var Ff=Ot().FilterCSS,J=Sr(),rs=_r(),wf=rs.parseTag,Af=rs.parseAttr,_t=jt();function kt(e){return e==null}function Ef(e){var t=_t.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=_t.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=_t.trim(e.slice(0,-1))),{html:e,closing:r}}function xf(e){var t={};for(var r in e)t[r]=e[r];return t}function Of(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(o){return o.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function os(e){e=xf(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=J.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Of(e.whiteList||e.allowList):e.whiteList=J.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":J.attributeWrapSign,e.onTag=e.onTag||J.onTag,e.onTagAttr=e.onTagAttr||J.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||J.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||J.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||J.safeAttrValue,e.escapeHtml=e.escapeHtml||J.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ff(e.css))}os.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,o=r.whiteList,a=r.onTag,n=r.onIgnoreTag,s=r.onTagAttr,i=r.onIgnoreTagAttr,l=r.safeAttrValue,u=r.escapeHtml,c=t.attributeWrapSign,d=t.cssFilter;r.stripBlankChar&&(e=J.stripBlankChar(e)),r.allowCommentTag||(e=J.stripCommentTag(e));var h=!1;r.stripIgnoreTagBody&&(h=J.StripTagBody(r.stripIgnoreTagBody,n),n=h.onIgnoreTag);var f=wf(e,function(g,v,y,w,x){var E={sourcePosition:g,position:v,isClosing:x,isWhite:Object.prototype.hasOwnProperty.call(o,y)},F=a(y,w,E);if(!kt(F))return F;if(E.isWhite){if(E.isClosing)return"</"+y+">";var S=Ef(w),P=o[y],k=Af(S.html,function(T,_){var oe=_t.indexOf(P,T)!==-1,$=s(y,T,_,oe);return kt($)?oe?(_=l(y,T,_,d),_?T+"="+c+_+c:T):($=i(y,T,_,oe),kt($)?void 0:$):$});return w="<"+y,k&&(w+=" "+k),S.closing&&(w+=" /"),w+=">",w}else return F=n(y,w,E),kt(F)?u(w):F},u);return h&&(f=h.remove(f)),f};as.exports=os});var Tt=A((Re,Rt)=>{var ss=Sr(),is=_r(),ls=ns();function us(e,t){var r=new ls(t);return r.process(e)}Re=Rt.exports=us;Re.filterXSS=us;Re.FilterXSS=ls;(function(){for(var e in ss)Re[e]=ss[e];for(var t in is)Re[t]=is[t]})();typeof window<"u"&&(window.filterXSS=Rt.exports);function jf(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}jf()&&(self.filterXSS=Rt.exports)});var fs=A(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.safeCustomElementName=void 0;var Sf=e=>{let t=e.toLocaleLowerCase().replaceAll(" ","");return t.includes("-")?t:`toddle-${t}`};Ht.safeCustomElementName=Sf});var Dr=A(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.takeIncludedComponents=kf;var ps=O();function kf({root:e,projectComponents:t,packages:r={},includeRoot:o=!0}){let a={...t,...Object.fromEntries(Object.values(r).flatMap(s=>Object.values(s.components).map(i=>[`${s.manifest.name}/${i.name}`,i])))},n=[];return o&&n.push(e),n.push(..._f(e,a)),n}function _f(e,t){let r=new Map,o=(a,n)=>{if(a.type!=="component")return;let s=[a.package??n,a.name].filter(ps.isDefined).join("/");if(r.has(s))return;let i=t[s];(0,ps.isDefined)(i)&&(Object.hasOwn(t,s)&&r.set(s,{...i,name:s}),Object.values(i.nodes).forEach(l=>o(l,(l.type==="component"?l.package:void 0)??n)))};return Object.values(e.nodes).forEach(a=>o(a,a.type==="component"?a.package:void 0)),Array.from(r.values())}});var ms=A(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.removeTestData=Rf;var ze=Y();function Rf(e){return{...e,attributes:(0,ze.mapObject)(e.attributes,([t,r])=>[t,(0,ze.omit)(r,["testValue"])]),...e.route?{route:{...e.route,path:e.route.path.map(t=>(0,ze.omit)(t,["testValue"])),query:(0,ze.mapObject)(e.route.query,([t,r])=>[t,(0,ze.omit)(r,["testValue"])])}}:{}}}});var hs=A(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.replaceTagInNodes=void 0;var Tf=(e,t)=>r=>({...r,nodes:Object.entries(r.nodes).reduce((o,[a,n])=>n.type!=="element"?{...o,[a]:n}:{...o,[a]:{...n,tag:n.tag===e?t:n.tag}},{})});Pt.replaceTagInNodes=Tf});var $t=A(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.theme=Te.RESET_STYLES=void 0;Te.RESET_STYLES=`
@layer reset {
  html {
    height:100%;
  }

  #App {
    height:100%;
    display:flex;
    flex-direction:column;
  }

  body {
    height:100%;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    margin:0;
  }

  [data-node-id]:not([data-unset-toddle-styles],[data-node-type="text"],noscript,br,script,style,link,template,meta,title,base), [data-node-id]:not([data-unset-toddle-styles],noscript)::before, [data-node-id]:not([data-unset-toddle-styles],noscript)::after {
    display: flex;
    flex-direction: column;
    flex-grow: 0;
    flex-shrink: 0;

    position: relative;
    box-sizing: border-box;
    padding: 0;
    margin: 0;

    font-size: var(--text-base);
    font-family: var(--font-sans);
    font-weight: var(--font-weight-normal);

    background: transparent;
    color: inherit;
    border: none;
    box-shadow: none;
  }

  [data-node-id]:not([data-unset-toddle-styles]):is(p, h1, h2, h3, h4, h5, h6, label, span, strong, b, i, address, caption, code, cite, dt, dd, em, figcaption, legend, blockquote, abbr, pre, bdo, bdi) {
    display: inline-block;
    overflow-wrap: break-word;
    color: inherit;
  }

  [data-node-id]:not([data-unset-toddle-styles]):is(input, button, textarea, select) {
    outline: none;
  }

  [data-node-id]:not([data-unset-toddle-styles]):is(a) {
    color: inherit;
    text-decoration: none;
  }

  [data-node-id]:not([data-unset-toddle-styles]):is(ul, ol, li) {
    list-style: none;
  }

  [data-node-id]:not([data-unset-toddle-styles]):is(span[data-node-type="text"]) {
    font: inherit;
    display: inline;
    flex-direction: column;
    flex-grow: 0;
    flex-shrink: 0;
    box-sizing: border-box;
  }

  [popover]:not(:popover-open):not(dialog[open]) {
    display: revert;
  }
}`;Te.theme={colors:{grey:{order:0,variants:{50:{order:0,value:"#FAFAFA"},100:{order:1,value:"#F5F5F5"},200:{order:2,value:"#E5E5E5"},300:{order:3,value:"#D4D4D4"},400:{order:4,value:"#A3A3A3"},500:{order:5,value:"#737373"},600:{order:6,value:"#525252"},700:{order:7,value:"#404040"},800:{order:8,value:"#262626"},900:{order:9,value:"#171717"}}},red:{order:1,variants:{50:{order:0,value:"#FEF2F2"},100:{order:1,value:"#FEE2E2"},200:{order:2,value:"#FECACA"},300:{order:3,value:"#FCA5A5"},400:{order:4,value:"#F87171"},500:{order:5,value:"#EF4444"},600:{order:6,value:"#DC2626"},700:{order:7,value:"#B91C1C"},800:{order:8,value:"#991B1B"},900:{order:9,value:"#7F1D1D"}}},rose:{order:3,variants:{50:{order:0,value:"#FFF1F2"},100:{order:1,value:"#FFE4E6"},200:{order:2,value:"#FECDD3"},300:{order:3,value:"#FDA4AF"},400:{order:4,value:"#FB7185"},500:{order:5,value:"#F43F5E"},600:{order:6,value:"#E11D48"},700:{order:7,value:"#BE123C"},800:{order:8,value:"#9F1239"},900:{order:9,value:"#881337"}}},pink:{order:4,variants:{50:{order:0,value:"#FDF2F8"},100:{order:1,value:"#FCE7F3"},200:{order:2,value:"#FBCFE8"},300:{order:3,value:"#F9A8D4"},400:{order:4,value:"#F472B6"},500:{order:5,value:"#EC4899"},600:{order:6,value:"#DB2777"},700:{order:7,value:"#BE185D"},800:{order:8,value:"#9D174D"},900:{order:9,value:"#831843"}}},amber:{order:5,variants:{50:{order:0,value:"#FFFBEB"},100:{order:1,value:"#FEF3C7"},200:{order:2,value:"#FDE68A"},300:{order:3,value:"#FCD34D"},400:{order:4,value:"#FBBF24"},500:{order:5,value:"#F59E0B"},600:{order:6,value:"#D97706"},700:{order:7,value:"#B45309"},800:{order:8,value:"#92400E"},900:{order:9,value:"#78350F"}}},orange:{order:6,variants:{50:{order:0,value:"#FFF7ED"},100:{order:1,value:"#FFEDD5"},200:{order:2,value:"#FED7AA"},300:{order:3,value:"#FDBA74"},400:{order:4,value:"#FB923C"},500:{order:5,value:"#F97316"},600:{order:6,value:"#EA580C"},700:{order:7,value:"#C2410C"},800:{order:8,value:"#9A3412"},900:{order:9,value:"#7C2D12"}}},yellow:{order:7,variants:{50:{order:0,value:"#FFFBEB"},100:{order:1,value:"#FEF3C7"},200:{order:2,value:"#FDE68A"},300:{order:3,value:"#FCD34D"},400:{order:4,value:"#FBBF24"},500:{order:5,value:"#F59E0B"},600:{order:6,value:"#D97706"},700:{order:7,value:"#B45309"},800:{order:8,value:"#92400E"},900:{order:9,value:"#78350F"}}},lime:{order:8,variants:{50:{order:0,value:"#F7FEE7"},100:{order:1,value:"#ECFCCB"},200:{order:2,value:"#D9F99D"},300:{order:3,value:"#BEF264"},400:{order:4,value:"#A3E635"},500:{order:5,value:"#84CC16"},600:{order:6,value:"#65A30D"},700:{order:7,value:"#4D7C0F"},800:{order:8,value:"#3F6212"},900:{order:9,value:"#365314"}}},green:{order:9,variants:{50:{order:0,value:"#ECFDF5"},100:{order:1,value:"#D1FAE5"},200:{order:2,value:"#A7F3D0"},300:{order:3,value:"#6EE7B7"},400:{order:4,value:"#34D399"},500:{order:5,value:"#10B981"},600:{order:6,value:"#059669"},700:{order:7,value:"#047857"},800:{order:8,value:"#065F46"},900:{order:9,value:"#064E3B"}}},emerald:{order:10,variants:{50:{order:0,value:"#ECFDF5"},100:{order:1,value:"#D1FAE5"},200:{order:2,value:"#A7F3D0"},300:{order:3,value:"#6EE7B7"},400:{order:4,value:"#34D399"},500:{order:5,value:"#10B981"},600:{order:6,value:"#059669"},700:{order:7,value:"#047857"},800:{order:8,value:"#065F46"},900:{order:9,value:"#064E3B"}}},teal:{order:11,variants:{50:{order:0,value:"#F0FDFA"},100:{order:1,value:"#CCFBF1"},200:{order:2,value:"#99F6E4"},300:{order:3,value:"#5EEAD4"},400:{order:4,value:"#2DD4BF"},500:{order:5,value:"#14B8A6"},600:{order:6,value:"#0D9488"},700:{order:7,value:"#0F766E"},800:{order:8,value:"#115E59"},900:{order:9,value:"#134E4A"}}},cyan:{order:12,variants:{50:{order:0,value:"#ECFEFF"},100:{order:1,value:"#CFFAFE"},200:{order:2,value:"#A5F3FC"},300:{order:3,value:"#67E8F9"},400:{order:4,value:"#22D3EE"},500:{order:5,value:"#06B6D4"},600:{order:6,value:"#0891B2"},700:{order:7,value:"#0E7490"},800:{order:8,value:"#155E75"},900:{order:9,value:"#164E63"}}},sky:{order:13,variants:{50:{order:0,value:"#F0F9FF"},100:{order:1,value:"#E0F2FE"},200:{order:2,value:"#BAE6FD"},300:{order:3,value:"#7DD3FC"},400:{order:4,value:"#38BDF8"},500:{order:5,value:"#0EA5E9"},600:{order:6,value:"#0284C7"},700:{order:7,value:"#0369A1"},800:{order:8,value:"#075985"},900:{order:9,value:"#0C4A6E"}}},blue:{order:14,variants:{50:{order:0,value:"#EFF6FF"},100:{order:1,value:"#DBEAFE"},200:{order:2,value:"#BFDBFE"},300:{order:3,value:"#93C5FD"},400:{order:4,value:"#60A5FA"},500:{order:5,value:"#3B82F6"},600:{order:6,value:"#2563EB"},700:{order:7,value:"#1D4ED8"},800:{order:8,value:"#1E40AF"},900:{order:9,value:"#1E3A8A"}}},indigo:{order:15,variants:{50:{order:0,value:"#EEF2FF"},100:{order:1,value:"#E0E7FF"},200:{order:2,value:"#C7D2FE"},300:{order:3,value:"#A5B4FC"},400:{order:4,value:"#818CF8"},500:{order:5,value:"#6366F1"},600:{order:6,value:"#4F46E5"},700:{order:7,value:"#4338CA"},800:{order:8,value:"#3730A3"},900:{order:9,value:"#312E81"}}},purple:{order:16,variants:{50:{order:0,value:"#F5F3FF"},100:{order:1,value:"#EDE9FE"},200:{order:2,value:"#DDD6FE"},300:{order:3,value:"#C4B5FD"},400:{order:4,value:"#A78BFA"},500:{order:5,value:"#8B5CF6"},600:{order:6,value:"#7C3AED"},700:{order:7,value:"#6D28D9"},800:{order:8,value:"#5B21B6"},900:{order:9,value:"#4C1D95"}}},fuchsia:{order:17,variants:{50:{order:0,value:"#FDF4FF"},100:{order:1,value:"#FAE8FF"},200:{order:2,value:"#F5D0FE"},300:{order:3,value:"#F0ABFC"},400:{order:4,value:"#E879F9"},500:{order:5,value:"#D946EF"},600:{order:6,value:"#C026D3"},700:{order:7,value:"#A21CAF"},800:{order:8,value:"#86198F"},900:{order:9,value:"#701A75"}}}},shadow:{sm:{order:0,value:"0 1px 2px 0 rgba(0, 0, 0, 0.25)"},base:{order:1,value:"0 1px 3px 0 rgba(0, 0, 0, 0.25), 0 1px 2px 0 rgba(0, 0, 0, 0.25)"},md:{order:2,value:"0 4px 6px -1px rgba(0, 0, 0, 0.25), 0 2px 4px -1px rgba(0, 0, 0, 0.25)"},lg:{order:3,value:"0 10px 15px -3px rgba(0, 0, 0, 0.25), 0 4px 6px -2px rgba(0, 0, 0, 0.25)"},xl:{order:4,value:"0 20px 25px -5px rgba(0, 0, 0, 0.25), 0 10px 10px -5px rgba(0, 0, 0, 0.25)"},"2xl":{order:5,value:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"}},spacing:.25,fontSize:{lg:{order:0,value:"1.125rem"},sm:{order:1,value:"0.875rem"},xl:{order:2,value:"1.25rem"},xs:{order:3,value:"0.75rem"},"2xl":{order:4,value:"1.5rem"},"3xl":{order:5,value:"1.875rem"},"4xl":{order:6,value:"2.25rem"},"5xl":{order:7,value:"3rem"},xxs:{order:8,value:"0.625rem"},base:{order:9,value:"1rem",default:!0}},fontFamily:{mono:{order:0,value:["Fira Code","monospace"]},sans:{order:1,value:["Inter","sans-serif"],default:!0}},fontWeight:{bold:{order:0,value:"700"},bolder:{order:1,value:"800"},normal:{order:2,value:"500",default:!0},regular:{order:3,value:"400"},"semi-bold":{order:4,value:"600"}},breakpoints:{large:{order:2,value:1440},small:{order:0,value:576},medium:{order:1,value:960}}}});var Lr=A(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.toValidClassName=De.getClassName=void 0;var Pf=5381,If=(e,t)=>{let r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return e},$f=e=>If(Pf,e),Nf=/(a)(d)/gi,Nt=52,Gs=e=>String.fromCharCode(e+(e>25?39:97));function Lf(e){let t="",r;for(r=Math.abs(e);r>Nt;r=r/Nt|0)t=Gs(r%Nt)+t;return(Gs(r%Nt)+t).replace(Nf,"$1-$2")}var qf=e=>Lf($f(JSON.stringify(e)));De.getClassName=qf;var Mf=(e,t=!1)=>{let r=e.trim().replace(/\s+/g,"-");return t&&(r=r.replace(/[^a-zA-Z0-9-_]/g,o=>`\\${o}`)),/^[^a-zA-Z]/.test(r)&&(r=`_${r}`),r};De.toValidClassName=Mf});var Xs=A(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.getOldThemeCss=Fe.getThemeCss=void 0;var Js=$t(),Bf=(e,t)=>"breakpoints"in e?(0,Fe.getOldThemeCss)(e):`
${t.includeResetStyle?Js.RESET_STYLES:""}

@layer base {
  ${t.createFontFaces?e.fonts.map(r=>`
    ${r.variants.map(o=>`
    @font-face {
      font-family: "${r.family}";
      font-style: ${o.italic?"italic":"normal"};
      font-weight: ${o.weight};
      font-display: auto;
      src: local("${o.url.substring(o.url.lastIndexOf("/")+1)}"), url("${o.url.replace("https://fonts.gstatic.com","/.toddle/fonts/font")}") format("woff2");
    }
    `).join(`
`)}
    `).join(`
`):""}

  body, :host {
    /* Color */
      ${e.color.flatMap(r=>r.tokens.map(o=>`--${o.name}: ${o.value};`)).join(`
`)}
  /* Fonts */
    ${e.fonts.map(r=>`--font-${r.name}: '${r.family}',${r.type};`).join(`
`)}

    /* Font size */
    ${e["font-size"].flatMap(r=>r.tokens.map(o=>`--${o.name}: ${o.type==="variable"?`var(--${o.value})`:o.value};`)).join(`
`)}

    /* Font weight */
    ${e["font-weight"].flatMap(r=>r.tokens.map(o=>`--${o.name}: ${o.type==="variable"?`var(--${o.value})`:o.value};`)).join(`
`)}

    /* Shadows */
    ${e.shadow.flatMap(r=>r.tokens.map(o=>`--${o.name}: ${o.type==="variable"?`var(--${o.value})`:o.value};`)).join(`
`)}

    /* Border radius */
    ${e["border-radius"].flatMap(r=>r.tokens.map(o=>`--${o.name}: ${o.type==="variable"?`var(--${o.value})`:o.value};`)).join(`
`)}

    /* Spacing */
    ${e.spacing.map(r=>r.tokens.map(o=>`--${o.name}: ${o.type==="variable"?`var(--${o.value})`:o.value};`).join(`
`)).join(`
`)}

    /* Z-index */
    ${e["z-index"].map(r=>r.tokens.map(o=>`--${o.name}: ${o.type==="variable"?`var(--${o.value})`:o.value};`).join(`
`)).join(`
`)}
  }

  @keyframes animation-spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes animation-fade-in {
    from {
      opacity:0;
    }
    to {
      opacity:1;
    }
  }


  @keyframes animation-fade-out {
    from {
      opacity:1;
    }
    to {
      opacity:0;
    }
  }
}
`;Fe.getThemeCss=Bf;var Uf=e=>{let t=Object.entries(e.colors).flatMap(([r,{variants:o}])=>Object.entries(o).map(([a,{value:n}])=>`--${r}-${a}:${n}`));return`




body, :host {
  ${Object.entries(e.fontFamily).map(([r,{value:[o,...a]}])=>`--font-${r}: '${o}',${a.join(",")};`).join(`
`)}

  ${Object.entries(e.fontWeight).map(([r,{value:o}])=>`--font-weight-${r}: ${o};`).join(`
`)}

  ${Object.entries(e.fontSize).map(([r,{value:o}])=>`--font-size-${r}: ${o};`).join(`
`)}

  --spacing:${e.spacing}rem;
    ${t.join(`;
`)};


  --text-xxs:0.625rem;
  --line-height-xxs:0.9rem;

  --text-xs:0.75rem;
  --line-height-xs:1rem;

  --text-sm:0.875rem;
  --line-height-sm:1.25rem;

  --text-base:1rem;
  --line-height-base:1.5rem;

  --text-lg:1.125rem;
  --line-height-lg:1.75rem;

  --text-xl:1.25rem;
  --line-height-xl:1.75rem;

  --text-2xl:1.5rem;
  --line-height-2xl:2rem;

  --text-3xl:1.875rem;
  --line-height-3xl:2.25rem;

  --text-4xl:2.25rem;
  --line-height-4xl:2.5rem;

  --text-5xl:3rem;
  --line-height-5xl:3rem;

  ${Object.entries(e.shadow).map(([r,{value:o}])=>`--shadow-${r}:${o};`).join(`
`)}
}

${Js.RESET_STYLES}

@keyframes animation-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes animation-fade-in {
  from {
    opacity:0;
  }
  to {
    opacity:1;
  }
}


@keyframes animation-fade-out {
  from {
    opacity:1;
  }
  to {
    opacity:0;
  }
}`};Fe.getOldThemeCss=Uf});var Qs=A(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.variantSelector=void 0;var Vf=e=>[(e.className??e.class)&&`.${e.className}`,(e.evenChild??e["even-child"])&&":nth-child(even)",(e.firstChild??e["first-child"])&&":first-child",(e.focusWithin??e["focus-within"])&&":focus-within",(e.lastChild??e["last-child"])&&":last-child",e.active&&":active",e.autofill&&":is(:-webkit-autofill, :autofill)",e.checked&&":checked",e.disabled&&":disabled",e.empty&&":empty",e.focus&&":focus",e.hover&&":hover",e.invalid&&":invalid",e.link&&":link",e.visited&&":visited",e["first-of-type"]&&":first-of-type",e["focus-visible"]&&":focus-visible",e["last-of-type"]&&":last-of-type",e["popover-open"]&&":popover-open",e.pseudoElement&&`::${e.pseudoElement}`].filter(Boolean).join("");Lt.variantSelector=Vf});var ti=A(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.getAllFonts=me.createStylesheet=void 0;me.kebabCase=ei;var Kf=Y(),Zs=O(),Ys=Lr(),zf=Xs(),Wf=Qs(),Gf={large:1440,small:576,medium:960};function ei(e){return e.split("").map(t=>"ABCDEFGHIJKLMNOPQRSTYVWXYZ".includes(t)?"-"+t.toLocaleLowerCase():t).join("")}var Jf=new Set(["width","min-width","max-width","height","min-height","max-height","margin","margin-top","margin-left","margin-bottom","margin-right","padding","padding-top","padding-left","padding-bottom","padding-right","gap","gap-x","gap-y","border-radius","border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","border-width","border-top-width","border-left-width","border-bottom-width","border-right-width","font-size","top","right","bottom","left","outline-width"]),Xf=(e,t,r,o)=>{let a=new Set,n=(0,me.getAllFonts)(t),s=(0,zf.getThemeCss)("breakpoints"in r?{...r,fontFamily:Object.fromEntries(Object.entries(r.fontFamily).filter(([d,h])=>h.default??n.has("--font-"+d)))}:{...r,fonts:r.fonts},o),i=d=>Object.entries(d).map(([h,f])=>{if(!(0,Zs.isDefined)(f))return;let g=ei(h),v=String(Number(f))===String(f)&&Jf.has(g)?`${Number(f)*4}px`:f;return`${g}:${v};`}).filter(Boolean).join(`
  `),l=(d,h)=>{try{let f=(0,Kf.omitKeys)(d.style??{},["variants","breakpoints","shadows"]),g=d.variants??d.style?.variants,v=(y,w,x)=>{let E=Object.entries(w).filter(([S])=>S=="scrollbar-width"),F=i(w);return x?.startingStyle&&(F=`@starting-style {
            ${F}
          }`),`
  ${F.length>0?`${y} {
    ${F}
  }`:""}
      ${E.length>0?`
${y}::-webkit-scrollbar {
  ${E.map(([S,P])=>{switch(P){case"none":return"width: 0;";case"thinn":case"thin":return"width: 4px;";default:return""}}).join(`
`)}
}
`:""}
`};return`
      ${v("."+h,f)}
      ${(g??[]).map(y=>{let w=v(`.${h}${(0,Wf.variantSelector)(y)}`,y.style,{startingStyle:y.startingStyle});return y.mediaQuery?`
          @media (${Object.entries(y.mediaQuery).map(([x,E])=>`${x}: ${E}`).filter(Boolean).join(") and (")}) {
            ${w}
          }
          `:y.breakpoint?`
          @media (min-width: ${Gf[y.breakpoint]}px) {
            ${w}
          }
          `:w}).join(`
`)}
      `}catch(f){return console.error(f),""}},u=new Set;function c(d,h){if(!u.has(d.name)){if(u.add(d.name),!d.nodes){console.warn("Unable to find nodes for component",d.name);return}Object.entries(d.nodes).forEach(([f,g])=>{if(g.type==="component"){let y=t.find(w=>w.name===[g.package??h,g.name].filter(x=>x).join("/"));if(y){c(y,g.package??h),s+=`
`+l(g,(0,Ys.toValidClassName)(`${d.name}:${f}`,!0));return}}if(g.type!=="element")return;let v=(0,Ys.getClassName)([g.style,g.variants]);if(a.has(v))return"";a.add(v),s+=`
`+l(g,v)})}}return c(e),s};me.createStylesheet=Xf;var Qf=e=>new Set(e.flatMap(t=>Object.values(t.nodes).flatMap(r=>r.type==="element"?[r.style.fontFamily,r.style["font-family"],...r.variants?.map(o=>o.style.fontFamily??o.style["font-family"])??[]].filter(Zs.isDefined):[])).map(t=>t.replace("var(","").replace(")","").replace(/'/g,"")));me.getAllFonts=Qf});var qr=A(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.VOID_HTML_ELEMENTS=void 0;qt.VOID_HTML_ELEMENTS=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]});var Br=A(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.toEncodedText=se.escapeAttrValue=void 0;se.getNodeAttrs=sp;var Mr=V(),ri=O(),Yf=/"/g,Zf=/</g,ep=/>/g,tp=["string","number","boolean"],rp=e=>!(0,ri.isDefined)(e)||!tp.includes(typeof e)?"":ap(op(String(e)));se.escapeAttrValue=rp;var op=e=>e.replace(Yf,"&quot;"),ap=e=>e.replace(Zf,"&lt;").replace(ep,"&gt;"),np=e=>e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll(`
`,"<br />");se.toEncodedText=np;function sp({node:e,data:t,component:r,packageName:o,env:a,toddle:n}){let{style:s,...i}=e.attrs,l=Object.entries(i).reduce((d,[h,f])=>{let g=(0,Mr.applyFormula)(f,{data:t,component:r,package:o,env:a,toddle:n});return(0,ri.toBoolean)(g)&&d.push(`${h}="${(0,se.escapeAttrValue)(g)}"`),d},[]),u=Object.values(e["style-variables"]??{}).map(({name:d,formula:h,unit:f})=>`--${d}: ${String((0,Mr.applyFormula)(h,{data:t,component:r,package:o,env:a,toddle:n}))+(f??"")}`),c=[...s?[(0,Mr.applyFormula)(s,{data:t,component:r,package:o,env:a,toddle:n})]:[],...u].filter(Boolean).map(String).join("; ");return c.length>0?[...l,`style="${(0,se.escapeAttrValue)(c)};"`].join(" "):l.join(" ")}});var si=A(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.renderPageBody=void 0;var ip=At(),z=V(),oi=Lr(),Bt=Y(),Ge=O(),Mt=Tt(),lp=qr(),ai=Br(),ni=async({apiCache:e,children:t,component:r,data:o,env:a,evaluateComponentApis:n,files:s,toddle:i,includedComponents:l,instance:u,packageName:c,projectId:d,req:h,updateApiCache:f})=>{let g=async({id:v,node:y,data:w,packageName:x,isComponentRootNode:E=!1})=>{if(!y)return"";let F={data:w,component:r,package:x,env:a,toddle:i};if(y.repeat){let S=(0,z.applyFormula)(y.repeat,F);return Array.isArray(S)?(await Promise.all(S.map((k,T)=>g({id:v,node:{...y,repeat:void 0},data:{...w,ListItem:w.ListItem?{Index:T,Item:k,Parent:w.ListItem}:{Index:T,Item:k}},packageName:x})))).join(""):""}if(y.condition&&!(0,Ge.toBoolean)((0,z.applyFormula)(y.condition,F)))return"";switch(y.type){case"text":return`<span data-node-type="text" data-node-id="${v}">${(0,ai.toEncodedText)(String((0,z.applyFormula)(y.value,F)))}</span>`;case"slot":{let S=t?.[y.name??"default"];return S||(await Promise.all(y.children.map(k=>g({id:k,node:r.nodes[k],data:w,packageName:x})))).join("")}case"element":{if(y.tag.toLocaleLowerCase()==="script")return"";let S=(0,ai.getNodeAttrs)({node:y,data:w,component:r,packageName:x,env:a,toddle:i}),P=(0,oi.getClassName)([y.style,y.variants]),k=Object.entries(y.classes).filter(([$,{formula:ue}])=>(0,Ge.toBoolean)((0,z.applyFormula)(ue,F))).map(([$])=>$).join(" ");u&&v==="root"&&Object.entries(u).forEach(([$,ue])=>{k+=" "+(0,oi.toValidClassName)(`${$}:${ue}`)});let T="";if(["script","style"].includes(y.tag.toLocaleLowerCase())===!1&&(T=(await Promise.all(y.children.map(ue=>g({id:ue,node:r.nodes[ue],data:w,packageName:x})))).join("")),y.tag.toLocaleLowerCase()==="style"){let $=y.children[0]?r.nodes[y.children[0]]:void 0;$?.type==="text"&&(T=String((0,z.applyFormula)($.value,F)))}let _=r.version===2&&E?`${x??d}-${y.tag}`:y.tag,oe=`${P} ${k}`.trim();return lp.VOID_HTML_ELEMENTS.includes(_)?`<${_} ${S} data-node-id="${(0,Mt.escapeAttrValue)(v)}" class="${(0,Mt.escapeAttrValue)(oe)}" />`:`<${_} ${S} data-node-id="${(0,Mt.escapeAttrValue)(v)}" class="${(0,Mt.escapeAttrValue)(oe)}">${T}</${_}>`}case"component":{let S=(0,Bt.mapValues)(y.attrs,N=>(0,z.applyFormula)(N,F)),P={...w.Contexts,[r.name]:Object.fromEntries(Object.entries(r.formulas??{}).filter(([,N])=>N.exposeInContext).map(([N,X])=>[N,(0,z.applyFormula)(X.formula,F)]))},k,T=y.package??x;if(T?k=s.packages?.[T]?.components[y.name]??s.components[y.name]:k=s.components[y.name],!(0,Ge.isDefined)(k))return console.warn(`Unable to find component ${[x,y.name].filter(Ge.isDefined).join("/")} in files`),"";let _=k,oe=l.some(N=>N.name===_.name),$=await n({component:new ip.ToddleComponent({component:_,getComponent:(N,X)=>{let Ee=[X,N].filter(Ge.isDefined).join("/"),ce=X?s.packages?.[X]?.components[N]:s.components[N];if(!ce){console.warn(`Unable to find component ${Ee} in files`);return}return ce},packageName:x,globalFormulas:{formulas:s.formulas,packages:s.packages}}),formulaContext:{data:{Location:F.data.Location,Attributes:S,Contexts:P,Variables:(0,Bt.mapValues)(_.variables,({initialValue:N})=>(0,z.applyFormula)(N,F)),Apis:{}},component:_,package:y.package??(oe?void 0:x),env:a,toddle:i},req:h,apiCache:e,updateApiCache:f}),ue=await Promise.all(y.children.map(N=>g({id:N,node:r.nodes[N],data:{...w,Contexts:{...P,[_.name]:Object.fromEntries(Object.entries(_.formulas??{}).filter(([,X])=>X.exposeInContext).map(([X,Ee])=>[X,(0,z.applyFormula)(Ee.formula,{component:_,package:T,data:{Contexts:{...w.Contexts,...Object.fromEntries(Object.entries(_.formulas??{}).filter(([,ce])=>ce.exposeInContext).map(([ce,Ku])=>[ce,(0,z.applyFormula)(Ku.formula,{data:{Attributes:S,Apis:{...w.Apis,...$}},component:r,package:T,env:a,toddle:i})]))},Apis:$,Attributes:S,Variables:(0,Bt.mapValues)(_.variables,({initialValue:ce})=>(0,z.applyFormula)(ce,{data:{Attributes:S},component:r,package:T,env:a,toddle:i}))},env:a,toddle:i})]))}},packageName:y.package??x}))),Yt={};return ue.forEach((N,X)=>{let Ee=r.nodes[y.children[X]]?.slot??"default";Yt[Ee]=`${Yt[Ee]??""} ${N}`}),up({attrs:S,component:_,contexts:P,children:Yt,packageName:y.package??(oe?void 0:x),instance:v==="root"?{...u,[r.name]:"root"}:{[r.name]:v},apis:$,env:a,includedComponents:l,formulaContext:F,files:s,apiCache:e,updateApiCache:f,projectId:d,evaluateComponentApis:n,req:h})}}};return g({id:"root",node:r.nodes.root,data:o,packageName:c,isComponentRootNode:!0})},up=async({apiCache:e,apis:t,attrs:r,children:o,component:a,contexts:n,env:s,evaluateComponentApis:i,files:l,formulaContext:u,includedComponents:c,instance:d,packageName:h,projectId:f,req:g,updateApiCache:v})=>{let y={Location:u.data.Location,Attributes:r,Contexts:n,Variables:(0,Bt.mapValues)(a.variables,({initialValue:w})=>(0,z.applyFormula)(w,{...u,data:{...u.data,Contexts:n}})),Apis:t};return y.Contexts={...y.Contexts,...Object.fromEntries(Object.entries(a.formulas??{}).filter(([,w])=>w.exposeInContext).map(([w,x])=>[w,(0,z.applyFormula)(x.formula,{...u,data:y})]))},ni({apiCache:e,children:o,component:a,data:y,env:s,evaluateComponentApis:i,files:l,includedComponents:c,instance:d,packageName:h,projectId:f,req:g,toddle:u.toddle,updateApiCache:v})},cp=async({component:e,env:t,evaluateComponentApis:r,files:o,formulaContext:a,includedComponents:n,req:s,projectId:i})=>{let l={},u=(h,f)=>l[h]=f,c=await r({component:e,formulaContext:a,req:s,apiCache:l,updateApiCache:u});return a.data.Apis=c,{html:await ni({apiCache:l,component:e,data:a.data,env:t,evaluateComponentApis:r,files:o,includedComponents:n,instance:{},packageName:void 0,projectId:i,req:s,toddle:a.toddle,updateApiCache:u}),apiCache:l}};Ut.renderPageBody=cp});var Ur={};m(Ur,{default:()=>fp});var ii,dp,fp,li=p(()=>{ii=b(O()),dp=([e])=>(0,ii.toBoolean)(e),fp=dp});var Vr={};m(Vr,{default:()=>mp});var pp,mp,ui=p(()=>{pp=([e])=>typeof e!="string"?null:e.length===0?e:e[0].toLocaleUpperCase()+e.substring(1).toLocaleLowerCase(),mp=pp});var Kr={};m(Kr,{default:()=>yp});var hp,yp,ci=p(()=>{hp=([e,t])=>typeof t!="number"||isNaN(t)?null:Array.isArray(e)?e.slice(t):typeof e=="string"?e.substring(t):null,yp=hp});var zr={};m(zr,{default:()=>vp});var gp,vp,di=p(()=>{gp=([e,t])=>{if(typeof e!="number"||typeof t!="number")return null;let r=Math.max(1,Math.pow(10,t));return Math.round(e*r)/r},vp=gp});var Wr={};m(Wr,{default:()=>Fp});var bp,Fp,fi=p(()=>{bp=([e])=>typeof e!="string"?null:e.trim(),Fp=bp});var Gr={};m(Gr,{default:()=>Ap});var wp,Ap,pi=p(()=>{wp=([e],{root:t})=>typeof e!="string"?null:t.getElementById(e),Ap=wp});var Jr={};m(Jr,{default:()=>xp});var Ep,xp,mi=p(()=>{Ep=([e])=>typeof e=="number"?new Date(e):null,xp=Ep});var Xr={};m(Xr,{default:()=>jp});var hi,Op,jp,yi=p(()=>{hi=b(Fr()),Op=([e])=>!e||typeof e!="string"?null:(0,hi.STRING_TEMPLATE)("cookies",e),jp=Op});var Qr={};m(Qr,{default:()=>Sp});var gi,Cp,Sp,vi=p(()=>{gi=b(O()),Cp=([e])=>Array.isArray(e)?e.length:(0,gi.isObject)(e)?Object.keys(e).length:typeof e=="string"?e.length:null,Sp=Cp});var Yr={};m(Yr,{default:()=>_p});var kp,_p,bi=p(()=>{kp=([e])=>typeof e!="string"?null:e.toLocaleUpperCase(),_p=kp});var Zr={};m(Zr,{default:()=>Tp});var Rp,Tp,Fi=p(()=>{Rp=()=>Math.random(),Tp=Rp});var eo={};m(eo,{default:()=>Hp});var Dp,Hp,wi=p(()=>{Dp=([e,t])=>typeof e=="string"?e.indexOf(t):Array.isArray(e)?e.findIndex(r=>globalThis.toddle.isEqual(r,t)):null,Hp=Dp});var to={};m(to,{default:()=>Ip});var Pp,Ip,Ai=p(()=>{Pp=([e,t])=>typeof e=="string"?e.lastIndexOf(t):Array.isArray(e)?e.findLastIndex(r=>globalThis.toddle.isEqual(r,t)):null,Ip=Pp});var ro={};m(ro,{default:()=>Np});var $p,Np,Ei=p(()=>{$p=([e,t])=>Array.isArray(e)?e.join(String(t)):null,Np=$p});var oo={};m(oo,{default:()=>qp});var Lp,qp,xi=p(()=>{Lp=([e])=>typeof e!="string"?null:encodeURIComponent(e),qp=Lp});var ao={};m(ao,{default:()=>Bp});var Mp,Bp,Oi=p(()=>{Mp=([e])=>typeof e!="string"?null:btoa(e),Bp=Mp});var no={};m(no,{default:()=>Vp});var Up,Vp,ji=p(()=>{Up=([e])=>typeof e!="number"?null:Math.sqrt(e),Vp=Up});var so={};m(so,{default:()=>zp});var Kp,zp,Ci=p(()=>{Kp=()=>new Date,zp=Kp});var io={};m(io,{default:()=>Wp,getArgumentInputData:()=>Gp,handler:()=>Si});var Si,Wp,Gp,ki=p(()=>{Si=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.findIndex((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.entries(e).findIndex(([r,o])=>t({key:r,value:o})):null,Wp=Si,Gp=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{key:o[0],value:o[1]}}}return r}});var lo={};m(lo,{default:()=>Xp});var Jp,Xp,_i=p(()=>{Jp=([e])=>Array.isArray(e)?[...e].reverse():null,Xp=Jp});var uo={};m(uo,{default:()=>Yp});var Qp,Yp,Ri=p(()=>{Qp=([e,t])=>e>=t,Yp=Qp});var co={};m(co,{default:()=>em});var Zp,em,Ti=p(()=>{Zp=([e])=>Number(e),em=Zp});var fo={};m(fo,{default:()=>rm,getArgumentInputData:()=>om});var tm,rm,om,Di=p(()=>{tm=([e,t,r])=>{if(!Array.isArray(e)||typeof t!="function"||typeof r!="boolean")return null;let o=r?1:-1;return[...e].sort((a,n)=>{let s=t({item:a}),i=t({item:n});if(Array.isArray(s)&&Array.isArray(i)){for(let l in s)if(s[l]!==i[l])return(s[l]>i[l]?1:-1)*o;return 0}return s===i?0:(s>i?1:-1)*o})},rm=tm,om=([e],t,r)=>t===1&&Array.isArray(e)?{...r,Args:{item:e[0]}}:r});var po={};m(po,{default:()=>nm});var Hi,am,nm,Pi=p(()=>{Hi=b(O()),am=e=>{if(e.every(Array.isArray)){let t=[];for(let r of e)t.push(...r);return t}return e.every(Hi.isObject)?Object.assign({},...e):e.join("")},nm=am});var mo={};m(mo,{default:()=>im,getArgumentInputData:()=>lm});var sm,im,lm,Ii=p(()=>{sm=([e,t,r])=>typeof t!="function"?null:Array.isArray(e)?e.reduce((o,a,n)=>t({result:o,item:a,index:n}),r):e&&typeof e=="object"?Object.entries(e).reduce((o,[a,n])=>t({result:o,key:a,value:n}),r):null,im=sm,lm=([e,t,r],o,a)=>{if(o!==1)return a;if(Array.isArray(e))return{...a,Args:{item:e[0],index:0,result:r}};if(e&&typeof e=="object"){let[n]=Object.entries(e);if(n)return{...a,Args:{key:n[0],value:n[1],result:r}}}return a}});var ho={};m(ho,{default:()=>um,getArgumentInputData:()=>cm,handler:()=>$i});var $i,um,cm,Ni=p(()=>{$i=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.find((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.entries(e).find(([r,o])=>t({key:r,value:o}))?.[1]:null,um=$i,cm=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{key:o[0],value:o[1]}}}return r}});var yo={};m(yo,{default:()=>fm});var dm,fm,Li=p(()=>{dm=([e,t])=>typeof t!="number"?null:Array.isArray(e)?e.slice(e.length-t):typeof e=="string"?e.substring(e.length-t):null,fm=dm});var go={};m(go,{default:()=>mm});var pm,mm,qi=p(()=>{pm=([e])=>{switch(typeof e){case"number":return isNaN(e)?null:"Number";case"string":return"String";case"boolean":return"Boolean";case"object":return Array.isArray(e)?"Array":e===null?"Null":"Object";case"undefined":return"Null";default:return null}},mm=pm});var vo={};m(vo,{default:()=>ym});var hm,ym,Mi=p(()=>{hm=([e,t])=>globalThis.toddle.isEqual(e,t),ym=hm});var bo={};m(bo,{default:()=>vm});var gm,vm,Bi=p(()=>{gm=([e,t,r])=>{if(typeof e!="number"||Number.isNaN(e))return null;let o=typeof t=="string"&&t.length>0||Array.isArray(t)&&t.every(F=>typeof F=="string")?t:void 0;if(!r||typeof r!="object")return Intl.NumberFormat(o).format(e);let a=(F,S)=>typeof F=="string"&&(S?.includes(F)??!0)?F:void 0,n=r,s=a(n.style,["decimal","currency","percent","unit"]),i=typeof n.currency=="string"&&n.currency.length===3?n.currency:void 0;if(s==="currency"&&typeof i!="string")return null;let l=a(n.currencyDisplay,["code","symbol","narrowSymbol","name"]),u=typeof n.unit=="string"?n.unit:void 0;if(s==="unit"&&typeof u!="string")return null;let c=a(n.unitDisplay,["short","narrow","long"]),d=typeof n.minimumIntegerDigits=="number"&&n.minimumIntegerDigits>=1&&n.minimumIntegerDigits<=21?n.minimumIntegerDigits:void 0,h=typeof n.minimumFractionDigits=="number"&&n.minimumFractionDigits>=0&&n.minimumFractionDigits<=100?n.minimumFractionDigits:void 0,f=typeof n.maximumFractionDigits=="number"&&n.maximumFractionDigits>=0&&n.maximumFractionDigits<=100?n.maximumFractionDigits:void 0,g=typeof n.minimumSignificantDigits=="number"&&n.minimumSignificantDigits>=1&&n.minimumSignificantDigits<=21?n.minimumSignificantDigits:void 0,v=typeof n.maximumSignificantDigits=="number"&&n.maximumSignificantDigits>=1&&n.maximumSignificantDigits<=21?n.maximumSignificantDigits:void 0,y=a(n.notation,["standard","scientific","engineering","compact"]),w=a(n.compactDisplay,["short","long"]),x=["always","auto","min2"],E=typeof n.useGrouping=="boolean"?n.useGrouping:a(n.useGrouping,x);return new Intl.NumberFormat(o,{style:s,currency:i,currencyDisplay:l,unit:u,unitDisplay:c,minimumIntegerDigits:d,minimumFractionDigits:h,maximumFractionDigits:f,minimumSignificantDigits:g,maximumSignificantDigits:v,notation:y,compactDisplay:w,useGrouping:E}).format(e)},vm=gm});var Fo={};m(Fo,{default:()=>bm,getArgumentInputData:()=>Fm,handler:()=>Ui});var Ui,bm,Fm,Vi=p(()=>{Ui=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.some((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.entries(e).some(([r,o])=>t({key:r,value:o})):null,bm=Ui,Fm=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{key:o[0],value:o[1]}}}return r}});var wo={};m(wo,{default:()=>Am});var wm,Am,Ki=p(()=>{wm=([e,t])=>e<t,Am=wm});var Ao={};m(Ao,{default:()=>Em,getArgumentInputData:()=>xm,handler:()=>zi});var zi,Em,xm,Wi=p(()=>{zi=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.every((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.entries(e).every(([r,o])=>t({key:r,value:o})):null,Em=zi,xm=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{key:o[0],value:o[1]}}}return r}});var Eo={};m(Eo,{default:()=>jm});var Om,jm,Gi=p(()=>{Om=(e,t)=>t.env.branchName,jm=Om});var xo={};m(xo,{default:()=>Sm});var Vt,Cm,Sm,Ji=p(()=>{Vt=b(O()),Cm=([e,t,r,o,a])=>{if(typeof e!="string"||typeof t!="string")return[];let n=[(0,Vt.toBoolean)(r)?"g":"",(0,Vt.toBoolean)(o)?"i":"",(0,Vt.toBoolean)(a)?"m":""].join(""),s=new RegExp(t,n);return e.match(s)??[]},Sm=Cm});var Oo={};m(Oo,{default:()=>_m});var km,_m,Xi=p(()=>{km=([e])=>typeof e=="string"||Array.isArray(e)?e[e.length-1]:null,_m=km});var Qi=A(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.parseJSONWithDate=Tm;var Rm=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:.\d{1,3})?Z$/;function Tm(e){return JSON.parse(e,(t,r)=>typeof r=="string"&&r.length===24&&Rm.test(r)?new Date(r):r)}});var Co={};m(Co,{default:()=>Hm});var Yi,Dm,Hm,Zi=p(()=>{Yi=b(Qi()),Dm=([e])=>{if(typeof e!="string")return null;try{return(0,Yi.parseJSONWithDate)(e)}catch{return null}},Hm=Dm});var So={};m(So,{default:()=>Pm,getArgumentInputData:()=>Im,handler:()=>el});var el,Pm,Im,tl=p(()=>{el=([e,t])=>{if(typeof t!="function"||!e||typeof e!="object"||!Array.isArray(e))return null;let r={};for(let o in e){let a=e[o],n=String(t({item:a,index:o}));r[n]=r[n]??[],r[n].push(a)}return r},Pm=el,Im=([e],t,r)=>t===1&&Array.isArray(e)?{...r,Args:{item:e[0],index:0}}:r});var ko={};m(ko,{default:()=>$m,getArgumentInputData:()=>Nm,handler:()=>rl});var rl,$m,Nm,ol=p(()=>{rl=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.filter((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).filter(([r,o])=>t({key:r,value:o}))):Array.isArray(e)?e.filter((r,o)=>t({item:r,index:o})):null,$m=rl,Nm=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{value:o[1],key:o[0]}}}return r}});var _o={};m(_o,{default:()=>qm});var Lm,qm,al=p(()=>{Lm=([e,t])=>e<=t,qm=Lm});var Ro={};m(Ro,{default:()=>Bm});var Mm,Bm,nl=p(()=>{Mm=([e,t])=>!globalThis.toddle.isEqual(e,t),Bm=Mm});var To={};m(To,{default:()=>Vm});var Um,Vm,sl=p(()=>{Um=([e])=>typeof e!="number"?null:Math.abs(e),Vm=Um});var Do={};m(Do,{default:()=>zm});var Km,zm,il=p(()=>{Km=([e,t])=>e>t,zm=Km});var Ho={};m(Ho,{default:()=>Gm});var ll,Wm,Gm,ul=p(()=>{ll=b(O()),Wm=([e])=>!(0,ll.toBoolean)(e),Gm=Wm});var Po={};m(Po,{default:()=>Xm});var Jm,Xm,cl=p(()=>{Jm=([e,t])=>typeof e=="string"&&typeof t=="string"?e.includes(t):Array.isArray(e)?e.some(r=>globalThis.toddle.isEqual(r,t)):null,Xm=Jm});var Io={};m(Io,{default:()=>Ym});var Qm,Ym,dl=p(()=>{Qm=([e,t])=>{if(typeof e!="number"||typeof t!="number")return null;let r=Math.max(1,Math.pow(10,t));return Math.ceil(e*r)/r},Ym=Qm});var $o={};m($o,{default:()=>eh});var Zm,eh,fl=p(()=>{Zm=(e,t)=>t.env.isServer,eh=Zm});var No={};m(No,{default:()=>rh});var th,rh,pl=p(()=>{th=e=>!Array.isArray(e)||e.some(t=>t===null||typeof t!="number")?null:e.reduce((t,r)=>t+Number(r),0),rh=th});var Lo={};m(Lo,{default:()=>ah});var oh,ah,ml=p(()=>{oh=e=>e.some(t=>isNaN(Number(t)))?null:e.reduce((t,r)=>t*r,1),ah=oh});var qo={};m(qo,{default:()=>sh});var hl,nh,sh,yl=p(()=>{hl=b(O()),nh=e=>{for(let t of e)if((0,hl.toBoolean)(t))return t;return null},sh=nh});var Mo={};m(Mo,{default:()=>lh});var ih,lh,gl=p(()=>{ih=([e,t])=>typeof e!="string"||typeof t!="string"?null:e.startsWith(t),lh=ih});var Bo={};m(Bo,{default:()=>ch});var uh,ch,vl=p(()=>{uh=([e])=>Array.isArray(e)?e.flat():null,ch=uh});var Uo={};m(Uo,{default:()=>fh});var dh,fh,bl=p(()=>{dh=([e,t])=>{let r=isNaN(Number(t))?0:Number(t);return JSON.stringify(e,null,r)},fh=dh});var Vo={};m(Vo,{default:()=>mh});var ph,mh,Fl=p(()=>{ph=([e,t])=>typeof t!="number"||isNaN(t)?null:Array.isArray(e)?e.slice(0,e.length-t):typeof e=="string"?e.substring(0,e.length-t):null,mh=ph});var Ko={};m(Ko,{default:()=>yh});var hh,yh,wl=p(()=>{hh=([e])=>typeof e=="string"?new Date(e):null,yh=hh});var zo={};m(zo,{default:()=>vh});var gh,vh,Al=p(()=>{gh=([e])=>typeof e=="object"&&e!==null?Object.entries(e).map(([t,r])=>({key:t,value:r})):null,vh=gh});var Wo={};m(Wo,{default:()=>Fh});var bh,Fh,El=p(()=>{bh=([e])=>{if(!Array.isArray(e))return null;let t=new Set;return e.filter(r=>{let o=typeof r=="object"?JSON.stringify(r):r;return t.has(o)?!1:(t.add(o),!0)})},Fh=bh});var Go={};m(Go,{default:()=>Ah});var wh,Ah,xl=p(()=>{wh=([e,t,r])=>typeof e!="string"||typeof t!="string"?null:e.replaceAll(t,String(r)),Ah=wh});var Jo={};m(Jo,{default:()=>xh});var Eh,xh,Ol=p(()=>{Eh=([e,t,r])=>typeof e!="number"||typeof t!="number"||typeof r!="number"?null:Math.min(Math.max(e,t),r),xh=Eh});var Xo={};m(Xo,{default:()=>jh});var Oh,jh,jl=p(()=>{Oh=([e])=>typeof e!="string"?null:e.toLocaleLowerCase(),jh=Oh});var Qo={};m(Qo,{default:()=>Sh});function Cl(e){let t=[...e];for(let r=t.length-1;r>0;r--){let o=Math.floor(Math.random()*(r+1));[t[r],t[o]]=[t[o],t[r]]}return t}var Ch,Sh,Sl=p(()=>{Ch=([e])=>Array.isArray(e)?Cl(e):typeof e=="string"?Cl(e.split("")).join(""):null;Sh=Ch});var Yo={};m(Yo,{default:()=>_h});var kh,_h,kl=p(()=>{kh=([e])=>!e||!(e instanceof Date)?null:e.getTime(),_h=kh});var Zo={};m(Zo,{default:()=>Th});var _l,Rh,Th,Rl=p(()=>{_l=b(O()),Rh=([e,t])=>{if(typeof e!="object"||e===null||!Array.isArray(t)&&typeof t!="string"&&typeof t!="number")return null;let r=(a,[n,...s])=>{if(Array.isArray(a)){let i=Number(n);return Number.isNaN(i)?a:s.length===0?a.filter((l,u)=>u!==Number(n)):a.map((l,u)=>u===i?r(a[i],s):l)}return(0,_l.isObject)(a)?s.length===0?Object.fromEntries(Object.entries(a).filter(([i])=>i!==n)):{...a,[n]:r(a[n],s)}:null},o=Array.isArray(t)?t:[t];return r(e,o)},Th=Rh});var ta={};m(ta,{default:()=>Hh});var ea,Dh,Hh,Tl=p(()=>{ea=b(O()),Dh=([e,t,r])=>{if(!(0,ea.isDefined)(navigator.canShare))return!1;let o=n=>(0,ea.isDefined)(n)&&typeof n=="string";if(!o(e)&&!o(t)&&!o(r))return!1;let a={};return o(t)&&(a.title=t),o(r)&&(a.text=r),o(e)&&(a.url=e),navigator.canShare(a)},Hh=Dh});var ra={};m(ra,{default:()=>Ih});var Ph,Ih,Dl=p(()=>{Ph=([e,t])=>typeof e!="number"||typeof t!="number"?null:e>t?[]:Array.from({length:t-e+1},(r,o)=>o+e),Ih=Ph});var oa={};m(oa,{default:()=>Nh});var $h,Nh,Hl=p(()=>{$h=e=>Math.min(...e.map(Number)),Nh=$h});var aa={};m(aa,{default:()=>qh});var Lh,qh,Pl=p(()=>{Lh=([e,t])=>{if(typeof e!="number"||typeof t!="number")return null;let r=Math.max(1,Math.pow(10,t));return Math.floor(e*r)/r},qh=Lh});var na={};m(na,{default:()=>Mh,getArgumentInputData:()=>Bh,handler:()=>Il});var Il,Mh,Bh,$l=p(()=>{Il=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.findLast((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.entries(e).findLast(([r,o])=>t({key:r,value:o}))?.[1]:null,Mh=Il,Bh=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{key:o[0],value:o[1]}}}return r}});var sa={};m(sa,{default:()=>Vh});var Uh,Vh,Nl=p(()=>{Uh=([e])=>typeof e!="string"?null:decodeURIComponent(e),Vh=Uh});var ia={};m(ia,{default:()=>zh});var Kh,zh,Ll=p(()=>{Kh=(e,{env:t})=>t.isServer?t.request?.headers["user-agent"]??null:window.navigator.userAgent,zh=Kh});var la={};m(la,{default:()=>Gh});var Wh,Gh,ql=p(()=>{Wh=([e])=>{if(Array.isArray(e)){let t=0;for(let r of e){if(isNaN(r)||typeof r!="number")return null;t+=r}return t}return null},Gh=Wh});var ua={};m(ua,{default:()=>Xh});var Jh,Xh,Ml=p(()=>{Jh=e=>Math.max(...e.map(Number)),Xh=Jh});var ca={};m(ca,{default:()=>Yh});var Qh,Yh,Bl=p(()=>{Qh=([e,t])=>{let r=Number(e),o=Number(t);return isNaN(r)||isNaN(o)?null:r-o},Yh=Qh});var da={};m(da,{default:()=>ey});var Zh,ey,Ul=p(()=>{Zh=([e,t,r])=>{if(!e||!(e instanceof Date))return null;let o=typeof t=="string"&&t.length>0||Array.isArray(t)&&t.every(F=>typeof F=="string")?t:void 0;if(!r||typeof r!="object")return Intl.DateTimeFormat(o).format(e);let a=(F,S)=>typeof F=="string"&&(S?.includes(F)??!0)?F:void 0,n=r,s=a(n.dateStyle,["full","long","medium","short"]),i=a(n.timeStyle,["full","long","medium","short"]),l=a(n.calendar),u=a(n.weekday,["long","short","narrow"]),c=a(n.era,["long","short","narrow"]),d=a(n.year,["numeric","2-digit"]),h=a(n.month,["long","short","narrow","numeric","2-digit"]),f=a(n.day,["numeric","2-digit"]),g=a(n.hour,["numeric","2-digit"]),v=a(n.minute,["numeric","2-digit"]),y=a(n.second,["numeric","2-digit"]),w=a(n.timeZoneName,["long","short","shortOffset","longOffset","shortGeneric","longGeneric"]),x=a(n.timeZone),E=n.hour12===!0?!0:n.hour12===!1?!1:void 0;return Intl.DateTimeFormat(o,{dateStyle:s,timeStyle:i,calendar:l,weekday:u,era:c,year:d,month:h,day:f,hour:g,minute:v,second:y,timeZoneName:w,timeZone:x,hour12:E}).format(e)},ey=Zh});var fa={};m(fa,{default:()=>oy,getArgumentInputData:()=>ry});var ty,ry,oy,Vl=p(()=>{ty=([e,t])=>typeof t!="function"?null:Array.isArray(e)?e.map((r,o)=>t({item:r,index:o})):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([r,o])=>{let a=t({key:r,value:o});return"key"in a&&"value"in a?[a.key,a.value]:null})):null,ry=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{key:o[0],value:o[1]}}}return r},oy=ty});var pa={};m(pa,{default:()=>ny});var ay,ny,Kl=p(()=>{ay=([e])=>{if(Array.isArray(e)){let t={};for(let{key:r,value:o}of e)t[r]=o;return t}return null},ny=ay});var ma={};m(ma,{default:()=>iy});var sy,iy,zl=p(()=>{sy=([e,t])=>typeof e!="string"||typeof t!="string"?null:e.split(t),iy=sy});var ha={};m(ha,{default:()=>uy});var ly,uy,Wl=p(()=>{ly=([e,t])=>{if(typeof e=="string")return e[Number(t)];let r=(o,a)=>{if(a.length===0)return o;let[n,...s]=a;return r(o?.[String(n)],s)};return r(e,Array.isArray(t)?t:[t])},uy=ly});var ya={};m(ya,{default:()=>dy});var cy,dy,Gl=p(()=>{cy=([e,t])=>{if(typeof e!="string")return null;try{let{hostname:r,searchParams:o,pathname:a,hash:n,href:s,protocol:i,port:l,origin:u}=new URL(e,typeof t=="string"?t:void 0);return{hostname:r,searchParams:Object.fromEntries(o),path:a.split("/").filter((c,d)=>d!==0||c!==""),hash:n.replace("#",""),href:s,protocol:i,port:l,origin:u}}catch{return null}},dy=cy});var ga={};m(ga,{default:()=>py});var fy,py,Jl=p(()=>{fy=([e,t])=>isNaN(Number(e))||isNaN(Number(t))?null:Number(e)/Number(t),py=fy});var va={};m(va,{default:()=>hy});var my,hy,Xl=p(()=>{my=([e,t])=>isNaN(Number(e))||isNaN(Number(t))?null:Number(e)%Number(t),hy=my});var ba={};m(ba,{default:()=>yy});var Ql,Yl,yy,Zl=p(()=>{Ql=b(O()),Yl=([e,t,r],o)=>{if(typeof t!="string"&&typeof t!="number"&&!Array.isArray(t))return null;let[a,...n]=Array.isArray(t)?t:[t];if((0,Ql.isObject)(e)){let s=Array.isArray(e)?[...e]:{...e};return s[a]=n.length===0?r:Yl([s[a],n,r],o),s}return null},yy=Yl});var Fa={};m(Fa,{default:()=>vy});var gy,vy,eu=p(()=>{gy=([e])=>{if(typeof e!="string"||e.length===0||typeof window>"u")return null;let t=window.localStorage.getItem(e);if(t===null)return t;try{return JSON.parse(t)}catch{return t}},vy=gy});var wa={};m(wa,{default:()=>Fy});var by,Fy,tu=p(()=>{by=([e])=>typeof e=="string"||Array.isArray(e)?e[0]:null,Fy=by});var Aa={};m(Aa,{default:()=>Ay});var wy,Ay,ru=p(()=>{wy=(e,{env:t})=>t.isServer?t.request.url:window?.location.href??null,Ay=wy});var Ea={};m(Ea,{default:()=>Ey,getArgumentInputData:()=>xy,handler:()=>ou});var ou,Ey,xy,au=p(()=>{ou=([e,t])=>{if(typeof t!="function"||!e||typeof e!="object")return null;let r=Array.isArray(e)?e:Object.entries(e),o={};for(let a=0;a<r.length;a++){let n=r[a],s=String(t({item:n,i:a}));o[s]=n}return o},Ey=ou,xy=([e],t,r)=>{if(t===0)return r;if(Array.isArray(e))return{...r,Args:{item:e[0],index:0}};if(e&&typeof e=="object"){let[o]=Object.entries(e);if(o)return{...r,Args:{value:o[1],key:o[0]}}}return r}});var xa={};m(xa,{default:()=>jy});var Oy,jy,nu=p(()=>{Oy=([e,t])=>Array.isArray(e)?[t,...e]:null,jy=Oy});var Oa={};m(Oa,{default:()=>Sy});var Cy,Sy,su=p(()=>{Cy=([e])=>{if(typeof e!="string"||e.length===0||typeof window>"u")return null;let t=window.sessionStorage.getItem(e);if(t===null)return t;try{return JSON.parse(t)}catch{return t}},Sy=Cy});var ja={};m(ja,{default:()=>_y});var ky,_y,iu=p(()=>{ky=([e,t])=>Array.isArray(e)?[...e,t]:null,_y=ky});var Ca={};m(Ca,{default:()=>Ty});var Ry,Ty,lu=p(()=>{Ry=([e])=>typeof e!="string"?null:atob(e),Ty=Ry});var Sa={};m(Sa,{default:()=>Hy});var Dy,Hy,uu=p(()=>{Dy=(e,{env:t})=>t.isServer?t.request?.headers["accept-language"]?.split(",").map(r=>r.split(";")[0])??[]:window.navigator.languages,Hy=Dy});var ka={};m(ka,{default:()=>Iy});var Py,Iy,cu=p(()=>{Py=([e],{env:t,root:r})=>!e||typeof e!="string"?null:t.isServer?t.request.cookies[e]??null:r instanceof ShadowRoot?null:r.cookie.split("; ")?.find(o=>o.startsWith(`${e}=`))?.split("=")[1]??null,Iy=Py});var _a={};m(_a,{default:()=>Ny});var $y,Ny,du=p(()=>{$y=([e,t])=>typeof t!="number"?null:JSON.stringify(e,null,t),Ny=$y});var Ra={};m(Ra,{default:()=>qy});var Ly,qy,fu=p(()=>{Ly=([e])=>String(e),qy=Ly});var Ta={};m(Ta,{default:()=>By});var My,By,pu=p(()=>{My=([e,t])=>typeof t!="number"?null:Array.isArray(e)?e.slice(0,t):typeof e=="string"?e.substring(0,t):null,By=My});var Da={};m(Da,{default:()=>Vy});var Uy,Vy,mu=p(()=>{Uy=([e,t])=>isNaN(Number(e))||isNaN(Number(t))?null:Number(e)**Number(t),Vy=Uy});var hu={};m(hu,{absolute:()=>To,add:()=>No,append:()=>ja,boolean:()=>Ur,branchName:()=>Eo,canShare:()=>ta,capitalize:()=>Vr,clamp:()=>Jo,concatenate:()=>po,currentURL:()=>Aa,dateFromString:()=>Ko,dateFromTimestamp:()=>Jr,decodeBase64:()=>Ca,decodeURIComponent:()=>sa,defaultTo:()=>qo,deleteKey:()=>Zo,divide:()=>ga,drop:()=>Kr,dropLast:()=>Vo,encodeBase64:()=>ao,encodeJSON:()=>_a,encodeURIComponent:()=>oo,entries:()=>zo,equals:()=>vo,every:()=>Ao,filter:()=>ko,find:()=>ho,findIndex:()=>io,findLast:()=>na,first:()=>wa,flatten:()=>Bo,formatDate:()=>da,formatNumber:()=>bo,fromEntries:()=>pa,get:()=>ha,getCookie:()=>ka,getElementById:()=>Gr,getFromLocalStorage:()=>Fa,getFromSessionStorage:()=>Oa,getHttpOnlyCookie:()=>Xr,greaterOrEqueal:()=>uo,greaterThan:()=>Do,groupBy:()=>So,includes:()=>Po,indexOf:()=>eo,isServer:()=>$o,join:()=>ro,json:()=>Uo,keyBy:()=>Ea,languages:()=>Sa,last:()=>Oo,lastIndexOf:()=>to,lessOrEqual:()=>_o,lessThan:()=>wo,lowercase:()=>Xo,map:()=>fa,matches:()=>xo,max:()=>ua,min:()=>oa,minus:()=>ca,modulo:()=>va,multiply:()=>Lo,not:()=>Ho,notEqual:()=>Ro,now:()=>so,number:()=>co,parseJSON:()=>Co,parseURL:()=>ya,power:()=>Da,prepend:()=>xa,randomNumber:()=>Zr,range:()=>ra,reduce:()=>mo,replaceAll:()=>Go,reverse:()=>lo,round:()=>zr,roundDown:()=>aa,roundUp:()=>Io,set:()=>ba,shuffle:()=>Qo,size:()=>Qr,some:()=>Fo,sort_by:()=>fo,split:()=>ma,squareRoot:()=>no,startsWith:()=>Mo,string:()=>Ra,sum:()=>la,take:()=>Ta,takeLast:()=>yo,timestamp:()=>Yo,trim:()=>Wr,typeOf:()=>go,unique:()=>Wo,uppercase:()=>Yr,userAgent:()=>ia});var yu=p(()=>{li();ui();ci();di();fi();pi();mi();yi();vi();bi();Fi();wi();Ai();Ei();xi();Oi();ji();Ci();ki();_i();Ri();Ti();Di();Pi();Ii();Ni();Li();qi();Mi();Bi();Vi();Ki();Wi();Gi();Ji();Xi();Zi();tl();ol();al();nl();sl();il();ul();cl();dl();fl();pl();ml();yl();gl();vl();bl();Fl();wl();Al();El();xl();Ol();jl();Sl();kl();Rl();Tl();Dl();Hl();Pl();$l();Nl();Ll();ql();Ml();Bl();Ul();Vl();Kl();zl();Wl();Gl();Jl();Xl();Zl();eu();tu();ru();au();nu();su();iu();lu();uu();cu();du();fu();pu();mu()});var Kt=A(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.getPathSegments=M.get404Page=M.getRouteDestination=M.matchRoutes=M.matchRouteForUrl=M.matchPageForUrl=void 0;var Ky=Me(),zy=O(),gu=Ha(),Wy=({url:e,components:t})=>(0,M.matchRoutes)({url:e,entries:vu(t),getRoute:r=>r.route});M.matchPageForUrl=Wy;var Gy=({url:e,routes:t})=>(0,M.matchRoutes)({url:e,entries:Object.values(t??{}),getRoute:r=>r.source});M.matchRouteForUrl=Gy;var Jy=({url:e,entries:t,getRoute:r})=>{let o=(0,M.getPathSegments)(e);return Object.values(t).filter(n=>{let s=r(n);return o.length<=s.path.length&&s.path.every((i,l)=>i.type==="param"||i.optional===!0||i.name===o[l])}).sort((n,s)=>{let i=r(n),l=r(s),u=i.path.length-l.path.length;if(u!==0)return u;for(let c=0;c<o.length;c++){let d=i.path[c].type==="static"?1:0,h=l.path[c].type==="static"?1:0;if(d!==h)return h-d}return 0})[0]};M.matchRoutes=Jy;var Xy=({files:e,req:t,route:r})=>{try{let o=new URL(t.url),{searchParamsWithDefaults:a,pathParams:n}=(0,gu.getParameters)({route:r.source,req:t}),s=(0,Ky.getUrl)(r.destination,{data:{"Route parameters":{path:n,query:a}},toddle:(0,gu.getServerToddleObject)(e)},r.type==="redirect"?o.origin:void 0);return r.type==="redirect"&&o.origin===s.origin&&o.pathname===s.pathname||r.type==="rewrite"&&o.origin===s.origin?void 0:s}catch{}};M.getRouteDestination=Xy;var Qy=e=>vu(e).find(t=>t.name==="404");M.get404Page=Qy;var vu=e=>Object.values(e).filter(t=>(0,zy.isDefined)(t.route)),Yy=e=>e.pathname.substring(1).split("/").filter(t=>t!=="").map(t=>decodeURIComponent(t));M.getPathSegments=Yy});var bu=A(ie=>{"use strict";var Zy=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});ie.escapeSearchParameters=ie.escapeSearchParameter=void 0;var eg=O(),tg=Zy(Tt()),rg=e=>typeof e=="string"?(0,tg.default)(e):null;ie.escapeSearchParameter=rg;var og=e=>new URLSearchParams([...e.entries()].reduce((t,[r,o])=>{let a=(0,ie.escapeSearchParameter)(o);return(0,eg.isDefined)(a)&&(t[r]=a),t},{}));ie.escapeSearchParameters=og});var Ha=A(H=>{"use strict";var ag=H&&H.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,a)}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),ng=H&&H.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),sg=H&&H.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var o=[];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(o[o.length]=a);return o},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var o=e(t),a=0;a<o.length;a++)o[a]!=="default"&&ag(r,t,o[a]);return ng(r,t),r}}();Object.defineProperty(H,"__esModule",{value:!0});H.serverEnv=H.getParameters=H.getDataUrlParameters=H.getServerToddleObject=H.getPageFormulaContext=void 0;var ig=V(),lg=Le(),ug=Y(),Fu=O(),cg=sg((yu(),Qu(hu))),dg=Kt(),fg=br(),pg=bu(),mg=({branchName:e,component:t,req:r,logErrors:o,files:a})=>{let n=(0,H.serverEnv)({req:r,branchName:e,logErrors:o}),{searchParamsWithDefaults:s,hash:i,combinedParams:l,url:u}=(0,H.getParameters)({route:t.route,req:r}),c={data:{Location:{page:t.page??"",path:u.pathname,params:l,query:s,hash:i},Attributes:l,"URL parameters":(0,H.getDataUrlParameters)({route:t.route,req:r}),Apis:{}},component:t,root:null,package:void 0,env:n,toddle:(0,H.getServerToddleObject)(a)};return c.data.Variables=(0,ug.mapValues)(t.variables,({initialValue:d})=>(0,ig.applyFormula)(d,c)),c};H.getPageFormulaContext=mg;var hg=e=>{let t=Object.fromEntries(Object.entries(cg).map(([r,o])=>["@toddle/"+r,o.default]));return{getFormula:r=>t[r],getCustomFormula:(r,o)=>{let a;if((0,Fu.isDefined)(o)?a=e.packages?.[o]?.formulas?.[r]:a=e.formulas?.[r],a&&(0,lg.isToddleFormula)(a))return a},errors:[]}};H.getServerToddleObject=hg;var yg=({route:e,req:t})=>{let{searchParamsWithDefaults:r,combinedParams:o}=(0,H.getParameters)({route:e,req:t});return{...r,...o}};H.getDataUrlParameters=yg;var gg=({route:e,req:t})=>{let r=new URL(t.url),o=[...(0,pg.escapeSearchParameters)(r.searchParams).entries()].reduce((i,[l,u])=>({...i,[l]:u??null}),{}),a=(0,dg.getPathSegments)(r),n=e?.path.reduce((i,l,u)=>l.type==="param"?(0,Fu.isDefined)(a[u])&&typeof a[u]=="string"?{...i,[l.name]:a[u]}:{...i,[l.name]:null}:i,{}),s=Object.keys(e?.query??{}).reduce((i,l)=>({...i,[l]:null}),{});return{pathParams:n,searchParamsWithDefaults:{...s,...o},combinedParams:{...o,...n},hash:r.hash.slice(1),url:r}};H.getParameters=gg;var vg=({branchName:e,req:t,logErrors:r})=>({branchName:e,isServer:!0,request:{headers:Object.fromEntries(t.headers.entries()),cookies:(0,fg.getRequestCookies)(t),url:t.url},logErrors:r});H.serverEnv=vg});var Au=A(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.HeadTagTypes=void 0;var wu;(function(e){e.Meta="meta",e.Link="link",e.Script="script",e.NoScript="noscript",e.Style="style"})(wu||(zt.HeadTagTypes=wu={}))});var Eu=A(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.transformRelativePaths=He.isCloudflareImagePath=void 0;var bg=e=>typeof e=="string"&&e.startsWith("/cdn-cgi/imagedelivery/");He.isCloudflareImagePath=bg;var Fg=e=>t=>({...t,nodes:Object.entries(t.nodes).reduce((r,[o,a])=>({...r,[o]:{...a,...a.type==="element"?{attrs:Object.entries(a.attrs).reduce((n,[s,i])=>["src"].includes(s)&&i?.type==="value"&&typeof i.value=="string"?{...n,[s]:{...i,value:new URL(i.value,e).href}}:{...n,[s]:i},{})}:{}}}),{})});He.transformRelativePaths=Fg});var xu=A(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.nanoid=void 0;var wg="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Ag=(e=21)=>{let t="",r=e|0;for(;r--;)t+=wg[Math.random()*64|0];return t};Wt.nanoid=Ag});var Ou=A(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.getFontCssUrl=void 0;var Eg=Y(),xg=({fonts:e,baseForAbsoluteUrls:t,basePath:r="/.toddle/fonts/stylesheet/css2"})=>{if(e.length===0)return;let o=new URLSearchParams;o.set("display","swap");for(let n of e){let s=(0,Eg.easySort)(n.variants.filter(f=>!Number.isNaN(Number(f.weight))),f=>Number(f.weight));if(s.length===0)continue;let i=s.filter(f=>f.italic),l=s.filter(f=>!f.italic),u=(f,g)=>f.map(v=>`${typeof g=="number"?`${g},`:""}${v.weight}`).join(";"),c=i.length>0,d=[l,i].map((f,g)=>u(f,c?g:void 0)).filter(Boolean).join(";"),h=n.family;c?h+=`:ital,wght@${d}`:h+=`:wght@${d}`,o.append("family",h)}let a=`${r}?${o.toString()}`;try{return{swap:typeof t=="string"?new URL(a,t).toString():a}}catch(n){console.error(n)}};Gt.getFontCssUrl=xg});var Pa=A(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.getCharset=Pe.getHtmlLanguage=void 0;var ju=V(),Og=({pageInfo:e,formulaContext:t,defaultLanguage:r="en"})=>{let o=e?.language?(0,ju.applyFormula)(e.language.formula,t):r;return typeof o=="string"?o:r};Pe.getHtmlLanguage=Og;var jg=({pageInfo:e,formulaContext:t,defaultCharset:r="utf-8"})=>{let o=e?.charset?(0,ju.applyFormula)(e.charset.formula,t):r;return typeof o=="string"?o:r};Pe.getCharset=jg});var Cu=A(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.defaultSpeculationRules=void 0;Jt.defaultSpeculationRules={prerender:[{source:"document",where:{selector_matches:'[data-prerender="eager"]'},eagerness:"eager"},{source:"document",where:{selector_matches:'[data-prerender="moderate"]'},eagerness:"moderate"}]}});var _u=A(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.defaultHeadOrdering=le.renderHeadItems=le.getHeadItems=void 0;var Cg=Au(),we=V(),Sg=Y(),kg=te(),Je=O(),_g=qr(),B=Br(),Su=Eu(),Rg=xu(),Tg=Ou(),Dg=Pa(),Hg=Cu(),Pg=({cacheBuster:e,context:t,cssBasePath:r="/.toddle/fonts/stylesheet/css2",files:o,page:a,project:n,theme:s,url:i})=>{let l=a.route?.info,u=$g({component:a,context:t,defaultTitle:n.name}),c=Ng({component:a,context:t,defaultDescription:n.description}),d=[];if(!("breakpoints"in s)&&s.fonts.length>0){let E=(0,Tg.getFontCssUrl)({fonts:s.fonts,basePath:r});E&&d.push(["link:font:swap",`<link href="${(0,B.escapeAttrValue)(E.swap.toString())}" rel="stylesheet" />`])}let h=ku("/_static/reset.css",e),f=(0,Dg.getCharset)({pageInfo:l,formulaContext:t}),g=[];typeof c=="string"&&(g.push(["meta:description",`<meta name="description" content="${(0,B.escapeAttrValue)(c)}" />`]),g.push(["meta:og:description",`<meta property="og:description" content="${(0,B.escapeAttrValue)(c)}" />`]));let v=new Map([["link:reset",`<link rel="stylesheet" fetchpriority="high" href="${(0,B.escapeAttrValue)(h)}" />`],...d,["meta:charset",`<meta charset="${(0,B.escapeAttrValue)(f)}" />`],["meta:viewport",'<meta name="viewport" content="width=device-width, initial-scale=1" />'],["title",`<title>${u}</title>`],["meta:og:title",`<meta property="og:title" content="${(0,B.escapeAttrValue)(u)}" />`],["meta:apple-mobile-web-app-title",`<meta name="apple-mobile-web-app-title" content="${(0,B.escapeAttrValue)(u)}">`],...g,["meta:og:type",'<meta property="og:type" content="website" />'],["meta:og:url",`<meta property="og:url" content="${(0,B.escapeAttrValue)(i.href)}" />`],["meta:application-name",`<meta name="application-name" content="${n.short_id==="toddle"?"toddle":(0,B.escapeAttrValue)(n.name)}">`],["script:speculationrules",`<script type="speculationrules">${JSON.stringify(Hg.defaultSpeculationRules)}</script>`]]);if(n.type==="package"&&n.thumbnail){let E=(0,Su.isCloudflareImagePath)(n.thumbnail.path)?`${i.origin}${n.thumbnail.path}/256`:n.thumbnail.path;v.set("meta:og:image",`<meta property="og:image" content="${(0,B.escapeAttrValue)(`${E}`)}" />`)}if((0,kg.validateUrl)((0,we.applyFormula)(o.config?.meta?.manifest?.formula,t))){let E=ku("/manifest.json",e);v.set("link:manifest",`<link rel="manifest" href="${(0,B.escapeAttrValue)(E)}">`)}else v.set("meta:theme-color",'<meta name="theme-color" content="#171717">'),v.set("meta:msapplication-tilecolor",'<meta name="msapplication-TileColor" content="#171717">');let w=E=>Object.values(l?.meta??{}).some(F=>Object.entries(F.attrs??{}).some(([S,P])=>["name","property"].includes(S.toLowerCase())&&P.type==="value"&&typeof P.value=="string"&&P.value.toLowerCase()===E.toLowerCase())),x=o.config?.meta?.icon;if((0,Je.isDefined)(x)){let E=(0,we.applyFormula)(x.formula,t);if((0,Je.isDefined)(E)&&typeof E=="string")if((0,Su.isCloudflareImagePath)(E)){let F=E.split("/").slice(0,-1).join("/");v.set("link:icon:16",`<link rel="icon" sizes="16x16" href="${(0,B.escapeAttrValue)(`${F}/16`)}" />`),v.set("link:icon:32",`<link rel="icon" sizes="32x32" href="${(0,B.escapeAttrValue)(`${F}/32`)}" />`),v.set("link:icon",`<link rel="shortcut icon" href="${(0,B.escapeAttrValue)(`${F}/48`)}" />`)}else v.set("link:icon",`<link rel="icon" href="${(0,B.escapeAttrValue)(E)}" />`)}else["link:icon","link:mask-icon","link:apple-touch-icon","link:icon:16","link:icon:32"].every(E=>!w(E))||(n.emoji&&v.set("link:icon",`<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>${(0,B.escapeAttrValue)(n.emoji)}</text></svg>">`),v.set("link:mask-icon",'<link rel="mask-icon" href="https://raw.githubusercontent.com/toddledev/resources/main/icons/safari-pinned-tab.svg" color="#171717">'),v.set("link:apple-touch-icon",'<link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/toddledev/resources/main/icons/apple-touch-icon.png">'),v.set("link:icon:16",'<link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/toddledev/resources/main/icons/favicon-16x16.png">'),v.set("link:icon:32",'<link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/toddledev/resources/main/icons/favicon-32x32.png">'));return l?.meta&&Object.entries(l.meta).forEach(([E,F])=>{if(Object.values(Cg.HeadTagTypes).includes(F.tag)){let S=Object.entries(F.attrs??{}).find(([k])=>k==="name"||k==="property"),P=`${F.tag}:${(0,Je.isDefined)(S)?(0,we.applyFormula)(S[1],t):E??(0,Rg.nanoid)()}`;v.set(P,`<${F.tag} data-toddle-id="${E}" ${Object.entries(F.attrs??{}).map(([k,T])=>{let _=(0,we.applyFormula)(T,t);return _===!0?k:`${k}="${(0,B.escapeAttrValue)(_)}"`}).join(" ")} ${_g.VOID_HTML_ELEMENTS.includes(F.tag)?"/>":`>${F.content?(0,we.applyFormula)(F.content,t):""}</${F.tag}>`}`)}}),v};le.getHeadItems=Pg;var Ig=({headItems:e,ordering:t=le.defaultHeadOrdering})=>(0,Sg.easySort)([...e.entries()],([r])=>{let o=t.indexOf(r);return o===-1?t.length:o}).map(([r,o])=>o).join(`
    `);le.renderHeadItems=Ig;le.defaultHeadOrdering=["meta:charset","meta:viewport","title","meta:description","link:icon:16","link:icon:32","link:icon","meta:og:title","meta:application-name","meta:og:url","meta:og:description","meta:og:type","link:manifest","link:mask-icon","link:apple-touch-icon","meta:theme-color","meta:apple-mobile-web-app-title","meta:msapplication-tilecolor","meta:og:locale","link:reset"];var $g=({component:e,context:t,defaultTitle:r})=>{let o=e.route?.info,a=r??e.name;if(!(0,Je.isDefined)(o?.title))return a;let n=(0,we.applyFormula)(o.title.formula,t);return typeof n=="string"?n:a},Ng=({component:e,context:t,defaultDescription:r})=>{let o=e.route?.info;if(!(0,Je.isDefined)(o?.description))return r;let a=(0,we.applyFormula)(o.description.formula,t);return typeof a=="string"?a:r},ku=(e,t)=>typeof t=="string"?`${e}?${new URLSearchParams([["v",t]]).toString()}`:e});var Vu=b(Ma());var Ba=async(e,t=Object.create(null))=>{let{all:r=!1,dot:o=!1}=t,n=(e instanceof Qe?e.raw.headers:e.headers).get("Content-Type");return n?.startsWith("multipart/form-data")||n?.startsWith("application/x-www-form-urlencoded")?tc(e,{all:r,dot:o}):{}};async function tc(e,t){let r=await e.formData();return r?rc(r,t):{}}function rc(e,t){let r=Object.create(null);return e.forEach((o,a)=>{t.all||a.endsWith("[]")?oc(r,a,o):r[a]=o}),t.dot&&Object.entries(r).forEach(([o,a])=>{o.includes(".")&&(ac(r,o,a),delete r[o])}),r}var oc=(e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:e[t]=r},ac=(e,t,r)=>{let o=e,a=t.split(".");a.forEach((n,s)=>{s===a.length-1?o[n]=r:((!o[n]||typeof o[n]!="object"||Array.isArray(o[n])||o[n]instanceof File)&&(o[n]=Object.create(null)),o=o[n])})};var er=e=>{let t=e.split("/");return t[0]===""&&t.shift(),t},Ua=e=>{let{groups:t,path:r}=nc(e),o=er(r);return sc(o,t)},nc=e=>{let t=[];return e=e.replace(/\{[^}]+\}/g,(r,o)=>{let a=`@${o}`;return t.push([a,r]),a}),{groups:t,path:e}},sc=(e,t)=>{for(let r=t.length-1;r>=0;r--){let[o]=t[r];for(let a=e.length-1;a>=0;a--)if(e[a].includes(o)){e[a]=e[a].replace(o,t[r][1]);break}}return e},Ye={},tr=e=>{if(e==="*")return"*";let t=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);return t?(Ye[e]||(t[2]?Ye[e]=[e,t[1],new RegExp("^"+t[2]+"$")]:Ye[e]=[e,t[1],!0]),Ye[e]):null},rr=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},ic=e=>rr(e,decodeURI),or=e=>{let t=e.url,r=t.indexOf("/",8),o=r;for(;o<t.length;o++){let a=t.charCodeAt(o);if(a===37){let n=t.indexOf("?",o),s=t.slice(r,n===-1?void 0:n);return ic(s.includes("%25")?s.replace(/%25/g,"%2525"):s)}else if(a===63)break}return t.slice(r,o)};var Va=e=>{let t=or(e);return t.length>1&&t[t.length-1]==="/"?t.slice(0,-1):t},Oe=(...e)=>{let t="",r=!1;for(let o of e)t[t.length-1]==="/"&&(t=t.slice(0,-1),r=!0),o[0]!=="/"&&(o=`/${o}`),o==="/"&&r?t=`${t}/`:o!=="/"&&(t=`${t}${o}`),o==="/"&&t===""&&(t="/");return t},Ze=e=>{if(!e.match(/\:.+\?$/))return null;let t=e.split("/"),r=[],o="";return t.forEach(a=>{if(a!==""&&!/\:/.test(a))o+="/"+a;else if(/\:/.test(a))if(/\?/.test(a)){r.length===0&&o===""?r.push("/"):r.push(o);let n=a.replace("?","");o+="/"+n,r.push(o)}else o+="/"+a}),r.filter((a,n,s)=>s.indexOf(a)===n)},Zt=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?ar(e):e):e,Ka=(e,t,r)=>{let o;if(!r&&t&&!/[%+]/.test(t)){let s=e.indexOf(`?${t}`,8);for(s===-1&&(s=e.indexOf(`&${t}`,8));s!==-1;){let i=e.charCodeAt(s+t.length+1);if(i===61){let l=s+t.length+2,u=e.indexOf("&",l);return Zt(e.slice(l,u===-1?void 0:u))}else if(i==38||isNaN(i))return"";s=e.indexOf(`&${t}`,s+1)}if(o=/[%+]/.test(e),!o)return}let a={};o??=/[%+]/.test(e);let n=e.indexOf("?",8);for(;n!==-1;){let s=e.indexOf("&",n+1),i=e.indexOf("=",n);i>s&&s!==-1&&(i=-1);let l=e.slice(n+1,i===-1?s===-1?void 0:s:i);if(o&&(l=Zt(l)),n=s,l==="")continue;let u;i===-1?u="":(u=e.slice(i+1,s===-1?void 0:s),o&&(u=Zt(u))),r?(a[l]&&Array.isArray(a[l])||(a[l]=[]),a[l].push(u)):a[l]??=u}return t?a[t]:a},za=Ka,Wa=(e,t)=>Ka(e,t,!0),ar=decodeURIComponent;var Ga=e=>rr(e,ar),Qe=class{raw;#t;#e;routeIndex=0;path;bodyCache={};constructor(e,t="/",r=[[]]){this.raw=e,this.path=t,this.#e=r,this.#t={}}param(e){return e?this.#o(e):this.#s()}#o(e){let t=this.#e[0][this.routeIndex][1][e],r=this.#a(t);return r?/\%/.test(r)?Ga(r):r:void 0}#s(){let e={},t=Object.keys(this.#e[0][this.routeIndex][1]);for(let r of t){let o=this.#a(this.#e[0][this.routeIndex][1][r]);o&&typeof o=="string"&&(e[r]=/\%/.test(o)?Ga(o):o)}return e}#a(e){return this.#e[1]?this.#e[1][e]:e}query(e){return za(this.url,e)}queries(e){return Wa(this.url,e)}header(e){if(e)return this.raw.headers.get(e.toLowerCase())??void 0;let t={};return this.raw.headers.forEach((r,o)=>{t[o]=r}),t}async parseBody(e){return this.bodyCache.parsedBody??=await Ba(this,e)}#r=e=>{let{bodyCache:t,raw:r}=this,o=t[e];if(o)return o;let a=Object.keys(t)[0];return a?t[a].then(n=>(a==="json"&&(n=JSON.stringify(n)),new Response(n)[e]())):t[e]=r[e]()};json(){return this.#r("json")}text(){return this.#r("text")}arrayBuffer(){return this.#r("arrayBuffer")}blob(){return this.#r("blob")}formData(){return this.#r("formData")}addValidatedData(e,t){this.#t[e]=t}valid(e){return this.#t[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return this.#e[0].map(([[,e]])=>e)}get routePath(){return this.#e[0].map(([[,e]])=>e)[this.routeIndex].path}};var et={Stringify:1,BeforeStream:2,Stream:3},Q=(e,t)=>{let r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},lc=/[&<>'"]/,Ja=async(e,t)=>{let r="";t||=[];let o=await Promise.all(e);for(let a=o.length-1;r+=o[a],a--,!(a<0);a--){let n=o[a];typeof n=="object"&&t.push(...n.callbacks||[]);let s=n.isEscaped;if(n=await(typeof n=="object"?n.toString():n),typeof n=="object"&&t.push(...n.callbacks||[]),n.isEscaped??s)r+=n;else{let i=[r];tt(n,i),r=i[0]}}return Q(r,t)},tt=(e,t)=>{let r=e.search(lc);if(r===-1){t[0]+=e;return}let o,a,n=0;for(a=r;a<e.length;a++){switch(e.charCodeAt(a)){case 34:o="&quot;";break;case 39:o="&#39;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}t[0]+=e.substring(n,a)+o,n=a+1}t[0]+=e.substring(n,a)},Xa=e=>{let t=e.callbacks;if(!t?.length)return e;let r=[e],o={};return t.forEach(a=>a({phase:et.Stringify,buffer:r,context:o})),r[0]},rt=async(e,t,r,o,a)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let n=e.callbacks;if(!n?.length)return Promise.resolve(e);a?a[0]+=e:a=[e];let s=Promise.all(n.map(i=>i({phase:t,buffer:a,context:o}))).then(i=>Promise.all(i.filter(Boolean).map(l=>rt(l,t,!1,o,a))).then(()=>a[0]));return r?Q(await s,n):s};var Qa="text/plain; charset=UTF-8",nr=(e,t={})=>{for(let r of Object.keys(t))e.set(r,t[r]);return e},ot=class{#t;#e;env={};#o;finalized=!1;error;#s=200;#a;#r;#n;#l;#u=!0;#f;#c;#d;#p;#m;constructor(e,t){this.#t=e,t&&(this.#a=t.executionCtx,this.env=t.env,this.#d=t.notFoundHandler,this.#m=t.path,this.#p=t.matchResult)}get req(){return this.#e??=new Qe(this.#t,this.#m,this.#p),this.#e}get event(){if(this.#a&&"respondWith"in this.#a)return this.#a;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#a)return this.#a;throw Error("This context has no ExecutionContext")}get res(){return this.#u=!1,this.#l||=new Response("404 Not Found",{status:404})}set res(e){if(this.#u=!1,this.#l&&e)try{for(let[t,r]of this.#l.headers.entries())if(t!=="content-type")if(t==="set-cookie"){let o=this.#l.headers.getSetCookie();e.headers.delete("set-cookie");for(let a of o)e.headers.append("set-cookie",a)}else e.headers.set(t,r)}catch(t){if(t instanceof TypeError&&t.message.includes("immutable")){this.res=new Response(e.body,{headers:e.headers,status:e.status});return}else throw t}this.#l=e,this.finalized=!0}render=(...e)=>(this.#c??=t=>this.html(t),this.#c(...e));setLayout=e=>this.#f=e;getLayout=()=>this.#f;setRenderer=e=>{this.#c=e};header=(e,t,r)=>{if(t===void 0){this.#r?this.#r.delete(e):this.#n&&delete this.#n[e.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(e);return}r?.append?(this.#r||(this.#u=!1,this.#r=new Headers(this.#n),this.#n={}),this.#r.append(e,t)):this.#r?this.#r.set(e,t):(this.#n??={},this.#n[e.toLowerCase()]=t),this.finalized&&(r?.append?this.res.headers.append(e,t):this.res.headers.set(e,t))};status=e=>{this.#u=!1,this.#s=e};set=(e,t)=>{this.#o??=new Map,this.#o.set(e,t)};get=e=>this.#o?this.#o.get(e):void 0;get var(){return this.#o?Object.fromEntries(this.#o):{}}#i(e,t,r){if(this.#u&&!r&&!t&&this.#s===200)return new Response(e,{headers:this.#n});if(t&&typeof t!="number"){let a=new Headers(t.headers);this.#r&&this.#r.forEach((s,i)=>{i==="set-cookie"?a.append(i,s):a.set(i,s)});let n=nr(a,this.#n);return new Response(e,{headers:n,status:t.status??this.#s})}let o=typeof t=="number"?t:this.#s;this.#n??={},this.#r??=new Headers,nr(this.#r,this.#n),this.#l&&(this.#l.headers.forEach((a,n)=>{n==="set-cookie"?this.#r?.append(n,a):this.#r?.set(n,a)}),nr(this.#r,this.#n)),r??={};for(let[a,n]of Object.entries(r))if(typeof n=="string")this.#r.set(a,n);else{this.#r.delete(a);for(let s of n)this.#r.append(a,s)}return new Response(e,{status:o,headers:this.#r})}newResponse=(...e)=>this.#i(...e);body=(e,t,r)=>typeof t=="number"?this.#i(e,t,r):this.#i(e,t);text=(e,t,r)=>{if(!this.#n){if(this.#u&&!r&&!t)return new Response(e);this.#n={}}return this.#n["content-type"]=Qa,typeof t=="number"?this.#i(e,t,r):this.#i(e,t)};json=(e,t,r)=>{let o=JSON.stringify(e);return this.#n??={},this.#n["content-type"]="application/json; charset=UTF-8",typeof t=="number"?this.#i(o,t,r):this.#i(o,t)};html=(e,t,r)=>(this.#n??={},this.#n["content-type"]="text/html; charset=UTF-8",typeof e=="object"?rt(e,et.Stringify,!1,{}).then(o=>typeof t=="number"?this.#i(o,t,r):this.#i(o,t)):typeof t=="number"?this.#i(e,t,r):this.#i(e,t));redirect=(e,t)=>(this.#r??=new Headers,this.#r.set("Location",String(e)),this.newResponse(null,t??302));notFound=()=>(this.#d??=()=>new Response,this.#d(this))};var sr=(e,t,r)=>(o,a)=>{let n=-1,s=o instanceof ot;return i(0);async function i(l){if(l<=n)throw new Error("next() called multiple times");n=l;let u,c=!1,d;if(e[l]?(d=e[l][0][0],s&&(o.req.routeIndex=l)):d=l===e.length&&a||void 0,!d)s&&o.finalized===!1&&r&&(u=await r(o));else try{u=await d(o,()=>i(l+1))}catch(h){if(h instanceof Error&&s&&t)o.error=h,u=await t(h,o),c=!0;else throw h}return u&&(o.finalized===!1||c)&&(o.res=u),o}};var I="ALL",Ya="all",Za=["get","post","put","delete","options","patch"],at="Can not add a route since the matcher is already built.",nt=class extends Error{};var uc=Symbol("composedHandler"),cc=e=>e.text("404 Not Found",404),en=(e,t)=>"getResponse"in e?e.getResponse():(console.error(e),t.text("Internal Server Error",500)),ir=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#t="/";routes=[];constructor(e={}){[...Za,Ya].forEach(o=>{this[o]=(a,...n)=>(typeof a=="string"?this.#t=a:this.#a(o,this.#t,a),n.forEach(s=>{this.#a(o,this.#t,s)}),this)}),this.on=(o,a,...n)=>{for(let s of[a].flat()){this.#t=s;for(let i of[o].flat())n.map(l=>{this.#a(i.toUpperCase(),this.#t,l)})}return this},this.use=(o,...a)=>(typeof o=="string"?this.#t=o:(this.#t="*",a.unshift(o)),a.forEach(n=>{this.#a(I,this.#t,n)}),this);let r=e.strict??!0;delete e.strict,Object.assign(this,e),this.getPath=r?e.getPath??or:Va}#e(){let e=new ir({router:this.router,getPath:this.getPath});return e.routes=this.routes,e}#o=cc;#s=en;route(e,t){let r=this.basePath(e);return t.routes.map(o=>{let a;t.#s===en?a=o.handler:(a=async(n,s)=>(await sr([],t.#s)(n,()=>o.handler(n,s))).res,a[uc]=o.handler),r.#a(o.method,o.path,a)}),this}basePath(e){let t=this.#e();return t._basePath=Oe(this._basePath,e),t}onError=e=>(this.#s=e,this);notFound=e=>(this.#o=e,this);mount(e,t,r){let o,a;r&&(typeof r=="function"?a=r:(a=r.optionHandler,o=r.replaceRequest));let n=a?i=>{let l=a(i);return Array.isArray(l)?l:[l]}:i=>{let l;try{l=i.executionCtx}catch{}return[i.env,l]};o||=(()=>{let i=Oe(this._basePath,e),l=i==="/"?0:i.length;return u=>{let c=new URL(u.url);return c.pathname=c.pathname.slice(l)||"/",new Request(c,u)}})();let s=async(i,l)=>{let u=await t(o(i.req.raw),...n(i));if(u)return u;await l()};return this.#a(I,Oe(e,"*"),s),this}#a(e,t,r){e=e.toUpperCase(),t=Oe(this._basePath,t);let o={path:t,method:e,handler:r};this.router.add(e,t,[r,o]),this.routes.push(o)}#r(e,t){if(e instanceof Error)return this.#s(e,t);throw e}#n(e,t,r,o){if(o==="HEAD")return(async()=>new Response(null,await this.#n(e,t,r,"GET")))();let a=this.getPath(e,{env:r}),n=this.router.match(o,a),s=new ot(e,{path:a,matchResult:n,env:r,executionCtx:t,notFoundHandler:this.#o});if(n[0].length===1){let l;try{l=n[0][0][0][0](s,async()=>{s.res=await this.#o(s)})}catch(u){return this.#r(u,s)}return l instanceof Promise?l.then(u=>u||(s.finalized?s.res:this.#o(s))).catch(u=>this.#r(u,s)):l??this.#o(s)}let i=sr(n[0],this.#s,this.#o);return(async()=>{try{let l=await i(s);if(!l.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return l.res}catch(l){return this.#r(l,s)}})()}fetch=(e,...t)=>this.#n(e,t[1],t[0],e.method);request=(e,t,r,o)=>e instanceof Request?this.fetch(t?new Request(e,t):e,r,o):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${Oe("/",e)}`,t),r,o));fire=()=>{addEventListener("fetch",e=>{e.respondWith(this.#n(e.request,e,void 0,e.request.method))})}};var st="[^/]+",$e=".*",Ne="(?:|/.*)",je=Symbol(),dc=new Set(".\\+*[^]$()");function fc(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===$e||e===Ne?1:t===$e||t===Ne?-1:e===st?1:t===st?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var it=class{#t;#e;#o=Object.create(null);insert(e,t,r,o,a){if(e.length===0){if(this.#t!==void 0)throw je;if(a)return;this.#t=t;return}let[n,...s]=e,i=n==="*"?s.length===0?["","",$e]:["","",st]:n==="/*"?["","",Ne]:n.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),l;if(i){let u=i[1],c=i[2]||st;if(u&&i[2]&&(c=c.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(c)))throw je;if(l=this.#o[c],!l){if(Object.keys(this.#o).some(d=>d!==$e&&d!==Ne))throw je;if(a)return;l=this.#o[c]=new it,u!==""&&(l.#e=o.varIndex++)}!a&&u!==""&&r.push([u,l.#e])}else if(l=this.#o[n],!l){if(Object.keys(this.#o).some(u=>u.length>1&&u!==$e&&u!==Ne))throw je;if(a)return;l=this.#o[n]=new it}l.insert(s,t,r,o,a)}buildRegExpStr(){let t=Object.keys(this.#o).sort(fc).map(r=>{let o=this.#o[r];return(typeof o.#e=="number"?`(${r})@${o.#e}`:dc.has(r)?`\\${r}`:r)+o.buildRegExpStr()});return typeof this.#t=="number"&&t.unshift(`#${this.#t}`),t.length===0?"":t.length===1?t[0]:"(?:"+t.join("|")+")"}};var tn=class{#t={varIndex:0};#e=new it;insert(e,t,r){let o=[],a=[];for(let s=0;;){let i=!1;if(e=e.replace(/\{[^}]+\}/g,l=>{let u=`@\\${s}`;return a[s]=[u,l],s++,i=!0,u}),!i)break}let n=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let s=a.length-1;s>=0;s--){let[i]=a[s];for(let l=n.length-1;l>=0;l--)if(n[l].indexOf(i)!==-1){n[l]=n[l].replace(i,a[s][1]);break}}return this.#e.insert(n,t,o,this.#t,r),o}buildRegExp(){let e=this.#e.buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0,r=[],o=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(a,n,s)=>n!==void 0?(r[++t]=Number(n),"$()"):(s!==void 0&&(o[Number(s)]=++t),"")),[new RegExp(`^${e}`),r,o]}};var rn=[],pc=[/^$/,[],Object.create(null)],on=Object.create(null);function an(e){return on[e]??=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}function mc(){on=Object.create(null)}function hc(e){let t=new tn,r=[];if(e.length===0)return pc;let o=e.map(u=>[!/\*|\/:/.test(u[0]),...u]).sort(([u,c],[d,h])=>u?1:d?-1:c.length-h.length),a=Object.create(null);for(let u=0,c=-1,d=o.length;u<d;u++){let[h,f,g]=o[u];h?a[f]=[g.map(([y])=>[y,Object.create(null)]),rn]:c++;let v;try{v=t.insert(f,c,h)}catch(y){throw y===je?new nt(f):y}h||(r[c]=g.map(([y,w])=>{let x=Object.create(null);for(w-=1;w>=0;w--){let[E,F]=v[w];x[E]=F}return[y,x]}))}let[n,s,i]=t.buildRegExp();for(let u=0,c=r.length;u<c;u++)for(let d=0,h=r[u].length;d<h;d++){let f=r[u][d]?.[1];if(!f)continue;let g=Object.keys(f);for(let v=0,y=g.length;v<y;v++)f[g[v]]=i[f[g[v]]]}let l=[];for(let u in s)l[u]=r[s[u]];return[n,l,a]}function Ce(e,t){if(e){for(let r of Object.keys(e).sort((o,a)=>a.length-o.length))if(an(r).test(t))return[...e[r]]}}var lr=class{name="RegExpRouter";#t;#e;constructor(){this.#t={[I]:Object.create(null)},this.#e={[I]:Object.create(null)}}add(e,t,r){let o=this.#t,a=this.#e;if(!o||!a)throw new Error(at);o[e]||[o,a].forEach(i=>{i[e]=Object.create(null),Object.keys(i[I]).forEach(l=>{i[e][l]=[...i[I][l]]})}),t==="/*"&&(t="*");let n=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){let i=an(t);e===I?Object.keys(o).forEach(l=>{o[l][t]||=Ce(o[l],t)||Ce(o[I],t)||[]}):o[e][t]||=Ce(o[e],t)||Ce(o[I],t)||[],Object.keys(o).forEach(l=>{(e===I||e===l)&&Object.keys(o[l]).forEach(u=>{i.test(u)&&o[l][u].push([r,n])})}),Object.keys(a).forEach(l=>{(e===I||e===l)&&Object.keys(a[l]).forEach(u=>i.test(u)&&a[l][u].push([r,n]))});return}let s=Ze(t)||[t];for(let i=0,l=s.length;i<l;i++){let u=s[i];Object.keys(a).forEach(c=>{(e===I||e===c)&&(a[c][u]||=[...Ce(o[c],u)||Ce(o[I],u)||[]],a[c][u].push([r,n-l+i+1]))})}}match(e,t){mc();let r=this.#o();return this.match=(o,a)=>{let n=r[o]||r[I],s=n[2][a];if(s)return s;let i=a.match(n[0]);if(!i)return[[],rn];let l=i.indexOf("",1);return[n[1][l],i]},this.match(e,t)}#o(){let e=Object.create(null);return Object.keys(this.#e).concat(Object.keys(this.#t)).forEach(t=>{e[t]||=this.#s(t)}),this.#t=this.#e=void 0,e}#s(e){let t=[],r=e===I;return[this.#t,this.#e].forEach(o=>{let a=o[e]?Object.keys(o[e]).map(n=>[n,o[e][n]]):[];a.length!==0?(r||=!0,t.push(...a)):e!==I&&t.push(...Object.keys(o[I]).map(n=>[n,o[I][n]]))}),r?hc(t):null}};var ur=class{name="SmartRouter";#t=[];#e=[];constructor(e){this.#t=e.routers}add(e,t,r){if(!this.#e)throw new Error(at);this.#e.push([e,t,r])}match(e,t){if(!this.#e)throw new Error("Fatal error");let r=this.#t,o=this.#e,a=r.length,n=0,s;for(;n<a;n++){let i=r[n];try{for(let l=0,u=o.length;l<u;l++)i.add(...o[l]);s=i.match(e,t)}catch(l){if(l instanceof nt)continue;throw l}this.match=i.match.bind(i),this.#t=[i],this.#e=void 0;break}if(n===a)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,s}get activeRouter(){if(this.#e||this.#t.length!==1)throw new Error("No active router has been determined yet.");return this.#t[0]}};var cr=class{#t;#e;#o;#s=0;#a=Object.create(null);constructor(e,t,r){if(this.#e=r||Object.create(null),this.#t=[],e&&t){let o=Object.create(null);o[e]={handler:t,possibleKeys:[],score:0},this.#t=[o]}this.#o=[]}insert(e,t,r){this.#s=++this.#s;let o=this,a=Ua(t),n=[];for(let l=0,u=a.length;l<u;l++){let c=a[l];if(Object.keys(o.#e).includes(c)){o=o.#e[c];let h=tr(c);h&&n.push(h[1]);continue}o.#e[c]=new cr;let d=tr(c);d&&(o.#o.push(d),n.push(d[1])),o=o.#e[c]}let s=Object.create(null),i={handler:r,possibleKeys:n.filter((l,u,c)=>c.indexOf(l)===u),score:this.#s};return s[e]=i,o.#t.push(s),o}#r(e,t,r,o){let a=[];for(let n=0,s=e.#t.length;n<s;n++){let i=e.#t[n],l=i[t]||i[I],u={};if(l!==void 0){l.params=Object.create(null);for(let c=0,d=l.possibleKeys.length;c<d;c++){let h=l.possibleKeys[c],f=u[l.score];l.params[h]=o[h]&&!f?o[h]:r[h]??o[h],u[l.score]=!0}a.push(l)}}return a}search(e,t){let r=[];this.#a=Object.create(null);let a=[this],n=er(t);for(let i=0,l=n.length;i<l;i++){let u=n[i],c=i===l-1,d=[];for(let h=0,f=a.length;h<f;h++){let g=a[h],v=g.#e[u];v&&(v.#a=g.#a,c?(v.#e["*"]&&r.push(...this.#r(v.#e["*"],e,g.#a,Object.create(null))),r.push(...this.#r(v,e,g.#a,Object.create(null)))):d.push(v));for(let y=0,w=g.#o.length;y<w;y++){let x=g.#o[y],E={...g.#a};if(x==="*"){let _=g.#e["*"];_&&(r.push(...this.#r(_,e,g.#a,Object.create(null))),d.push(_));continue}if(u==="")continue;let[F,S,P]=x,k=g.#e[F],T=n.slice(i).join("/");if(P instanceof RegExp&&P.test(T)){E[S]=T,r.push(...this.#r(k,e,g.#a,E));continue}(P===!0||P.test(u))&&(E[S]=u,c?(r.push(...this.#r(k,e,E,g.#a)),k.#e["*"]&&r.push(...this.#r(k.#e["*"],e,E,g.#a))):(k.#a=E,d.push(k)))}}a=d}return[r.sort((i,l)=>i.score-l.score).map(({handler:i,params:l})=>[i,l])]}};var dr=class{name="TrieRouter";#t;constructor(){this.#t=new cr}add(e,t,r){let o=Ze(t);if(o){for(let a=0,n=o.length;a<n;a++)this.#t.insert(e,o[a],r);return}this.#t.insert(e,t,r)}match(e,t){return this.#t.search(e,t)}};var he=class extends ir{constructor(e={}){super(e),this.router=e.router??new ur({routers:[new lr,new dr]})}};var En=b(Me()),Be=b(te()),xn=b(br()),bt=b(An()),On=async e=>{let t=e.req.raw,r=(0,xn.getRequestCookies)(t),o=(0,Be.validateUrl)((0,bt.applyTemplateValues)(t.headers.get(Be.PROXY_URL_HEADER),r));if(!o)return e.json({error:`The provided URL is invalid: ${t.headers.get(Be.PROXY_URL_HEADER)}`},{status:400});let a;try{a=(0,bt.sanitizeProxyHeaders)({cookies:r,headers:t.headers})}catch{return e.json({error:"Proxy validation failed: one or more headers had an invalid name/value"},{status:400})}try{let n=new Request(o.href,{method:e.req.method,headers:a,body:t.body,signal:AbortSignal.timeout(5e3)}),s;try{s=await fetch(n)}catch(u){console.log("API request error",u.message);let c=u instanceof Error&&u.name==="TimeoutError"?504:500;s=Response.json(u.message,{status:c})}let i=En.NON_BODY_RESPONSE_CODES.includes(s.status)?void 0:s.body??new ReadableStream;return new Response(i,{status:s.status,headers:Object.fromEntries(s.headers)})}catch(n){let s=n instanceof Error?n.message:"Unable to build a valid request from the API definition";return e.json({error:s},{status:500})}};var Rr=b(O());var kn=b(At()),Ue=b(Le()),Z=b(Y()),Ve=b(O());function Er({component:e,files:t}){if(!(0,Ve.isDefined)(e))return{__PROJECT__:{actions:{...t.actions??{}},formulas:{...t.formulas??{}}},...(0,Z.mapObject)(t.packages??{},([n,{actions:s,formulas:i}])=>[n,{actions:s??{},formulas:i??{}}])};let r=new Set,o=new Set,a=new kn.ToddleComponent({component:e,getComponent:(n,s)=>{let i=[s,n].filter(Ve.isDefined).join("/"),l=s?t.packages?.[s]?.components[n]:t.components[n];if(!l){console.warn(`Unable to find component "${i}" in files`);return}return l},packageName:void 0,globalFormulas:{formulas:t.formulas,packages:t.packages}});return a.actionReferences.forEach(n=>r.add(n)),a.formulaReferences.forEach(n=>o.add(n)),a.uniqueSubComponents.forEach(n=>{n.actionReferences.forEach(s=>r.add([n.packageName,s].filter(Ve.isDefined).join("/"))),n.formulaReferences.forEach(s=>o.add([n.packageName,s].filter(Ve.isDefined).join("/")))}),{...(0,Z.mapObject)((0,Z.filterObject)(t.packages??{},([n,{actions:s,formulas:i}])=>Object.values(s??{}).some(l=>r.has(`${n}/${l.name}`))||Object.values(i??{}).some(l=>o.has(`${n}/${l.name}`))),([n,{actions:s,formulas:i}])=>[n,{actions:(0,Z.filterObject)(s??{},([l,u])=>typeof u.name=="string"&&r.has(`${n}/${u.name}`)),formulas:(0,Z.filterObject)(i??{},([l,u])=>typeof u.name=="string"&&o.has(`${n}/${u.name}`))}]),__PROJECT__:{actions:{...Object.fromEntries(Object.entries(t.actions??{}).filter(([n])=>r.has(n)))},formulas:{...Object.fromEntries(Object.entries(t.formulas??{}).filter(([n])=>o.has(n)))}}}}var _n=(e,t)=>{let r=Er({component:e,files:t});return Object.values(r).some(o=>Object.keys(o.actions).length>0||Object.keys(o.formulas).length>0)},Rn=({code:e,componentName:t,projectId:r})=>{let o=(0,Z.mapObject)((0,Z.filterObject)(e,([n,s])=>Object.values(s.actions).some(i=>i.version===2)),([n,s])=>[n==="__PROJECT__"?r:n,s]),a=(0,Z.mapObject)((0,Z.filterObject)(e,([n,s])=>Object.values(s.formulas).some(i=>(0,Ue.isToddleFormula)(i)||i.version===2)),([n,s])=>[n==="__PROJECT__"?r:n,s]);return`/*
 * This file is autogenerated by toddle and should not be edited manually.
 *
 * ${typeof t=="string"?`Entry file: ${t}`:"No entry file specified"}
 */

export const project = "${r}";

export const loadCustomCode = () => {
  ${Object.values(e.__PROJECT__.actions).filter(n=>typeof n.name=="string"&&n.version===void 0).map(n=>n.handler).join(`
`)}
  ${Object.values(e.__PROJECT__.formulas).filter(n=>!(0,Ue.isToddleFormula)(n)&&typeof n.name=="string"&&n.version===void 0).map(n=>n.handler).join(`
`)}
}

export const actions = {
  ${Object.entries(o).map(([n,{actions:s}])=>`"${n}": {
    ${Object.values(s).filter(i=>i.version===2).map(i=>`"${i.name}": {
      arguments: ${JSON.stringify(i.arguments)},
      handler: (args, ctx) => {
        ${i.handler}
        return ${Sn(i.name)}(args, ctx)
      }
    }`).join(`,
`)}
  }`).join(`,
`)}
}

export const formulas = {
  ${Object.entries(a).map(([n,{formulas:s}])=>`"${n}": {
    ${Object.values(s).filter(i=>(0,Ue.isToddleFormula)(i)||i.version===2).map(i=>(0,Ue.isToddleFormula)(i)?`"${i.name}": {
      arguments: ${JSON.stringify(i.arguments)},
      formula: ${JSON.stringify(i.formula)}
    }`:`"${i.name}": {
      arguments: ${JSON.stringify(i.arguments)},
      handler: (args, ctx) => {
        ${i.handler}
        return ${Sn(i.name)}(args, ctx)
      }
    }`).join(`,
`)}
  }`).join(`,
`)}
}`},Sn=e=>e.replaceAll(/[^a-zA-Z0-9_]/g,"").replace(/^[0-9]+/,"");var Cf=b(O()),cs=b(Tt()),Dt=e=>typeof e=="string"?(0,cs.default)(e):null;var ds=async e=>{let t=new URL(e.req.url),r=Dt(t.searchParams.get("entry")),o;if((0,Rr.isDefined)(r)&&(o=e.var.project.files.components[r],!(0,Rr.isDefined)(o)))return e.text(`Component "${r}" not found in project`,{status:404});let a=Er({component:o,files:e.var.project.files}),n=Rn({code:a,componentName:o?.name??r??void 0,projectId:e.var.project.project.short_id}),s={"content-type":"text/javascript","Access-Control-Allow-Origin":"*"};return new Response(n,{headers:s})};var Pr=b(fs()),bs=b(O()),Fs=b(Dr()),ws=b(ms()),As=b(hs());var ys=b(Y()),gs=({fonts:e,baseForAbsoluteUrls:t,basePath:r="/.toddle/fonts/stylesheet/css2"})=>{if(e.length===0)return;let o=new URLSearchParams;o.set("display","swap");for(let n of e){let s=(0,ys.easySort)(n.variants.filter(f=>!Number.isNaN(Number(f.weight))),f=>Number(f.weight));if(s.length===0)continue;let i=s.filter(f=>f.italic),l=s.filter(f=>!f.italic),u=(f,g)=>f.map(v=>`${typeof g=="number"?`${g},`:""}${v.weight}`).join(";"),c=i.length>0,d=[l,i].map((f,g)=>u(f,c?g:void 0)).filter(Boolean).join(";"),h=n.family;c?h+=`:ital,wght@${d}`:h+=`:wght@${d}`,o.append("family",h)}let a=`${r}?${o.toString()}`;try{return{swap:typeof t=="string"?new URL(a,t).toString():a}}catch(n){console.error(n)}};var vs=e=>t=>({...t,nodes:Object.entries(t.nodes).reduce((r,[o,a])=>({...r,[o]:{...a,...a.type==="element"?{attrs:Object.entries(a.attrs).reduce((n,[s,i])=>["src"].includes(s)&&i?.type==="value"&&typeof i.value=="string"?{...n,[s]:{...i,value:new URL(i.value,e).href}}:{...n,[s]:i},{})}:{}}}),{})});var Es=async e=>{let t=new URL(e.req.url),r=e.req.param("filename")?.replace(".js",""),o=(s,i)=>e.json({error:s,info:"Please see https://toddle.dev/docs/export-component for more information on web component export"},{headers:{"Access-Control-Allow-Origin":"*"},status:i}),{files:a,project:n}=e.var.project;try{let s=Object.values(a.components).find(f=>f.name===r);if(!s)return o(`Unable to find component ${Dt(r)}`,404);if(s.route)return o("Pages are not supported as custom elements, only components",403);let i=a.themes??{},l=Object.values(i).flatMap(f=>f.fonts),u=(0,Fs.takeIncludedComponents)({root:s,projectComponents:a.components,packages:a.packages}),c=new URLSearchParams([["entry",s.name]]),d=gs({fonts:l,baseForAbsoluteUrls:t.origin}),h=`/*
 * This file is autogenerated by toddle and should not be edited manually.
 *
 * <${(0,Pr.safeCustomElementName)(s.name)} />
 *
 * Attributes:
 *
 * ${Object.entries(s.attributes??{}).map(([,f])=>`- ${f.name}`).join(`
 * `)}
 *
 * Events:
 *
 * ${Object.entries(s.events??{}).map(([,f])=>`- ${f.name}`).join(`
 * `)}
 */

import { defineComponents, loadCorePlugins } from '/_static/esm-custom-element.main.js';
import { loadCustomCode, formulas, actions } from '/.toddle/custom-code.js?${c.toString()}';

${(0,bs.isDefined)(d)?`
    // Font loading in shadow-dom is not supported widely, so we inject in <head>
    // Ideally, we would inject the stylesheet directly in the ToddleComponent,
    // but it appears it doesn't fetch the fonts - only the stylesheet
    // See https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements#referencing_external_styles
    const linkElem = document.createElement("link");
    linkElem.setAttribute("rel", "stylesheet");
    linkElem.setAttribute("href", "${d.swap}");
    document.head.appendChild(linkElem);`:""}

// Global toddle object
const toddle = (() => {
  const legacyActions = {}
  const legacyFormulas = {}
  const argumentInputDataList = {}
  return {
    formulas,
    actions,
    errors:[],
    project:"${n.name}",
    branch:"main",
    commit:"unknown",
    registerAction: (name, handler) => {
      if (legacyActions[name]) {
        console.error('There already exists an action with the name ', name)
        return
      }
      legacyActions[name] = handler
    },
    getAction: (name) => legacyActions[name],
    registerFormula: (name,handler,getArgumentInputData) => {
      if (legacyFormulas[name]) {
        console.error('There already exists a formula with the name ', name)
        return
      }
      legacyFormulas[name] = handler
      if (getArgumentInputData) {
        argumentInputDataList[name] = getArgumentInputData
      }
    },
    getFormula: (name) => legacyFormulas[name],
    getCustomAction: (name, packageName) => {
      return actions[packageName ?? "${n.name}"]?.[name] ?? actions["${n.name}"]?.[name]
    },
    getCustomFormula: (name, packageName) => {
      return formulas[packageName ?? "${n.name}"]?.[name] ?? formulas["${n.name}"]?.[name]
    },
    getArgumentInputData: (formulaName,args,argIndex,data
    ) => argumentInputDataList[formulaName]?.(args, argIndex, data) || data,
    data: {},
    locationSignal: null,
    eventLog: [],
    pageState: {},
    env: {
      isServer: false,
      branchName: "main",
      request: undefined,
    }
  }
})();

// Load core plugin (actions and formulas)
loadCorePlugins(toddle);

// Load project's custom actions and formulas
loadCustomCode();

// toddle.isEqual is required for some formulas to work. TODO: Remove this once they can consume from somewhere else.
if(!globalThis.toddle || !globalThis.toddle.isEqual) {
  globalThis.toddle = {
    isEqual: toddle.isEqual,
  }
}

// Define the custom element
defineComponents(${JSON.stringify([s.name])}, ${JSON.stringify({themes:i,components:u.map((0,As.replaceTagInNodes)((0,Pr.safeCustomElementName)(s.name),"div")).map(ws.removeTestData).map(vs(t.origin))})}, toddle);
`;return new Response(h,{headers:{"Cache-Control":"no-cache","Access-Control-Allow-Origin":"*","content-type":"text/javascript"}})}catch(s){return console.error(s),o("404",404)}};var xs=b(V()),Os=b(te()),js=b(O());var Ir=class{writer;encoder;writable;abortSubscribers=[];responseReadable;aborted=!1;closed=!1;constructor(e,t){this.writable=e,this.writer=e.getWriter(),this.encoder=new TextEncoder;let r=t.getReader();this.abortSubscribers.push(async()=>{await r.cancel()}),this.responseReadable=new ReadableStream({async pull(o){let{done:a,value:n}=await r.read();a?o.close():o.enqueue(n)},cancel:()=>{this.abort()}})}async write(e){try{typeof e=="string"&&(e=this.encoder.encode(e)),await this.writer.write(e)}catch{}return this}async writeln(e){return await this.write(e+`
`),this}sleep(e){return new Promise(t=>setTimeout(t,e))}async close(){try{await this.writer.close()}catch{}this.closed=!0}async pipe(e){this.writer.releaseLock(),await e.pipeTo(this.writable,{preventClose:!0}),this.writer=this.writable.getWriter()}onAbort(e){this.abortSubscribers.push(e)}abort(){this.aborted||(this.aborted=!0,this.abortSubscribers.forEach(e=>e()))}};var Df=new WeakMap,K=(e,t,r)=>{let{readable:o,writable:a}=new TransformStream,n=new Ir(a,o);return e.req.raw.signal.addEventListener("abort",()=>{n.closed||n.abort()}),Df.set(n.responseReadable,e),(async()=>{try{await t(n)}catch(s){s instanceof Error&&r?await r(s,n):console.error(s)}finally{n.close()}})(),e.newResponse(n.responseReadable)};var Cs=async e=>{try{let t=(0,xs.applyFormula)(e.var.project.files.config?.meta?.icon?.formula,void 0),r=(0,Os.validateUrl)(t);if(r){let{body:o,ok:a,headers:n}=await fetch(r);if(a&&o){e.header("Cache-Control","public, max-age=3600");let s=n.get("content-type");return(0,js.isDefined)(s)&&e.header("Content-Type",s),K(e,i=>i.pipe(o))}}}catch(t){console.error(t)}return new Response(null,{status:404})};var It=e=>{let r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},o=(a=>typeof a=="string"?a==="*"?()=>a:n=>a===n?n:null:typeof a=="function"?a:n=>a.includes(n)?n:null)(r.origin);return async function(n,s){function i(u,c){n.res.headers.set(u,c)}let l=o(n.req.header("origin")||"",n);if(l&&i("Access-Control-Allow-Origin",l),r.origin!=="*"){let u=n.req.header("Vary");u?i("Vary",u):i("Vary","Origin")}if(r.credentials&&i("Access-Control-Allow-Credentials","true"),r.exposeHeaders?.length&&i("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),n.req.method==="OPTIONS"){r.maxAge!=null&&i("Access-Control-Max-Age",r.maxAge.toString()),r.allowMethods?.length&&i("Access-Control-Allow-Methods",r.allowMethods.join(","));let u=r.allowHeaders;if(!u?.length){let c=n.req.header("Access-Control-Request-Headers");c&&(u=c.split(/\s*,\s*/))}return u?.length&&(i("Access-Control-Allow-Headers",u.join(",")),n.res.headers.append("Vary","Access-Control-Request-Headers")),n.res.headers.delete("Content-Length"),n.res.headers.delete("Content-Type"),new Response(null,{headers:n.res.headers,status:204,statusText:n.res.statusText})}await s()}};var We=new he;We.use(It());We.get("/stylesheet/:stylesheet{.*}",async({req:e,...t})=>{let r=new URL(e.url);try{let o=await fetch(`https://fonts.googleapis.com/${e.param("stylesheet")}${r.search}`,Ss(e.raw)),a=await o.text();if(o.ok)a=a.replaceAll("https://fonts.gstatic.com","/.toddle/fonts/font");else return new Response(void 0,{headers:{"Content-Type":"text/css; charset=utf-8"},status:404});let n=ks(o.headers);return Array.from(n.entries()).forEach(([s,i])=>t.header(s,i)),t.body(a)}catch{}return new Response(void 0,{headers:{"Content-Type":"text/css; charset=utf-8"},status:404})});We.get("/font/:font{.*}",async e=>{try{let t=Ss(e.req.raw),r=await fetch(`https://fonts.gstatic.com/${e.req.param("font")}`,t),o=ks(r.headers);if(Array.from(o.entries()).forEach(([a,n])=>e.header(a,n)),r.ok&&r.body)return K(e,a=>a.pipe(r.body))}catch{}return new Response(void 0,{status:404})});var Ss=e=>({method:e.method,headers:["Accept","Accept-Encoding","Accept-Language","Referer","User-Agent"].map(t=>[t,e.headers.get(t)]).filter(t=>typeof t[1]=="string")}),ks=e=>new Headers(["Content-Type","Cache-Control","Expires","Accept-Ranges","Date","Last-Modified","ETag"].map(t=>[t,e.get(t)]).filter(t=>typeof t[1]=="string"));var _s=b(V()),Rs=b(te());var Hf="application/manifest+json",Ts=async e=>{try{let t=(0,_s.applyFormula)(e.var.project.files.config?.meta?.manifest?.formula,void 0);if(typeof(0,Rs.validateUrl)(t)=="string"){let{body:o,ok:a}=await fetch(t);if(a&&o)return e.header("Content-Type",Hf),e.header("Cache-Control","public, max-age=3600"),K(e,n=>n.pipe(o))}}catch(t){console.error(t)}return new Response(null,{status:404})};var Hs=b(V()),Ps=b(te());var Ds="text/plain",Is=async e=>{try{let t=e.var.project.files.config?.meta?.robots,r=(0,Hs.applyFormula)(t?.formula,void 0),o=(0,Ps.validateUrl)(r);if(o){let{body:s,ok:i}=await fetch(o);if(i&&s)return e.header("Content-Type",Ds),e.header("Cache-Control","public, max-age=3600"),K(e,l=>l.pipe(s))}let n=`Sitemap: ${new URL(e.req.url).origin}/sitemap.xml

User-agent: *
Disallow: /_toddle
Disallow: /_toddle/
Disallow: /.toddle
Disallow: /.toddle/
Disallow: /_api
Disallow: /_api/
Allow: /cdn-cgi/imagedelivery/*
Disallow: /cdn-cgi/
`;return new Response(n,{headers:{"Content-Type":Ds,"Cache-Control":"public, max-age=3600"}})}catch(t){console.error(t)}return new Response("404",{status:404})};var $s=b(V()),Ns=b(te()),Ls=b(O());var qs=async e=>{try{let t=e.var.project.files.config,r=(0,Ls.isDefined)(t?.meta?.serviceWorker)?(0,$s.applyFormula)(t.meta.serviceWorker.formula,void 0):void 0,o=(0,Ns.validateUrl)(r);if(o){let{body:a,ok:n}=await fetch(o);if(n&&a)return e.header("Content-Type","text/javascript"),K(e,s=>s.pipe(a))}return new Response(null,{status:404})}catch(t){console.error(t)}return new Response(null,{status:404})};var Bs=b(wr()),Us=b(V()),Vs=b(te()),Ks=b(O());var Ms="application/xml",zs=async e=>{try{let t=new URL(e.req.url),r=e.var.project,o=r.files.config?.meta?.sitemap?.formula;if((0,Ks.isDefined)(o)){let a=(0,Vs.validateUrl)((0,Us.applyFormula)(o,void 0));if(a){let{body:n,ok:s}=await fetch(a);if(s&&n)return e.header("Content-Type",Ms),e.header("Cache-Control","public, max-age=3600"),K(e,i=>i.pipe(n))}else return new Response(null,{status:404})}else{let a=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${Object.values(r.files.components).filter((n,s)=>!!(n&&(0,Bs.isPageComponent)(n)&&n.route?.path.every(i=>i.type==="static")&&s<1e3)).sort((n,s)=>{let i=n.route.path.length,l=s.route.path.length;return i-l}).map(n=>`
<url>
  <loc>${t.origin}/${n.route.path.map(s=>s.name).join("/")}</loc>
</url>`).join("")}
</urlset>`;return new Response(a,{headers:{"Content-Type":Ms,"Cache-Control":"public, max-age=3600"}})}}catch(t){console.error(t)}return new Response(null,{status:404})};var Ws=b($t());import{readFileSync as $r}from"fs";import{resolve as Nr}from"path";var be=new he;be.get("/reset.css",e=>(e.header("Content-Type","text/css"),e.header("Cache-Control","public, max-age=3600"),e.body(Ws.RESET_STYLES)));be.get("/esm-page.main.js",e=>{e.header("Content-Type","text/javascript"),e.header("Cache-Control","public, max-age=3600");let t=$r(Nr(__dirname,"../../../../packages/runtime/dist/esm-page.main.js"),"utf8");return e.body(t)});be.get("/esm-page.main.js.map",e=>{e.header("Content-Type","text/javascript"),e.header("Cache-Control","public, max-age=3600");let t=$r(Nr(__dirname,"../../../../packages/runtime/dist/esm-page.main.js.map"),"utf8");return e.body(t)});be.use(It());be.get("/esm-custom-element.main.js",e=>{e.header("Content-Type","text/javascript"),e.header("Cache-Control","public, max-age=3600");let t=$r(Nr(__dirname,"../../../../packages/runtime/dist/esm-custom-element.main.js"),"utf8");return e.body(t)});var Pu=b(At()),Ub=b(V()),Iu=b(ti()),$u=b($t()),Nu=b(O()),Lu=b(Dr()),qu=b(si()),Mu=b(Ha()),Xt=b(_u()),Qt=b(Pa()),Ie=b(Kt());var Ae=b(Y());function Ia(e){return{...e,attributes:(0,Ae.mapObject)(e.attributes,([t,r])=>[t,(0,Ae.omit)(r,["testValue"])]),...e.route?{route:{...e.route,path:e.route.path.map(t=>(0,Ae.omit)(t,["testValue"])),query:(0,Ae.mapObject)(e.route.query,([t,r])=>[t,(0,Ae.omit)(r,["testValue"])])}}:{}}}var Ru=(e,...t)=>{let r=[""];for(let o=0,a=e.length-1;o<a;o++){r[0]+=e[o];let n=Array.isArray(t[o])?t[o].flat(1/0):[t[o]];for(let s=0,i=n.length;s<i;s++){let l=n[s];if(typeof l=="string")tt(l,r);else if(typeof l=="number")r[0]+=l;else{if(typeof l=="boolean"||l===null||l===void 0)continue;if(typeof l=="object"&&l.isEscaped)if(l.callbacks)r.unshift("",l);else{let u=l.toString();u instanceof Promise?r.unshift("",u):r[0]+=u}else l instanceof Promise?r.unshift("",l):tt(l.toString(),r)}}}return r[0]+=e[e.length-1],r.length===1?"callbacks"in r?Q(Xa(Q(r[0],r.callbacks))):Q(r[0]):Ja(r,r.callbacks)};var Tu=b(Me()),$a=b(te()),Du=b(Kt()),Hu=async(e,t)=>{let r=(0,Du.getRouteDestination)({files:e.var.project.files,req:e.req.raw,route:t});if(!r)return e.html("Invalid destination",{status:500});if(t.type==="redirect")return e.redirect(r.href,t.status??302);if(e.req.raw.headers.get($a.REWRITE_HEADER)!==null)return e.html("toddle rewrites are not allowed to be recursive",{status:500});try{let o=new Headers;o.set("accept-encoding","gzip"),o.set("accept","*/*"),o.set($a.REWRITE_HEADER,"true");let a=await fetch(r,{headers:o,method:"GET"}),n=Tu.NON_BODY_RESPONSE_CODES.includes(a.status)?void 0:a.body??new ReadableStream;return new Response(n,{status:a.status,headers:{...Object.fromEntries(a.headers.entries().filter(([i])=>i!=="content-encoding"))}})}catch{return e.html(`Internal server error when fetching url: ${r.href}`,{status:500})}};var Bu=async e=>{let t=e.var.project,r=new URL(e.req.url),o=(0,Ie.matchRouteForUrl)({url:r,routes:t.files.routes});if(o)return Hu(e,o);let a=(0,Ie.matchPageForUrl)({url:r,components:t.files.components});if(!a&&(a=(0,Ie.get404Page)(t.files.components),!a))return e.html("Page not found",{status:404});let n=(0,Mu.getPageFormulaContext)({component:a,branchName:"main",req:e.req.raw,logErrors:!0,files:t.files}),s=(0,Qt.getHtmlLanguage)({pageInfo:a.route.info,formulaContext:n,defaultLanguage:"en"}),i=(t.files.themes?Object.values(t.files.themes)[0]:t.files.config?.theme)??$u.theme,l=(0,Lu.takeIncludedComponents)({root:a,projectComponents:t.files.components,packages:t.files.packages,includeRoot:!0}),u=(0,Iu.createStylesheet)(a,l,i,{includeResetStyle:!1,createFontFaces:!1}),c=new Pu.ToddleComponent({component:a,getComponent:(w,x)=>{let E=[x,w].filter(Nu.isDefined).join("/"),F=x?t.files.packages?.[x]?.components[w]:t.files.components[w];if(!F){console.warn(`Unable to find component ${E} in files`);return}return F},packageName:void 0,globalFormulas:{formulas:t.files.formulas,packages:t.files.packages}}),d=(0,Xt.renderHeadItems)({headItems:(0,Xt.getHeadItems)({url:r,cssBasePath:"/.toddle/fonts/stylesheet/css2",page:c,files:t.files,project:t.project,context:n,theme:i})}),{html:h}=await(0,qu.renderPageBody)({component:c,formulaContext:n,env:n.env,req:e.req.raw,files:t.files,includedComponents:l,evaluateComponentApis:async w=>({}),projectId:"my_project"}),f=(0,Qt.getCharset)({pageInfo:c.route?.info,formulaContext:n}),g={project:e.var.project.project.short_id,branch:"main",commit:"unknown",pageState:n.data,component:Ia(a),components:l.map(Ia),isPageLoaded:!1,cookies:Object.keys(n.env.request.cookies)},v=_n(c,e.var.project.files),y="";return v?y=`
            <script type="module">
              import { initGlobalObject, createRoot } from '/_static/esm-page.main.js';
              import { loadCustomCode, formulas, actions } from '/.toddle/custom-code.js?${new URLSearchParams([["entry",c.name]]).toString()}';

              window.__toddle = ${JSON.stringify(g).replaceAll("</script>","<\\/script>")};
              window.__toddle.components = [window.__toddle.component, ...window.__toddle.components];
              initGlobalObject({formulas, actions});
              loadCustomCode();
              createRoot(document.getElementById("App"));
            </script>
          `:y=`
        <script type="module">
          import { initGlobalObject, createRoot } from '/_static/esm-page.main.js';

          window.__toddle = ${JSON.stringify(g).replaceAll("</script>","<\\/script>")};
          window.__toddle.components = [window.__toddle.component, ...window.__toddle.components];
          initGlobalObject({formulas: {}, actions: {}});
          createRoot(document.getElementById("App"));
        </script>
    `,e.html(Ru`<!doctype html>
      <html lang="${s}">
        <head>
          ${Q(d)}
          <style>
            ${Q(u)}
          </style>
          ${Q(y)}
        </head>
        <body>
          <div id="App">${Q(h)}</div>
        </body>
      </html>`,{headers:{"Content-Type":`text/html; charset=${f}`}})};var Uu=()=>Lg,Lg={id:"7546cf70-4b38-48be-bcd3-a3dfb35b939f",name:"medium",project:{id:"2961e2d1-3c63-4d98-bd3b-302fbd35972b",name:"Untitled",type:"app",emoji:"\u{1F64C}",accounts:{id:"f9e6ee17-c6b2-4cf5-9d67-0e3cba39d2a3",name:"erik-test-org",account_plans:{plans:{custom_domains:!1},active:!0}},short_id:"brown_sebulba_agreed_baboon",thumbnail:null,description:null,published_at:null,custom_domains:!1},commit:"9c496ac007485f69af00463d9e13e8b8912bd9f1",files:{components:{HomePage:{apis:{"WOW API":{url:{type:"value",value:"https://owen-wilson-wow-api.onrender.com"},name:"WOW API",path:{"8dyQhOhHDyfv-BskOoSks":{index:1,formula:{type:"value",value:"random"}},IbdbGqON7MJvvmNOO1TAg:{index:0,formula:{type:"value",value:"wows"}}},type:"http",client:{},inputs:{},method:"GET",server:{ssr:{enabled:{formula:{type:"value",value:!0}}},proxy:{enabled:{formula:{type:"value",value:!1}}}},headers:{},isError:{},timeout:{},version:2,autoFetch:{type:"value",value:!0},queryParams:{},redirectRules:{}}},name:"HomePage",nodes:{root:{tag:"div",type:"element",attrs:{},style:{gap:"8px",color:"var(--grey-200, #E5E5E5)","min-height":"100%","align-items":"center","justify-content":"center","background-color":"var(--grey-900)"},events:{},classes:{},children:["p44ree-FsxJKSeiWKWQpa","D3FDz9GhM-ZyJChwJhxzK","pK1rq0usjmjwt2RZhiTFV","9cdB1ieO8k-D0guvB5q6d","co7vEt15EK6qGAVA2PGaM","SsJicr-d3CKhKiJ2O7CAO"],styleVariables:{}},"9cdB1ieO8k-D0guvB5q6d":{tag:"button",type:"element",attrs:{},style:{color:"var(--grey-200, #E5E5E5)",width:"fit-content",cursor:"pointer","padding-top":"8px","padding-left":"8px","border-radius":"6px","padding-right":"8px","padding-bottom":"8px","background-color":"var(--blue-600, #2563EB)"},events:{},classes:{},children:["RGFpys0-7b_IQ8SYApMAL"],variants:[{hover:!0,style:{"background-color":"var(--blue-500, #3B82F6)"}}],condition:{name:"@toddle/equals",type:"function",label:null,arguments:[{name:"First",type:{type:"Any"},formula:{path:["URL parameters","test"],type:"path",label:null}},{name:"Second",type:{type:"Any"},formula:{type:"value",value:null}}],display_name:"Equals"},styleVariables:{}},"D3FDz9GhM-ZyJChwJhxzK":{tag:"p",type:"element",attrs:{},style:{color:"inherit",display:"inline-block"},events:{},classes:{},children:["z5I8Rnxfdy2McmsNLlMhD"],styleVariables:{}},EEfz_0R8BhOvKve4YgCi6:{type:"text",value:{name:"@toddle/concatenate",type:"function",arguments:[{name:"0",type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]},formula:{type:"value",value:"Wow API: "}},{name:"0",type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]},formula:{path:["Apis","WOW API","data","0","movie"],type:"path"}}],display_name:"Concatenate",variableArguments:!0}},"RGFpys0-7b_IQ8SYApMAL":{type:"text",value:{type:"value",value:`Element which is only visible when "test" query parameter doesn't have a value`}},c8DBGzXyJIHSfoguEo7OL:{type:"text",value:{type:"value",value:"Hello world"}},co7vEt15EK6qGAVA2PGaM:{tag:"p",type:"element",attrs:{},style:{color:"inherit",display:"inline-block"},events:{},classes:{},children:["EEfz_0R8BhOvKve4YgCi6"],styleVariables:{}},"p44ree-FsxJKSeiWKWQpa":{tag:"h1",type:"element",attrs:{},style:{color:"var(--grey-200, #E5E5E5)","font-size":"2.25rem","font-weight":"var(--font-weight-bold)"},events:{},classes:{},children:["c8DBGzXyJIHSfoguEo7OL"],styleVariables:{}},pK1rq0usjmjwt2RZhiTFV:{tag:"p",type:"element",attrs:{},style:{color:"inherit",display:"inline-block"},events:{},classes:{},children:["vnERXXaHU1zd6Jz79Ry5I"],styleVariables:{}},vnERXXaHU1zd6Jz79Ry5I:{type:"text",value:{path:["URL parameters","q"],type:"path"}},z5I8Rnxfdy2McmsNLlMhD:{type:"text",value:{name:"@toddle/concatenate",type:"function",arguments:[{name:"0",type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]},formula:{type:"value",value:"Calculated value: "}},{name:"0",type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]},formula:{name:"@toddle/formatDate",type:"function",arguments:[{name:"Date",type:{type:"Date"},formula:{name:"@toddle/now",type:"function",arguments:[],display_name:"Now"}},{name:"Locale(s)",type:{type:"String | Array"},formula:{type:"value",value:null}},{name:"Options",type:{type:"Object"},formula:{type:"object",arguments:[{Name:0,name:"timeFormat",formula:{type:"value",value:"short"}},{Name:0,name:"dateFormat",formula:{type:"value",value:"short"}}]}}],display_name:"Format Date"}},{name:"0",type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]},formula:{type:"value",value:" and 4 + 9 is: "}},{name:"0",type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]},formula:{name:"@toddle/sum",type:"function",arguments:[{name:"Array",type:{type:"Array"},formula:{type:"array",arguments:[{Name:0,formula:{type:"value",value:4}},{Name:0,formula:{type:"value",value:9}}]}}],display_name:"Sum"}}],display_name:"Concatenate",variableArguments:!0}},"SsJicr-d3CKhKiJ2O7CAO":{name:"counter",attrs:{},events:{},type:"component",children:[],repeat:null}},route:{info:{title:{formula:{type:"value",value:"Toddle template"}},description:{formula:{type:"value",value:"A blank template from toddle"}}},path:[],query:{q:{name:"q",testValue:"search"},test:{name:"test",testValue:"test"}}},events:[],onLoad:{actions:[],trigger:"load"},functions:{},variables:{},attributes:{}},counter:{attributes:{},onLoad:null,events:[],formulas:{},nodes:{root:{type:"element",tag:"div",attrs:{},classes:{},events:{},children:["8Xso9hlnAdBt6DxRYxND5","bUF7igS7dRCsLtiZGRSf_","bRDsUkUPHDiwSguz57dY1"],style:{color:"var(--grey-200, #E5E5E5)","align-items":"center","justify-content":"start","flex-direction":"row",gap:"8px"},styleVariables:{}},bUF7igS7dRCsLtiZGRSf_:{tag:"p",type:"element",attrs:{},style:{color:"inherit",display:"inline-block"},events:{},classes:{},children:["olANeLrT3QHE_sAMkT2iC"],styleVariables:{}},olANeLrT3QHE_sAMkT2iC:{type:"text",value:{type:"function",name:"@toddle/concatenate",arguments:[{name:"0",formula:{type:"value",value:"Count: "},type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]}},{name:"0",formula:{type:"path",path:["Variables","count"]},type:{type:"Union",types:[{type:"String"},{type:"Array",ofType:{type:"Any"}}]}}],variableArguments:!0,display_name:"Concatenate"}},bRDsUkUPHDiwSguz57dY1:{tag:"button",type:"element",attrs:{},style:{color:"var(--grey-200, #E5E5E5)","border-radius":"6px","background-color":"var(--blue-600, #2563EB)","padding-left":"8px","padding-right":"8px","padding-top":"8px","padding-bottom":"8px",width:"fit-content",cursor:"pointer"},events:{click:{trigger:"click",actions:[{type:"SetVariable",data:{type:"function",name:"@toddle/add",arguments:[{name:"0",formula:{type:"path",path:["Variables","count"]},type:{type:"Number"}},{name:"1",formula:{type:"value",value:1},type:{type:"Number"}}],variableArguments:!0,display_name:"Add"},variable:"count"}]}},classes:{},children:["uuAFG8sArLI_tPfws2CYX"],variants:[{hover:!0,style:{"background-color":"var(--blue-500, #3B82F6)"}}],styleVariables:{}},uuAFG8sArLI_tPfws2CYX:{type:"text",value:{type:"value",value:"+"}},"8Xso9hlnAdBt6DxRYxND5":{tag:"button",type:"element",attrs:{},style:{color:"var(--grey-200, #E5E5E5)","border-radius":"6px","background-color":"var(--blue-600, #2563EB)","padding-left":"8px","padding-right":"8px","padding-top":"8px","padding-bottom":"8px",width:"fit-content",cursor:"pointer"},events:{click:{trigger:"click",actions:[{type:"SetVariable",data:{type:"function",name:"@toddle/max",arguments:[{name:"0",formula:{type:"function",name:"@toddle/minus",arguments:[{name:"Minuend",formula:{type:"path",path:["Variables","count"]},type:{type:"Number"}},{name:"Substrahend",formula:{type:"value",value:1},type:{type:"Number"}}],display_name:"Minus"},type:{type:"Number"}},{name:"1",formula:{type:"value",value:0},type:{type:"Number"}}],variableArguments:!0,display_name:"Max"},variable:"count"}]}},classes:{},children:["fu2T-qOHbpd1ykskNnwiK"],variants:[{hover:!0,style:{"background-color":"var(--blue-500, #3B82F6)"}}],styleVariables:{}},"fu2T-qOHbpd1ykskNnwiK":{type:"text",value:{type:"value",value:"-"}}},variables:{count:{initialValue:{type:"function",name:"@toddle/number",arguments:[{name:"Input",formula:{type:"value",value:0},type:{type:"Any"}}],display_name:"Number"}}},apis:{},name:"counter"}},actions:{},formulas:{},config:{},packages:{},themes:{Default:{color:[{name:"grey",tokens:[{name:"grey-50",type:"value",value:"#FAFAFA"},{name:"grey-100",type:"value",value:"#F5F5F5"},{name:"grey-200",type:"value",value:"#E5E5E5"},{name:"grey-300",type:"value",value:"#D4D4D4"},{name:"grey-400",type:"value",value:"#A3A3A3"},{name:"grey-500",type:"value",value:"#737373"},{name:"grey-600",type:"value",value:"#525252"},{name:"grey-700",type:"value",value:"#404040"},{name:"grey-800",type:"value",value:"#262626"},{name:"grey-900",type:"value",value:"#171717"}]},{name:"red",tokens:[{name:"red-50",type:"value",value:"#FEF2F2"},{name:"red-100",type:"value",value:"#FEE2E2"},{name:"red-200",type:"value",value:"#FECACA"},{name:"red-300",type:"value",value:"#FCA5A5"},{name:"red-400",type:"value",value:"#F87171"},{name:"red-500",type:"value",value:"#EF4444"},{name:"red-600",type:"value",value:"#DC2626"},{name:"red-700",type:"value",value:"#B91C1C"},{name:"red-800",type:"value",value:"#991B1B"},{name:"red-900",type:"value",value:"#7F1D1D"}]},{name:"blue",tokens:[{name:"blue-50",type:"value",value:"#EFF6FF"},{name:"blue-100",type:"value",value:"#DBEAFE"},{name:"blue-200",type:"value",value:"#BFDBFE"},{name:"blue-300",type:"value",value:"#93C5FD"},{name:"blue-400",type:"value",value:"#60A5FA"},{name:"blue-500",type:"value",value:"#3B82F6"},{name:"blue-600",type:"value",value:"#2563EB"},{name:"blue-700",type:"value",value:"#1D4ED8"},{name:"blue-800",type:"value",value:"#1E40AF"},{name:"blue-900",type:"value",value:"#1E3A8A"}]},{name:"lime",tokens:[{name:"lime-50",type:"value",value:"#F7FEE7"},{name:"lime-100",type:"value",value:"#ECFCCB"},{name:"lime-200",type:"value",value:"#D9F99D"},{name:"lime-300",type:"value",value:"#BEF264"},{name:"lime-400",type:"value",value:"#A3E635"},{name:"lime-500",type:"value",value:"#84CC16"},{name:"lime-600",type:"value",value:"#65A30D"},{name:"lime-700",type:"value",value:"#4D7C0F"},{name:"lime-800",type:"value",value:"#3F6212"},{name:"lime-900",type:"value",value:"#365314"}]},{name:"pink",tokens:[{name:"pink-50",type:"value",value:"#FDF2F8"},{name:"pink-100",type:"value",value:"#FCE7F3"},{name:"pink-200",type:"value",value:"#FBCFE8"},{name:"pink-300",type:"value",value:"#F9A8D4"},{name:"pink-400",type:"value",value:"#F472B6"},{name:"pink-500",type:"value",value:"#EC4899"},{name:"pink-600",type:"value",value:"#DB2777"},{name:"pink-700",type:"value",value:"#BE185D"},{name:"pink-800",type:"value",value:"#9D174D"},{name:"pink-900",type:"value",value:"#831843"}]},{name:"teal",tokens:[{name:"teal-50",type:"value",value:"#F0FDFA"},{name:"teal-100",type:"value",value:"#CCFBF1"},{name:"teal-200",type:"value",value:"#99F6E4"},{name:"teal-300",type:"value",value:"#5EEAD4"},{name:"teal-400",type:"value",value:"#2DD4BF"},{name:"teal-500",type:"value",value:"#14B8A6"},{name:"teal-600",type:"value",value:"#0D9488"},{name:"teal-700",type:"value",value:"#0F766E"},{name:"teal-800",type:"value",value:"#115E59"},{name:"teal-900",type:"value",value:"#134E4A"}]},{name:"green",tokens:[{name:"green-50",type:"value",value:"#ECFDF5"},{name:"green-100",type:"value",value:"#D1FAE5"},{name:"green-200",type:"value",value:"#A7F3D0"},{name:"green-300",type:"value",value:"#6EE7B7"},{name:"green-400",type:"value",value:"#34D399"},{name:"green-500",type:"value",value:"#10B981"},{name:"green-600",type:"value",value:"#059669"},{name:"green-700",type:"value",value:"#047857"},{name:"green-800",type:"value",value:"#065F46"},{name:"green-900",type:"value",value:"#064E3B"}]},{name:"purple",tokens:[{name:"purple-50",type:"value",value:"#F5F3FF"},{name:"purple-100",type:"value",value:"#EDE9FE"},{name:"purple-200",type:"value",value:"#DDD6FE"},{name:"purple-300",type:"value",value:"#C4B5FD"},{name:"purple-400",type:"value",value:"#A78BFA"},{name:"purple-500",type:"value",value:"#8B5CF6"},{name:"purple-600",type:"value",value:"#7C3AED"},{name:"purple-700",type:"value",value:"#6D28D9"},{name:"purple-800",type:"value",value:"#5B21B6"},{name:"purple-900",type:"value",value:"#4C1D95"}]},{name:"yellow",tokens:[{name:"yellow-50",type:"value",value:"#FFFBEB"},{name:"yellow-100",type:"value",value:"#FEF3C7"},{name:"yellow-200",type:"value",value:"#FDE68A"},{name:"yellow-300",type:"value",value:"#FCD34D"},{name:"yellow-400",type:"value",value:"#FBBF24"},{name:"yellow-500",type:"value",value:"#F59E0B"},{name:"yellow-600",type:"value",value:"#D97706"},{name:"yellow-700",type:"value",value:"#B45309"},{name:"yellow-800",type:"value",value:"#92400E"},{name:"yellow-900",type:"value",value:"#78350F"}]}],fonts:[{name:"sans",type:"sans-serif",family:"Inter",provider:"google",variants:[{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyeMZ1rib2Bg-4.woff2",name:"100",italic:!1,weight:"100"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyfMZ1rib2Bg-4.woff2",name:"200",italic:!1,weight:"200"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuOKfMZ1rib2Bg-4.woff2",name:"300",italic:!1,weight:"300"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZ1rib2Bg-4.woff2",name:"regular",italic:!1,weight:"400"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuI6fMZ1rib2Bg-4.woff2",name:"500",italic:!1,weight:"500"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZ1rib2Bg-4.woff2",name:"600",italic:!1,weight:"600"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuFuYMZ1rib2Bg-4.woff2",name:"700",italic:!1,weight:"700"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyYMZ1rib2Bg-4.woff2",name:"800",italic:!1,weight:"800"},{url:"https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuBWYMZ1rib2Bg-4.woff2",name:"900",italic:!1,weight:"900"}]}],scheme:"dark",shadow:[{name:"Default",tokens:[{name:"shadow-sm",type:"value",value:" 0 1px 2px 0 rgba(0, 0, 0, 0.25)"},{name:"shadow-base",type:"value",value:" 0 1px 3px 0 rgba(0, 0, 0, 0.25), 0 1px 2px 0 rgba(0, 0, 0, 0.25)"},{name:"shadow-md",type:"value",value:" 0 4px 6px -1px rgba(0, 0, 0, 0.25), 0 2px 4px -1px rgba(0, 0, 0, 0.25)"},{name:"shadow-lg",type:"value",value:" 0 10px 15px -3px rgba(0, 0, 0, 0.25), 0 4px 6px -2px rgba(0, 0, 0, 0.25)"},{name:"shadow-xl",type:"value",value:"0 20px 25px -5px rgba(0, 0, 0, 0.25), 0 10px 10px -5px rgba(0, 0, 0, 0.25)"},{name:"shadow-2xl",type:"value",value:" 0 25px 50px -12px rgba(0, 0, 0, 0.25)"}]}],spacing:[],"z-index":[],"font-size":[{name:"Default",tokens:[{name:"font-size-xxs",type:"value",value:"0.625rem"},{name:"font-size-xs",type:"value",value:"0.75rem"},{name:"font-size-sm",type:"value",value:"0.875rem"},{name:"font-size-base",type:"value",value:"1rem"},{name:"font-size-lg",type:"value",value:"1.125rem"},{name:"font-size-xl",type:"value",value:"1.25rem"},{name:"font-size-2xl",type:"value",value:"1.5rem"},{name:"font-size-3xl",type:"value",value:"1.875rem"},{name:"font-size-4xl",type:"value",value:"2.25rem"},{name:"font-size-5xl",type:"value",value:"3rem"}]}],"font-weight":[{name:"Default",tokens:[{name:"font-weight-thin",type:"value",value:"100"},{name:"font-weight-lighter",type:"value",value:"200"},{name:"font-weight-light",type:"value",value:"300"},{name:"font-weight-regular",type:"value",value:"400"},{name:"font-weight-normal",type:"value",value:"500"},{name:"font-weight-bold",type:"value",value:"700"},{name:"font-weight-semi-bold",type:"value",value:"600"},{name:"font-weight-bolder",type:"value",value:"800"},{name:"font-weight-black",type:"value",value:"900"}]}],"border-radius":[]}}}};(0,Vu.initIsEqual)();var W=new he;W.route("/_static",be);W.use(async(e,t)=>{let r=Uu();return r?(e.set("project",r),t()):e.text("Project not found",{status:404})});W.get("/sitemap.xml",zs);W.get("/robots.txt",Is);W.get("/manifest.json",Ts);W.get("/favicon.ico",Cs);W.get("/serviceWorker.js",qs);W.route("/.toddle/fonts",We);W.get("/.toddle/custom-code.js",ds);W.all("/.toddle/omvej/components/:componentName/apis/:apiName",On);W.get("/.toddle/custom-element/:filename{.+.js}",Es);W.get("/*",Bu);var uF=W;export{uF as default};
